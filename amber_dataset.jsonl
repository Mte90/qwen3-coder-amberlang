{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\ncd \"${tmpdir_17}\" || exit\nexpected_18=(\"1st file with spaces.txt\" \"2nd file with spaces.txt\")\nfile_glob__78_v0 \"*with spaces*\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__37_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__37_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n    cd(tmpdir)\n\n    const expected = [\n        \"1st file with spaces.txt\",\n        \"2nd file with spaces.txt\",\n    ]\n    const actual = file_glob(\"*with spaces*\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_remove_at__5_v0() {\n    local array_14=(\"${1}\")\n    local index_15=\"${2}\"\n    local offset_16=\"$(( index_15 + 1 ))\"\n    eval \"local array_14_deref_11=(\\\"\\${${array_14[0]}[@]}\\\")\"\n    local __length_0=(\"${array_14_deref_11[@]}\")\n    local length_17=\"${#__length_0[@]}\"\n    local slice_upper_1=\"${index_15}\"\n    local slice_offset_2=0\n    local slice_offset_2=$((${slice_offset_2} > 0 ? ${slice_offset_2} : 0))\n    local slice_length_3\n    slice_length_3=\"$(echo \"${slice_upper_1}\" '-' \"${slice_offset_2}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_3=$((${slice_length_3} > 0 ? ${slice_length_3} : 0))\n    local slice_upper_4=\"${length_17}\"\n    local slice_offset_5=\"${offset_16}\"\n    local slice_offset_5=$((${slice_offset_5} > 0 ? ${slice_offset_5} : 0))\n    local slice_length_6\n    slice_length_6=\"$(echo \"${slice_upper_4}\" '-' \"${slice_offset_5}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_6=$((${slice_length_6} > 0 ? ${slice_length_6} : 0))\n    eval \"local array_14_deref_12=(\\\"\\${${array_14[0]}[@]:\\${slice_offset_2}:\\${slice_length_3}}\\\")\"\n    eval \"local array_14_deref_13=(\\\"\\${${array_14[0]}[@]:\\${slice_offset_5}:\\${slice_length_6}}\\\")\"\n    eval \"${array_14}=(\\\"\\${array_14_deref_12[@]}\\\" \\\"\\${array_14_deref_13[@]}\\\")\"\n}\n\n# Output\n# Array after -5: (4) [zero one two three]\n# Array after -4: (4) [zero one two three]\n# Array after -3: (4) [zero one two three]\n# Array after -2: (4) [zero one two three]\n# Array after -1: (4) [zero one two three]\n# Array after 0: (3) [one two three]\n# Array after 1: (3) [zero two three]\n# Array after 2: (3) [zero one three]\n# Array after 3: (3) [zero one two]\n# Array after 4: (4) [zero one two three]\ntest_remove__13_v0() {\n    local data_12=(\"${!1}\")\n    local index_13=\"${2}\"\n    array_remove_at__5_v0 \"data_12\" \"${index_13}\"\n    local __length_8=(\"${data_12[@]}\")\n    echo \"Array after ${index_13}: (${#__length_8[*]}) [${data_12[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nfor (( index_1=-5; index_1 <= 4; index_1++ )); do\n    test_remove__13_v0 numbers_0[@] \"${index_1}\"\ndone", "output": "import { array_remove_at } from \"std/array\"\n\n// Output\n// Array after -5: (4) [zero one two three]\n// Array after -4: (4) [zero one two three]\n// Array after -3: (4) [zero one two three]\n// Array after -2: (4) [zero one two three]\n// Array after -1: (4) [zero one two three]\n// Array after 0: (3) [one two three]\n// Array after 1: (3) [zero two three]\n// Array after 2: (3) [zero one three]\n// Array after 3: (3) [zero one two]\n// Array after 4: (4) [zero one two three]\n\nfun test_remove(data: [Text], index: Int): Null {\n    array_remove_at(data, index)\n    echo(\"Array after {index}: ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    for index in -5..=4 {\n        test_remove(numbers, index)\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\n# Output\n# Not Found\narray_0=(\"apple\" \"banana cherry\")\narray_contains__2_v0 array_0[@] \"banana\"\nret_array_contains2_v0__8_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__8_8}\" != 0 ]; then\n    echo \"Found\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\n// Output\n// Not Found\n\nmain {\n    const array = [\"apple\", \"banana cherry\"]\n    if array_contains(array, \"banana\") {\n        echo(\"Found\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nends_with__24_v0() {\n    local text_5=\"${1}\"\n    local suffix_6=\"${2}\"\n    [[ \"${text_5}\" == *\"${suffix_6}\" ]]\n    __status=$?\n    ret_ends_with24_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nends_with__24_v0 \"hello world\" \"world\"\nret_ends_with24_v0__4_8=\"${ret_ends_with24_v0}\"\nif [ \"${ret_ends_with24_v0__4_8}\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import * from \"std/text\"\n\nmain {\n    if ends_with(\"hello world\", \"world\") {\n        echo(\"Succeeded\")\n    } \n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuppercase__13_v0() {\n    local text_4=\"${1}\"\n    ret_uppercase13_v0=\"$(tr '[:lower:]' '[:upper:]' <<< \"${text_4}\")\"\n    return 0\n}\n\n# Output\n# HELLO WORLD\n# -N\nuppercase__13_v0 \"hello world\"\nret_uppercase13_v0__8_10=\"${ret_uppercase13_v0}\"\nprintf '%s\\n' \"${ret_uppercase13_v0__8_10}\"\nuppercase__13_v0 \"-n\"\nret_uppercase13_v0__9_10=\"${ret_uppercase13_v0}\"\nprintf '%s\\n' \"${ret_uppercase13_v0__9_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// HELLO WORLD\n// -N\n\nmain {\n    echo(uppercase(\"hello world\"))\n    echo(uppercase(\"-n\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_read__43_v0() {\n    local path_23=\"${1}\"\n    local command_0\n    command_0=\"$(< \"${path_23}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_read43_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_read43_v0=\"${command_0}\"\n    return 0\n}\n\nfile_write__44_v0() {\n    local path_20=\"${1}\"\n    local content_21=\"${2}\"\n    local command_1\n    command_1=\"$(printf '%s\n' \"${content_21}\" > \"${path_20}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_write44_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_write44_v0=\"${command_1}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    else\n        local command_3\n        command_3=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_3}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\n# Output\n# Succeeded\n# 2\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\nfile_write__44_v0 \"test.txt\" \"Succeeded\"\n__status=$?\nfile_read__43_v0 \"test.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"Failed\"\nfi\nf_24=\"${ret_file_read43_v0}\"\nprintf '%s\\n' \"${f_24}\"\nfile_write__44_v0 \"dash.txt\" \"-E\"\n__status=$?\nfile_read__43_v0 \"dash.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"Failed\"\nfi\nd_25=\"${ret_file_read43_v0}\"\n__length_5=\"${d_25}\"\nprintf '%s\\n' \"${#__length_5}\"", "output": "// Output\n// Succeeded\n// 2\nimport * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    trust file_write(\"test.txt\", \"Succeeded\")\n    const f = file_read(\"test.txt\") failed {\n        echo(\"Failed\")\n    }\n    echo(f)\n\n    trust file_write(\"dash.txt\", \"-E\")\n    const d = file_read(\"dash.txt\") failed {\n        echo(\"Failed\")\n    }\n    echo(len(d))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_read__43_v0() {\n    local path_23=\"${1}\"\n    local command_0\n    command_0=\"$(< \"${path_23}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_read43_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_read43_v0=\"${command_0}\"\n    return 0\n}\n\nfile_write__44_v0() {\n    local path_20=\"${1}\"\n    local content_21=\"${2}\"\n    local command_1\n    command_1=\"$(printf '%s\n' \"${content_21}\" > \"${path_20}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_write44_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_write44_v0=\"${command_1}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    else\n        local command_3\n        command_3=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_3}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\nfile_write__44_v0 \"test.txt\" \"Succeeded\"\n__status=$?\nfile_read__43_v0 \"test.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"Failed\"\nfi\nf_24=\"${ret_file_read43_v0}\"\nprintf '%s\\n' \"${f_24}\"", "output": "import * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    trust file_write(\"test.txt\", \"Succeeded\")\n    const f = file_read(\"test.txt\") failed {\n        echo(\"Failed\" )\n    }\n    echo(f)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ninput_prompt__126_v0() {\n    local prompt_20=\"${1}\"\n    read -p \"$prompt_20\" || read -p \"$prompt_20\" < /dev/tty\n    __status=$?\n    local command_2\n    command_2=\"$(printf '%s\n' $REPLY)\"\n    __status=$?\n    ret_input_prompt126_v0=\"${command_2}\"\n    return 0\n}\n\n# Output\n# Hello, Amber\ntemp_dir_create__49_v0 \"amber-input-test-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntest_file_18=\"${tmpdir_17}/test_input\"\necho \"Amber\" >> ${test_file_18}\n__status=$?\nexec 0< ${test_file_18}\n__status=$?\ninput_prompt__126_v0 \"Please enter your name:\"\nname_21=\"${ret_input_prompt126_v0}\"\necho \"Hello, \"\"${name_21}\"", "output": "import * from \"std/env\"\nimport { temp_dir_create } from \"std/fs\"\n\n// Output\n// Hello, Amber\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-input-test-XXXX\", true, true)?\n    const test_file = \"{tmpdir}/test_input\"\n    trust $ echo \"Amber\" >> {test_file} $\n    trust $ exec 0< {test_file} $\n    const name = input_prompt(\"Please enter your name:\")\n    echo(\"Hello, \" + name)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nmath_round__1_v0() {\n    local number_1=\"${1}\"\n    if [ \"$(echo \"${number_1}\" '>' 0 | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\" != 0 ]; then\n        ret_math_round1_v0=\"$(bc <<< \"(${number_1}+0.5)/1\")\"\n        return 0\n    fi\n    ret_math_round1_v0=\"$(bc <<< \"(${number_1}-0.5)/1\")\"\n    return 0\n}\n\n# Output\n# 1\n# 2\n# -1\n# -2\nmath_round__1_v0 1.1\nret_math_round1_v0__10_10=\"${ret_math_round1_v0}\"\necho \"${ret_math_round1_v0__10_10}\"\nmath_round__1_v0 1.5\nret_math_round1_v0__11_10=\"${ret_math_round1_v0}\"\necho \"${ret_math_round1_v0__11_10}\"\nmath_round__1_v0 -1.1\nret_math_round1_v0__12_10=\"${ret_math_round1_v0}\"\necho \"${ret_math_round1_v0__12_10}\"\nmath_round__1_v0 -1.5\nret_math_round1_v0__13_10=\"${ret_math_round1_v0}\"\necho \"${ret_math_round1_v0__13_10}\"", "output": "import * from \"std/math\"\n\n// Output\n// 1\n// 2\n// -1\n// -2\n\nmain {\n    echo(math_round(1.1))\n    echo(math_round(1.5))\n    echo(math_round(-1.1))\n    echo(math_round(-1.5))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_extract_at__6_v0() {\n    local array_17=(\"${1}\")\n    local index_18=\"${2}\"\n    eval \"local array_17_deref_12=(\\\"\\${${array_17[0]}[@]}\\\")\"\n    local __length_0=(\"${array_17_deref_12[@]}\")\n    if [ \"$(( $(( index_18 < 0 )) || $(( index_18 >= ${#__length_0[@]} )) ))\" != 0 ]; then\n        ret_array_extract_at6_v0=''\n        return 1\n    fi\n    eval \"local array_17_deref_13=\\\"\\${${array_17[0]}[${index_18}]}\\\"\"\n    local element_19=\"${array_17_deref_13}\"\n    local offset_20=\"$(( index_18 + 1 ))\"\n    eval \"local array_17_deref_14=(\\\"\\${${array_17[0]}[@]}\\\")\"\n    local __length_1=(\"${array_17_deref_14[@]}\")\n    local length_21=\"${#__length_1[@]}\"\n    local slice_upper_2=\"${index_18}\"\n    local slice_offset_3=0\n    local slice_offset_3=$((${slice_offset_3} > 0 ? ${slice_offset_3} : 0))\n    local slice_length_4\n    slice_length_4=\"$(echo \"${slice_upper_2}\" '-' \"${slice_offset_3}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_4=$((${slice_length_4} > 0 ? ${slice_length_4} : 0))\n    local slice_upper_5=\"${length_21}\"\n    local slice_offset_6=\"${offset_20}\"\n    local slice_offset_6=$((${slice_offset_6} > 0 ? ${slice_offset_6} : 0))\n    local slice_length_7\n    slice_length_7=\"$(echo \"${slice_upper_5}\" '-' \"${slice_offset_6}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_7=$((${slice_length_7} > 0 ? ${slice_length_7} : 0))\n    eval \"local array_17_deref_15=(\\\"\\${${array_17[0]}[@]:\\${slice_offset_3}:\\${slice_length_4}}\\\")\"\n    eval \"local array_17_deref_16=(\\\"\\${${array_17[0]}[@]:\\${slice_offset_6}:\\${slice_length_7}}\\\")\"\n    eval \"${array_17}=(\\\"\\${array_17_deref_15[@]}\\\" \\\"\\${array_17_deref_16[@]}\\\")\"\n    ret_array_extract_at6_v0=\"${element_19}\"\n    return 0\n}\n\n# Output\n# Value at 0: \"zero\" (3) [one two three]\n# Value at 1: \"one\" (3) [zero two three]\n# Value at 2: \"two\" (3) [zero one three]\n# Value at 3: \"three\" (3) [zero one two]\ntest_extract__13_v0() {\n    local data_15=(\"${!1}\")\n    local index_16=\"${2}\"\n    array_extract_at__6_v0 \"data_15\" \"${index_16}\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_test_extract13_v0=''\n        return \"${__status}\"\n    fi\n    local value_22=\"${ret_array_extract_at6_v0}\"\n    local __length_9=(\"${data_15[@]}\")\n    echo \"Value at ${index_16}: \\\"${value_22}\\\" (${#__length_9[*]}) [${data_15[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nfor (( index_1=0; index_1 < 4; index_1++ )); do\n    test_extract__13_v0 numbers_0[@] \"${index_1}\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        exit \"${__status}\"\n    fi\ndone", "output": "import { array_extract_at } from \"std/array\"\n\n// Output\n// Value at 0: \"zero\" (3) [one two three]\n// Value at 1: \"one\" (3) [zero two three]\n// Value at 2: \"two\" (3) [zero one three]\n// Value at 3: \"three\" (3) [zero one two]\n\nfun test_extract(data: [Text], index: Int): Null? {\n    const value = array_extract_at(data, index)?\n    echo(\"Value at {index}: \\\"{value}\\\" ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    for index in 0..4 {\n        test_extract(numbers, index)?\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\njoin__8_v0() {\n    local list_5=(\"${!1}\")\n    local delimiter_6=\"${2}\"\n    ret_join8_v0=\"$(IFS=\"${delimiter_6}\" ; printf \"%s\n\" \"${list_5[*]}\")\"\n    return 0\n}\n\n# Output\n# apple,banana,cherry\narray_2=(\"apple\" \"banana\" \"cherry\")\njoin__8_v0 array_2[@] \", \"\nret_join8_v0__7_10=\"${ret_join8_v0}\"\nprintf '%s\\n' \"${ret_join8_v0__7_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// apple,banana,cherry\n\nmain {\n    echo(join([\"apple\", \"banana\", \"cherry\"], \", \"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nprintf__131_v0() {\n    local format_5=\"${1}\"\n    local args_6=(\"${!2}\")\n    args_6=(\"${format_5}\" \"${args_6[@]}\")\n    printf \"${args_6[@]}\"\n}\n\n# Output\n# Hello, Amber!\narray_1=(\"Hello\" \" Amber\")\nprintf__131_v0 \"%s,%s\"'!'\"\n\" array_1[@]", "output": "import * from \"std/env\"\n\n// Output\n// Hello, Amber!\n\nmain {\n    printf(\"%s,%s!\\n\", [\"Hello\", \" Amber\"])\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nhas_failed__129_v0() {\n    local command_4=\"${1}\"\n    eval ${command_4} >/dev/null 2>&1\n    __status=$?\n    ret_has_failed129_v0=\"$(( __status != 0 ))\"\n    return 0\n}\n\n# Output\n# Command failed\nhas_failed__129_v0 \"ls /nonexistent\"\nret_has_failed129_v0__7_8=\"${ret_has_failed129_v0}\"\nif [ \"${ret_has_failed129_v0__7_8}\" != 0 ]; then\n    echo \"Command failed\"\nelse\n    echo \"Command succeeded\"\nfi", "output": "import * from \"std/env\"\n\n// Output\n// Command failed\n\nmain {\n    if has_failed(\"ls /nonexistent\") {\n        echo(\"Command failed\")\n    } else {\n        echo(\"Command succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nsorted__10_v0() {\n    local array_33=(\"${!1}\")\n    local desc_34=\"${2}\"\n    local version_sort_35=\"${3}\"\n    local __length_0=(\"${array_33[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_0[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v0=(\"${array_33[@]}\")\n        return 0\n    fi\n    local desc_flag_36\n    desc_flag_36=\"$(if [ \"${desc_34}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_37=\"\"\n    if [ \"$(( 1 && version_sort_35 ))\" != 0 ]; then\n        sort_flag_37=\"-V\"\n    fi\n    local result_38=()\n    IFS=\"\n\" read -rd '' -a result_38 < <(printf \"%s\n\" \"${array_33[@]}\" | sort ${sort_flag_37} ${desc_flag_36})\n    ret_sorted10_v0=(\"${result_38[@]}\")\n    return 0\n}\n\nsorted__10_v1() {\n    local array_45=(\"${!1}\")\n    local desc_46=\"${2}\"\n    local version_sort_47=\"${3}\"\n    local __length_2=(\"${array_45[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_2[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v1=(\"${array_45[@]}\")\n        return 0\n    fi\n    local desc_flag_48\n    desc_flag_48=\"$(if [ \"${desc_46}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_49=\"\"\n        sort_flag_49=\"-n\"\n    local result_50=()\n    IFS=\"\n\" read -rd '' -a result_50 < <(printf \"%s\n\" \"${array_45[@]}\" | sort ${sort_flag_49} ${desc_flag_48})\n    ret_sorted10_v1=(\"${result_50[@]}\")\n    return 0\n}\n\nsorted__10_v2() {\n    local array_57=(\"${!1}\")\n    local desc_58=\"${2}\"\n    local version_sort_59=\"${3}\"\n    local __length_4=(\"${array_57[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_4[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v2=(\"${array_57[@]}\")\n        return 0\n    fi\n    local desc_flag_60\n    desc_flag_60=\"$(if [ \"${desc_58}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_61=\"\"\n        sort_flag_61=\"-n\"\n    local result_62=()\n    IFS=\"\n\" read -rd '' -a result_62 < <(printf \"%s\n\" \"${array_57[@]}\" | sort ${sort_flag_61} ${desc_flag_60})\n    ret_sorted10_v2=(\"${result_62[@]}\")\n    return 0\n}\n\nsorted__10_v3() {\n    local array_69=(\"${!1}\")\n    local desc_70=\"${2}\"\n    local version_sort_71=\"${3}\"\n    local __length_6=(\"${array_69[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_6[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v3=(\"${array_69[@]}\")\n        return 0\n    fi\n    local desc_flag_72\n    desc_flag_72=\"$(if [ \"${desc_70}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_73=\"\"\n        sort_flag_73=\"-n\"\n    local result_74=()\n    IFS=\"\n\" read -rd '' -a result_74 < <(printf \"%s\n\" \"${array_69[@]}\" | sort ${sort_flag_73} ${desc_flag_72})\n    ret_sorted10_v3=(\"${result_74[@]}\")\n    return 0\n}\n\nsorted__10_v4() {\n    local array_81=(\"${!1}\")\n    local desc_82=\"${2}\"\n    local version_sort_83=\"${3}\"\n        ret_sorted10_v4=(\"${array_81[@]}\")\n        return 0\n    local desc_flag_84\n    desc_flag_84=\"$(if [ \"${desc_82}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_85=\"\"\n    local result_86=()\n    IFS=\"\n\" read -rd '' -a result_86 < <(printf \"%s\n\" \"${array_81[@]}\" | sort ${sort_flag_85} ${desc_flag_84})\n    ret_sorted10_v4=(\"${result_86[@]}\")\n    return 0\n}\n\nsort__11_v0() {\n    local array_30=(\"${1}\")\n    local desc_31=\"${2}\"\n    local version_sort_32=\"${3}\"\n    sorted__10_v0 $array_30[@] \"${desc_31}\" \"${version_sort_32}\"\n    eval \"${array_30}=(\\\"\\${ret_sorted10_v0[@]}\\\")\"\n}\n\nsort__11_v1() {\n    local array_42=(\"${1}\")\n    local desc_43=\"${2}\"\n    local version_sort_44=\"${3}\"\n    sorted__10_v1 $array_42[@] \"${desc_43}\" \"${version_sort_44}\"\n    eval \"${array_42}=(\\\"\\${ret_sorted10_v1[@]}\\\")\"\n}\n\nsort__11_v2() {\n    local array_54=(\"${1}\")\n    local desc_55=\"${2}\"\n    local version_sort_56=\"${3}\"\n    sorted__10_v2 $array_54[@] \"${desc_55}\" \"${version_sort_56}\"\n    eval \"${array_54}=(\\\"\\${ret_sorted10_v2[@]}\\\")\"\n}\n\nsort__11_v3() {\n    local array_66=(\"${1}\")\n    local desc_67=\"${2}\"\n    local version_sort_68=\"${3}\"\n    sorted__10_v3 $array_66[@] \"${desc_67}\" \"${version_sort_68}\"\n    eval \"${array_66}=(\\\"\\${ret_sorted10_v3[@]}\\\")\"\n}\n\nsort__11_v4() {\n    local array_78=(\"${1}\")\n    local desc_79=\"${2}\"\n    local version_sort_80=\"${3}\"\n    sorted__10_v4 $array_78[@] \"${desc_79}\" \"${version_sort_80}\"\n    eval \"${array_78}=(\\\"\\${ret_sorted10_v4[@]}\\\")\"\n}\n\n# Output\n# Array length: 7\n# [-5 1 12 2 a c d]\n# Array length: 7\n# [1 2 12 a c d -5]\n# Array length: 7\n# [d c a 2 12 1 -5]\n# Array length: 4\n# [-2 5 7 10]\n# Array length: 4\n# [10 7 5 -2]\n# Array length: 4\n# [-2 5 7 10]\n# Array length: 4\n# [-5.4 2.34 6.1 11.5]\n# Array length: 4\n# [11.5 6.1 2.34 -5.4]\n# Array length: 2\n# [0 1]\n# Array length: 2\n# [ ]\ntest_sort__13_v0() {\n    local arr_27=(\"${!1}\")\n    local desc_28=\"${2}\"\n    local version_sort_29=\"${3}\"\n    sort__11_v0 \"arr_27\" \"${desc_28}\" \"${version_sort_29}\"\n    local __length_9=(\"${arr_27[@]}\")\n    echo \"Array length: ${#__length_9[*]}\"\n    echo \"[${arr_27[*]}]\"\n}\n\ntest_sort__13_v1() {\n    local arr_39=(\"${!1}\")\n    local desc_40=\"${2}\"\n    local version_sort_41=\"${3}\"\n    sort__11_v1 \"arr_39\" \"${desc_40}\" \"${version_sort_41}\"\n    local __length_10=(\"${arr_39[@]}\")\n    echo \"Array length: ${#__length_10[*]}\"\n    echo \"[${arr_39[*]}]\"\n}\n\ntest_sort__13_v2() {\n    local arr_51=(\"${!1}\")\n    local desc_52=\"${2}\"\n    local version_sort_53=\"${3}\"\n    sort__11_v2 \"arr_51\" \"${desc_52}\" \"${version_sort_53}\"\n    local __length_11=(\"${arr_51[@]}\")\n    echo \"Array length: ${#__length_11[*]}\"\n    echo \"[${arr_51[*]}]\"\n}\n\ntest_sort__13_v3() {\n    local arr_63=(\"${!1}\")\n    local desc_64=\"${2}\"\n    local version_sort_65=\"${3}\"\n    sort__11_v3 \"arr_63\" \"${desc_64}\" \"${version_sort_65}\"\n    local __length_12=(\"${arr_63[@]}\")\n    echo \"Array length: ${#__length_12[*]}\"\n    echo \"[${arr_63[*]}]\"\n}\n\ntest_sort__13_v4() {\n    local arr_75=(\"${!1}\")\n    local desc_76=\"${2}\"\n    local version_sort_77=\"${3}\"\n    sort__11_v4 \"arr_75\" \"${desc_76}\" \"${version_sort_77}\"\n    local __length_13=(\"${arr_75[@]}\")\n    echo \"Array length: ${#__length_13[*]}\"\n    echo \"[${arr_75[*]}]\"\n}\n\narray_15=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sort__13_v0 array_15[@] 0 0\narray_16=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sort__13_v0 array_16[@] 0 1\narray_17=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sort__13_v0 array_17[@] 1 0\narray_18=(7 10 5 -2)\ntest_sort__13_v1 array_18[@] 0 0\narray_19=(7 10 5 -2)\ntest_sort__13_v1 array_19[@] 1 0\narray_20=(7 10 5 -2)\ntest_sort__13_v1 array_20[@] 0 1\narray_21=(11.5 6.1 -5.4 2.34)\ntest_sort__13_v2 array_21[@] 0 0\narray_22=(11.5 6.1 -5.4 2.34)\ntest_sort__13_v2 array_22[@] 1 0\narray_23=(1 0)\ntest_sort__13_v3 array_23[@] 0 0\narray_24=('' '')\ntest_sort__13_v4 array_24[@] 0 0", "output": "import { sort } from \"std/array\"\n\n// Output\n// Array length: 7\n// [-5 1 12 2 a c d]\n// Array length: 7\n// [1 2 12 a c d -5]\n// Array length: 7\n// [d c a 2 12 1 -5]\n// Array length: 4\n// [-2 5 7 10]\n// Array length: 4\n// [10 7 5 -2]\n// Array length: 4\n// [-2 5 7 10]\n// Array length: 4\n// [-5.4 2.34 6.1 11.5]\n// Array length: 4\n// [11.5 6.1 2.34 -5.4]\n// Array length: 2\n// [0 1]\n// Array length: 2\n// [ ]\n\nfun test_sort(arr: [], desc: Bool, version_sort: Bool) {\n    sort(arr, desc, version_sort)\n    echo(\"Array length: {len(arr)}\")\n    echo(\"[{arr}]\")\n}\n\nmain {\n    test_sort([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], false, false)\n    test_sort([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], false, true)\n    test_sort([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], true, false)\n    test_sort([7, 10, 5, -2], false, false)\n    test_sort([7, 10, 5, -2], true, false)\n    test_sort([7, 10, 5, -2], false, true)\n    test_sort([11.5, 6.1, -5.4, 2.34], false, false)\n    test_sort([11.5, 6.1, -5.4, 2.34], true, false)\n    test_sort([true, false], false, false)\n    test_sort([null, null], false, false)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntext_contains__17_v0() {\n    local source_25=\"${1}\"\n    local search_26=\"${2}\"\n    [[ \"${source_25}\" == *\"${search_26}\"* ]]\n    __status=$?\n    ret_text_contains17_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\ntext_contains_all__19_v0() {\n    local source_22=\"${1}\"\n    local searches_23=(\"${!2}\")\n    for search_24 in \"${searches_23[@]}\"; do\n        text_contains__17_v0 \"${source_22}\" \"${search_24}\"\n        local ret_text_contains17_v0__301_16=\"${ret_text_contains17_v0}\"\n        if [ \"$(( ! ret_text_contains17_v0__301_16 ))\" != 0 ]; then\n            ret_text_contains_all19_v0=0\n            return 0\n        fi\n    done\n    ret_text_contains_all19_v0=1\n    return 0\n}\n\n# Output\n# None: 0\n# One: 0\n# Right: 1\n# Both: 1\ntest_multiple__37_v0() {\n    local label_19=\"${1}\"\n    local text_20=\"${2}\"\n    local terms_21=(\"${!3}\")\n    text_contains_all__19_v0 \"${text_20}\" terms_21[@]\n    local result_27=\"${ret_text_contains_all19_v0}\"\n    printf '%s\\n' \"${label_19}: ${result_27}\"\n}\n\narray_1=(\"Other\" \"Other\")\ntest_multiple__37_v0 \"None\" \"Hello World\" array_1[@]\narray_2=(\"World\" \"Something\")\ntest_multiple__37_v0 \"One\" \"Hello World\" array_2[@]\narray_3=(\"World\" \"Hello\")\ntest_multiple__37_v0 \"Right\" \"Hello World\" array_3[@]\narray_4=(\"Hello\" \"World\")\ntest_multiple__37_v0 \"Both\" \"Hello World\" array_4[@]", "output": "import { text_contains_all } from \"std/text\"\n\n// Output\n// None: 0\n// One: 0\n// Right: 1\n// Both: 1\n\nfun test_multiple(label, text, terms) {\n    const result = text_contains_all(text, terms)\n    echo(\"{label}: {result}\")\n}\n\nmain {\n    test_multiple(\"None\", \"Hello World\", [\"Other\", \"Other\"])\n    test_multiple(\"One\", \"Hello World\", [\"World\", \"Something\"])\n    test_multiple(\"Right\", \"Hello World\", [\"World\", \"Hello\"])\n    test_multiple(\"Both\", \"Hello World\", [\"Hello\", \"World\"])\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim_right__10_v0() {\n    local text_5=\"${1}\"\n    local result_6=\"\"\n    result_6=\"${text_5%${text_5##*[![:space:]]}}\"\n    ret_trim_right10_v0=\"${result_6}\"\n    return 0\n}\n\ntrim_right__10_v0 \"  hello   world  \"\nret_trim_right10_v0__4_10=\"${ret_trim_right10_v0}\"\nprintf '%s\\n' \"${ret_trim_right10_v0__4_10}\"", "output": "import * from \"std/text\"\n\nmain {\n    echo(trim_right(\"  hello   world  \"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nchar_at__26_v0() {\n    local text_6=\"${1}\"\n    local index_7=\"${2}\"\n    local result_8=\"\"\n    result_8=\"${text_6:${index_7}:1}\"\n    ret_char_at26_v0=\"${result_8}\"\n    return 0\n}\n\n# Output\n# h\n# d\n# o\nchar_at__26_v0 \"hello world\" 0\nret_char_at26_v0__9_10=\"${ret_char_at26_v0}\"\nprintf '%s\\n' \"${ret_char_at26_v0__9_10}\"\nchar_at__26_v0 \"hello world\" -1\nret_char_at26_v0__10_10=\"${ret_char_at26_v0}\"\nprintf '%s\\n' \"${ret_char_at26_v0__10_10}\"\nchar_at__26_v0 \"hello world\" 4\nret_char_at26_v0__11_10=\"${ret_char_at26_v0}\"\nprintf '%s\\n' \"${ret_char_at26_v0__11_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// h \n// d\n// o\n\nmain {\n    echo(char_at(\"hello world\", 0))\n    echo(char_at(\"hello world\", -1))\n    echo(char_at(\"hello world\", 4))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nstarts_with__23_v0() {\n    local text_5=\"${1}\"\n    local prefix_6=\"${2}\"\n    [[ \"${text_5}\" == \"${prefix_6}\"* ]]\n    __status=$?\n    ret_starts_with23_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nstarts_with__23_v0 \"hello world\" \"hello\"\nret_starts_with23_v0__4_8=\"${ret_starts_with23_v0}\"\nif [ \"${ret_starts_with23_v0__4_8}\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import * from \"std/text\"\n\nmain {\n    if starts_with(\"hello world\", \"hello\") {\n        echo(\"Succeeded\")\n    } \n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nparse_num__15_v0() {\n    local text_6=\"${1}\"\n    local re_int_7=\"^-?[0-9]+\\$\"\n    local re_float_8=\"^-?[0-9]*\\\\.[0-9]+\\$\"\n    [[ ${text_6} =~ ${re_int_7} ]] || [[ ${text_6} =~ ${re_float_8} ]]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_parse_num15_v0=''\n        return \"${__status}\"\n    fi\n    ret_parse_num15_v0=\"${text_6}\"\n    return 0\n}\n\n# Output\n# 123\n# -123\n# 3.14\n# .15\n# -456.789\n# 0\nparse_num__15_v0 \"123\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__12_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__12_10}\"\nparse_num__15_v0 \"-123\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__13_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__13_10}\"\nparse_num__15_v0 \"3.14\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__14_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__14_10}\"\nparse_num__15_v0 \".15\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__15_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__15_10}\"\nparse_num__15_v0 \"-456.789\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__16_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__16_10}\"\nparse_num__15_v0 \"0\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_num15_v0__17_10=\"${ret_parse_num15_v0}\"\necho \"${ret_parse_num15_v0__17_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// 123\n// -123\n// 3.14\n// .15\n// -456.789\n// 0\n\nmain {\n    echo(parse_num(\"123\")?)\n    echo(parse_num(\"-123\")?)\n    echo(parse_num(\"3.14\")?)\n    echo(parse_num(\".15\")?)\n    echo(parse_num(\"-456.789\")?)\n    echo(parse_num(\"0\")?)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\narray_0=(\"apple\" \"banana cherry\")\narray_contains__2_v0 array_0[@] \"banana cherry\"\nret_array_contains2_v0__5_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__5_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\nmain {\n    const array = [\"apple\", \"banana cherry\"]\n    if array_contains(array, \"banana cherry\") {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_469=0\n    local minor_470=0\n    local patch_471=0\n    major_469=${BASH_VERSINFO[0]}\n        minor_470=${BASH_VERSINFO[1]}\n        patch_471=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_469}\" \"${minor_470}\" \"${patch_471}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_465=\"${1}\"\n    local search_466=\"${2}\"\n    local replace_467=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_468=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_468=\"${source_465//\"${search_466}\"/\"${replace_467}\"}\"\n        __status=$?\n    else\n        result_468=\"${source_465//\"${search_466}\"/${replace_467}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_468}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nmatch_regex__20_v0() {\n    local source_461=\"${1}\"\n    local search_462=\"${2}\"\n    local extended_463=\"${3}\"\n    sed_version__3_v0 \n    local sed_version_464=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_462}\" \"/\" \"\\\\/\"\n    search_462=\"${ret_replace1_v0}\"\n    local output_472=\"\"\n    if [ \"$(( $(( sed_version_464 == __SED_VERSION_GNU_1 )) || $(( sed_version_464 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_462}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_462=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_463}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_464 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            # '\\b' is not in POSIX standards. Disable it\n            replace__1_v0 \"${search_462}\" \"\\\\b\" \"\\\\b\"\n            search_462=\"${ret_replace1_v0}\"\n            local command_2\n            command_2=\"$(sed -r -ne \"/${search_462}/p\" <<<\"${source_461}\")\"\n            __status=$?\n            output_472=\"${command_2}\"\n        else\n            local command_3\n            command_3=\"$(sed -E -ne \"/${search_462}/p\" <<<\"${source_461}\")\"\n            __status=$?\n            output_472=\"${command_3}\"\n        fi\n    else\n        if [ \"$(( $(( sed_version_464 == __SED_VERSION_GNU_1 )) || $(( sed_version_464 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_462}\" \"\\\\|\" \"|\"\n            search_462=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -ne \"/${search_462}/p\" <<<\"${source_461}\")\"\n        __status=$?\n        output_472=\"${command_4}\"\n    fi\n    if [ \"$([ \"_${output_472}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_match_regex20_v0=1\n        return 0\n    fi\n    ret_match_regex20_v0=0\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_475=\"${1}\"\n    [ -f \"${path_475}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_5\n        command_5=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_5}\"\n    else\n        local command_6\n        command_6=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_6}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nfile_extract__55_v0() {\n    local path_479=\"${1}\"\n    local target_480=\"${2}\"\n    file_exists__42_v0 \"${path_479}\"\n    local ret_file_exists42_v0__229_8=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__229_8}\" != 0 ]; then\n        match_regex__20_v0 \"${path_479}\" \"\\\\.(tar\\\\.bz2|tbz|tbz2)\\$\" 1\n        local ret_match_regex20_v0__231_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.(tar\\\\.gz|tgz)\\$\" 1\n        local ret_match_regex20_v0__232_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.(tar\\\\.xz|txz)\\$\" 1\n        local ret_match_regex20_v0__233_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.bz2\\$\" 0\n        local ret_match_regex20_v0__234_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.deb\\$\" 0\n        local ret_match_regex20_v0__235_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.gz\\$\" 0\n        local ret_match_regex20_v0__236_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.rar\\$\" 0\n        local ret_match_regex20_v0__237_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.rpm\\$\" 0\n        local ret_match_regex20_v0__238_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.tar\\$\" 0\n        local ret_match_regex20_v0__239_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.xz\\$\" 0\n        local ret_match_regex20_v0__240_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.7z\\$\" 0\n        local ret_match_regex20_v0__241_13=\"${ret_match_regex20_v0}\"\n        match_regex__20_v0 \"${path_479}\" \"\\\\.\\\\(zip\\\\|war\\\\|jar\\\\)\\$\" 0\n        local ret_match_regex20_v0__242_13=\"${ret_match_regex20_v0}\"\n        if [ \"${ret_match_regex20_v0__231_13}\" != 0 ]; then\n            tar xvjf \"${path_479}\" -C \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__232_13}\" != 0 ]; then\n            tar xzf \"${path_479}\" -C \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__233_13}\" != 0 ]; then\n            tar xJf \"${path_479}\" -C \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__234_13}\" != 0 ]; then\n            bunzip2 \"${path_479}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__235_13}\" != 0 ]; then\n            dpkg-deb -xv \"${path_479}\" \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__236_13}\" != 0 ]; then\n            gunzip \"${path_479}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__237_13}\" != 0 ]; then\n            unrar x \"${path_479}\" \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__238_13}\" != 0 ]; then\n            rpm2cpio \"${path_479}\" | cpio -idm\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__239_13}\" != 0 ]; then\n            tar xf \"${path_479}\" -C \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__240_13}\" != 0 ]; then\n            xz --decompress \"${path_479}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__241_13}\" != 0 ]; then\n            7z -y \"${path_479}\" -o \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        elif [ \"${ret_match_regex20_v0__242_13}\" != 0 ]; then\n            unzip \"${path_479}\" -d \"${target_480}\"\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                ret_file_extract55_v0=''\n                return \"${__status}\"\n            fi\n        else\n            echo \"Error: Unsupported file type\"\n            ret_file_extract55_v0=''\n            return 3\n        fi\n    else\n        echo \"Error: File not found\"\n        ret_file_extract55_v0=''\n        return 2\n    fi\n}\n\nfile_compress__56_v0() {\n    local files_459=(\"${!1}\")\n    local target_460=\"${2}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.(tar\\\\.bz2|tbz|tbz2)\\$\" 1\n    local ret_match_regex20_v0__264_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.(tar\\\\.gz|tgz)\\$\" 1\n    local ret_match_regex20_v0__265_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.(tar\\\\.xz|txz)\\$\" 1\n    local ret_match_regex20_v0__266_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.tar\\$\" 1\n    local ret_match_regex20_v0__267_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.bz2\\$\" 0\n    local ret_match_regex20_v0__268_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.gz\\$\" 0\n    local ret_match_regex20_v0__269_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.xz\\$\" 0\n    local ret_match_regex20_v0__270_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.7z\\$\" 0\n    local ret_match_regex20_v0__271_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.(zip|war|jar)\\$\" 1\n    local ret_match_regex20_v0__272_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.rar\\$\" 0\n    local ret_match_regex20_v0__273_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.deb\\$\" 0\n    local ret_match_regex20_v0__274_9=\"${ret_match_regex20_v0}\"\n    match_regex__20_v0 \"${target_460}\" \"\\\\.rpm\\$\" 0\n    local ret_match_regex20_v0__275_9=\"${ret_match_regex20_v0}\"\n    if [ \"${ret_match_regex20_v0__264_9}\" != 0 ]; then\n        tar -cjf \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__265_9}\" != 0 ]; then\n        tar -czf \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__266_9}\" != 0 ]; then\n        tar -cJf \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__267_9}\" != 0 ]; then\n        tar -cf \"${target_460}\" ${files_459[@]}\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__268_9}\" != 0 ]; then\n        bzip2 -k -c ${files_459[@]} > \"${target_460}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__269_9}\" != 0 ]; then\n        gzip -k -c ${files_459[@]} > \"${target_460}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__270_9}\" != 0 ]; then\n        xz -k -c ${files_459[@]} > \"${target_460}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__271_9}\" != 0 ]; then\n        7z a -y \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__272_9}\" != 0 ]; then\n        zip -r \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__273_9}\" != 0 ]; then\n        rar a -y \"${target_460}\" ${files_459[@]} >/dev/null 2>&1\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__274_9}\" != 0 ]; then\n        dpkg-deb --build ${files_459[@]} \"${target_460}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    elif [ \"${ret_match_regex20_v0__275_9}\" != 0 ]; then\n        rpmbuild -bb --buildroot=\"${files_459[@]}\" -D \"_rpmdir=$(dirname \"${target_460}\")\" specfile.spec\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_compress56_v0=''\n            return \"${__status}\"\n        fi\n    else\n        echo \"Error: Unsupported file type\"\n        ret_file_compress56_v0=''\n        return 3\n    fi\n}\n\ntemp_dir_create__49_v0 \"amber-test-src-XXXX\" 0 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nsrc_dir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${src_dir_17}\" || exit\ntouch \"test.txt\"\narray_8=(\"test.txt\")\nfile_compress__56_v0 array_8[@] \"filename.tar.gz\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\npackage_473=\"${src_dir_17}/filename.tar.gz\"\nfile_exists__42_v0 \"${package_473}\"\nret_file_exists42_v0__10_12=\"${ret_file_exists42_v0}\"\nif [ \"$(( ! ret_file_exists42_v0__10_12 ))\" != 0 ]; then\n    echo \"Compression falis; ${package_473} does not exists\"\nfi\ntemp_dir_create__49_v0 \"amber-test-dist-XXXX\" 0 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ndist_dir_476=\"${ret_temp_dir_create49_v0}\"\nfile_extract__55_v0 \"${package_473}\" \"${dist_dir_476}\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nfile_exists__42_v0 \"${dist_dir_476}/test.txt\"\nret_file_exists42_v0__17_8=\"${ret_file_exists42_v0}\"\nif [ \"${ret_file_exists42_v0__17_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Extraction fails: ${dist_dir_476}/test.txt does not exist\"\nfi\nrm -rf ${src_dir_17} ${dist_dir_476}\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi", "output": "import * from \"std/fs\"\nimport { array_contains } from \"std/array\"\n\nmain {\n    const src_dir = temp_dir_create(\"amber-test-src-XXXX\")?\n    cd(src_dir)\n    touch(\"test.txt\")\n    file_compress([\"test.txt\"],\"filename.tar.gz\")?\n    const package = \"{src_dir}/filename.tar.gz\"\n    if not file_exists(package) {\n        echo(\"Compression falis; {package} does not exists\")\n    }\n\n    const dist_dir = temp_dir_create(\"amber-test-dist-XXXX\")?\n    file_extract(package, dist_dir)?\n\n    if file_exists(\"{dist_dir}/test.txt\") {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Extraction fails: {dist_dir}/test.txt does not exist\")\n    }\n\n    $ rm -rf {src_dir} {dist_dir} $?\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v1() {\n    local size_7=\"${1}\"\n    local value_8=\"${2}\"\n    local array_9=(\"${value_8}\")\n    # Used for type casting array\n    array_9=(\"${array_9[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_7 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v1=(\"${array_9[@]}\")\n        return 0\n    fi\n    local __range_start_10=0\n    local __range_end_10=\"${size_7}\"\n    local __dir_10=$(( ${__range_start_10} <= ${__range_end_10} ? 1 : -1 ))\n    for (( ____10=${__range_start_10}; ____10 * ${__dir_10} < ${__range_end_10} * ${__dir_10}; ____10+=${__dir_10} )); do\n        local array_3=(\"${value_8}\")\n        array_9+=(\"${array_3[@]}\")\ndone\n    ret_array_filled9_v1=(\"${array_9[@]}\")\n    return 0\n}\n\narray_filled__9_v2() {\n    local size_11=\"${1}\"\n    local value_12=\"${2}\"\n    local array_13=(\"${value_12}\")\n    # Used for type casting array\n    array_13=(\"${array_13[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_11 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v2=(\"${array_13[@]}\")\n        return 0\n    fi\n    local __range_start_14=0\n    local __range_end_14=\"${size_11}\"\n    local __dir_14=$(( ${__range_start_14} <= ${__range_end_14} ? 1 : -1 ))\n    for (( ____14=${__range_start_14}; ____14 * ${__dir_14} < ${__range_end_14} * ${__dir_14}; ____14+=${__dir_14} )); do\n        local array_5=(\"${value_12}\")\n        array_13+=(\"${array_5[@]}\")\ndone\n    ret_array_filled9_v2=(\"${array_13[@]}\")\n    return 0\n}\n\narray_filled__9_v3() {\n    local size_15=\"${1}\"\n    local value_16=\"${2}\"\n    local array_17=(\"${value_16}\")\n    # Used for type casting array\n    array_17=(\"${array_17[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_15 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v3=(\"${array_17[@]}\")\n        return 0\n    fi\n    local __range_start_18=0\n    local __range_end_18=\"${size_15}\"\n    local __dir_18=$(( ${__range_start_18} <= ${__range_end_18} ? 1 : -1 ))\n    for (( ____18=${__range_start_18}; ____18 * ${__dir_18} < ${__range_end_18} * ${__dir_18}; ____18+=${__dir_18} )); do\n        local array_7=(\"${value_16}\")\n        array_17+=(\"${array_7[@]}\")\ndone\n    ret_array_filled9_v3=(\"${array_17[@]}\")\n    return 0\n}\n\narray_filled__9_v4() {\n    local size_19=\"${1}\"\n    local value_20=\"${2}\"\n    local array_21=(\"${value_20}\")\n    # Used for type casting array\n    array_21=(\"${array_21[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_19 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v4=(\"${array_21[@]}\")\n        return 0\n    fi\n    local __range_start_22=0\n    local __range_end_22=\"${size_19}\"\n    local __dir_22=$(( ${__range_start_22} <= ${__range_end_22} ? 1 : -1 ))\n    for (( ____22=${__range_start_22}; ____22 * ${__dir_22} < ${__range_end_22} * ${__dir_22}; ____22+=${__dir_22} )); do\n        local array_9=(\"${value_20}\")\n        array_21+=(\"${array_9[@]}\")\ndone\n    ret_array_filled9_v4=(\"${array_21[@]}\")\n    return 0\n}\n\n# Output\n# [0 0 0]\n# [0 0 0]\n# [.5 .5 .5]\n# [a a a]\n# [0 0 0]\n# [  ]\narray_filled__9_v0 3 0\nret_array_filled9_v0__12_13=(\"${ret_array_filled9_v0[@]}\")\necho \"[${ret_array_filled9_v0__12_13[*]}]\"\narray_filled__9_v0 3 0\nret_array_filled9_v0__13_13=(\"${ret_array_filled9_v0[@]}\")\necho \"[${ret_array_filled9_v0__13_13[*]}]\"\narray_filled__9_v1 3 .5\nret_array_filled9_v1__14_13=(\"${ret_array_filled9_v1[@]}\")\necho \"[${ret_array_filled9_v1__14_13[*]}]\"\narray_filled__9_v2 3 \"a\"\nret_array_filled9_v2__15_13=(\"${ret_array_filled9_v2[@]}\")\necho \"[${ret_array_filled9_v2__15_13[*]}]\"\narray_filled__9_v3 3 0\nret_array_filled9_v3__16_13=(\"${ret_array_filled9_v3[@]}\")\necho \"[${ret_array_filled9_v3__16_13[*]}]\"\narray_filled__9_v4 3 ''\nret_array_filled9_v4__17_13=(\"${ret_array_filled9_v4[@]}\")\necho \"[${ret_array_filled9_v4__17_13[*]}]\"", "output": "import { array_filled } from \"std/array\"\n\n// Output\n// [0 0 0]\n// [0 0 0]\n// [.5 .5 .5]\n// [a a a]\n// [0 0 0]\n// [  ]\n\nmain {\n    echo(\"[{array_filled(3)}]\")\n    echo(\"[{array_filled(3, 0)}]\")\n    echo(\"[{array_filled(3, .5)}]\")\n    echo(\"[{array_filled(3, \"a\")}]\")\n    echo(\"[{array_filled(3, false)}]\")\n    echo(\"[{array_filled(3, null)}]\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_270=0\n    local minor_271=0\n    local patch_272=0\n    major_270=${BASH_VERSINFO[0]}\n        minor_271=${BASH_VERSINFO[1]}\n        patch_272=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_270}\" \"${minor_271}\" \"${patch_272}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_266=\"${1}\"\n    local search_267=\"${2}\"\n    local replace_268=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_269=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_269=\"${source_266//\"${search_267}\"/\"${replace_268}\"}\"\n        __status=$?\n    else\n        result_269=\"${source_266//\"${search_267}\"/${replace_268}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_269}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__4_v0() {\n    local source_261=\"${1}\"\n    local search_262=\"${2}\"\n    local replace_text_263=\"${3}\"\n    local extended_264=\"${4}\"\n    sed_version__3_v0 \n    local sed_version_265=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_262}\" \"/\" \"\\\\/\"\n    search_262=\"${ret_replace1_v0}\"\n    replace__1_v0 \"${replace_text_263}\" \"/\" \"\\\\/\"\n    replace_text_263=\"${ret_replace1_v0}\"\n    if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_262}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_262=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_264}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_265 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_262}\" \"\\\\|\" \"|\"\n            search_262=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n        __status=$?\n        ret_replace_regex4_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__5_v0() {\n    local text_278=\"${1}\"\n    local delimiter_279=\"${2}\"\n    local result_280=()\n    IFS=\"${delimiter_279}\" read -rd '' -a result_280 < <(printf %s \"$text_278\")\n    __status=$?\n    ret_split5_v0=(\"${result_280[@]}\")\n    return 0\n}\n\njoin__8_v0() {\n    local list_275=(\"${!1}\")\n    local delimiter_276=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_276}\" ; printf \"%s\n\" \"${list_275[*]}\")\"\n    __status=$?\n    ret_join8_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__52_v0() {\n    local path_260=\"${1}\"\n    replace_regex__4_v0 \"${path_260}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars52_v0=\"${ret_replace_regex4_v0}\"\n    return 0\n}\n\nfile_glob_all__53_v0() {\n    local paths_258=(\"${!1}\")\n    local combined_259=\"\"\n    local __length_9=(\"${paths_258[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__52_v0 \"${paths_258[0]}\"\n        combined_259=\"${ret_escape_non_glob_chars52_v0}\"\n    else\n        local items_273=()\n        for item_274 in \"${paths_258[@]}\"; do\n            escape_non_glob_chars__52_v0 \"${item_274}\"\n            item_274=\"${ret_escape_non_glob_chars52_v0}\"\n            items_273+=(\"${item_274}\")\n        done\n        join__8_v0 items_273[@] \" \"\n        combined_259=\"${ret_join8_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_259}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all53_v0=()\n        return \"${__status}\"\n    fi\n    local files_277=\"${command_12}\"\n    split__5_v0 \"${files_277}\" \"\n\"\n    ret_file_glob_all53_v0=(\"${ret_split5_v0[@]}\")\n    return 0\n}\n\nfile_glob__54_v0() {\n    local path_257=\"${1}\"\n    local array_13=(\"${path_257}\")\n    file_glob_all__53_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob54_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob54_v0=(\"${ret_file_glob_all53_v0[@]}\")\n    return 0\n}\n\n# Output\n# [xxx; do echo HACKED; done; for file in]\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/xxx; do echo HACKED; done; for file in\"\n__status=$?\ncd \"${tmpdir_17}\" || exit\n# The glob function escapes all characters in the passed-in glob\n# apart from \"*\", \"?\" and \"/\", to prevent injection attacks.  If we\n# didn't do this, the following code would output \"[HACKED]\" instead\n# of the filename.\nfile_glob__54_v0 \"xxx; do echo HACKED; done; for file in\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nfiles_281=(\"${ret_file_glob54_v0[@]}\")\nfor file_282 in \"${files_281[@]}\"; do\n    echo \"[${file_282}]\"\ndone", "output": "import * from \"std/fs\"\n\n// Output\n// [xxx; do echo HACKED; done; for file in]\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        $ touch \"{tmpdir}/xxx; do echo HACKED; done; for file in\" $\n    }\n    cd(tmpdir)\n\n    // The glob function escapes all characters in the passed-in glob\n    // apart from \"*\", \"?\" and \"/\", to prevent injection attacks.  If we\n    // didn't do this, the following code would output \"[HACKED]\" instead\n    // of the filename.\n    const files = file_glob(\"xxx; do echo HACKED; done; for file in\") failed {\n        echo(\"FAILED\")\n    }\n    for file in files {\n        echo(\"[{file}]\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_var_set__122_v0() {\n    local name_5=\"${1}\"\n    local val_6=\"${2}\"\n    export $name_5=\"$val_6\" 2> /dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_var_set122_v0=''\n        return \"${__status}\"\n    fi\n}\n\nenv_var_set__122_v0 \"test_shell_var_set\" \"Succeeded\"\n__status=$?\necho $test_shell_var_set\n__status=$?", "output": "import * from \"std/env\"\n\nmain {\n    trust env_var_set(\"test_shell_var_set\", \"Succeeded\")\n    trust $ echo \\$test_shell_var_set $\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\narray_0=(\"apple\" \"banana\" \"cherry\")\narray_contains__2_v0 array_0[@] \"banana\"\nret_array_contains2_v0__5_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__5_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\nmain {\n    const array = [\"apple\", \"banana\", \"cherry\"]\n    if array_contains(array, \"banana\") {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_270=0\n    local minor_271=0\n    local patch_272=0\n    major_270=${BASH_VERSINFO[0]}\n        minor_271=${BASH_VERSINFO[1]}\n        patch_272=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_270}\" \"${minor_271}\" \"${patch_272}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_266=\"${1}\"\n    local search_267=\"${2}\"\n    local replace_268=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_269=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_269=\"${source_266//\"${search_267}\"/\"${replace_268}\"}\"\n        __status=$?\n    else\n        result_269=\"${source_266//\"${search_267}\"/${replace_268}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_269}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__4_v0() {\n    local source_261=\"${1}\"\n    local search_262=\"${2}\"\n    local replace_text_263=\"${3}\"\n    local extended_264=\"${4}\"\n    sed_version__3_v0 \n    local sed_version_265=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_262}\" \"/\" \"\\\\/\"\n    search_262=\"${ret_replace1_v0}\"\n    replace__1_v0 \"${replace_text_263}\" \"/\" \"\\\\/\"\n    replace_text_263=\"${ret_replace1_v0}\"\n    if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_262}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_262=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_264}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_265 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_262}\" \"\\\\|\" \"|\"\n            search_262=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n        __status=$?\n        ret_replace_regex4_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__5_v0() {\n    local text_278=\"${1}\"\n    local delimiter_279=\"${2}\"\n    local result_280=()\n    IFS=\"${delimiter_279}\" read -rd '' -a result_280 < <(printf %s \"$text_278\")\n    __status=$?\n    ret_split5_v0=(\"${result_280[@]}\")\n    return 0\n}\n\njoin__8_v0() {\n    local list_275=(\"${!1}\")\n    local delimiter_276=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_276}\" ; printf \"%s\n\" \"${list_275[*]}\")\"\n    __status=$?\n    ret_join8_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__52_v0() {\n    local path_260=\"${1}\"\n    replace_regex__4_v0 \"${path_260}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars52_v0=\"${ret_replace_regex4_v0}\"\n    return 0\n}\n\nfile_glob_all__53_v0() {\n    local paths_258=(\"${!1}\")\n    local combined_259=\"\"\n    local __length_9=(\"${paths_258[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__52_v0 \"${paths_258[0]}\"\n        combined_259=\"${ret_escape_non_glob_chars52_v0}\"\n    else\n        local items_273=()\n        for item_274 in \"${paths_258[@]}\"; do\n            escape_non_glob_chars__52_v0 \"${item_274}\"\n            item_274=\"${ret_escape_non_glob_chars52_v0}\"\n            items_273+=(\"${item_274}\")\n        done\n        join__8_v0 items_273[@] \" \"\n        combined_259=\"${ret_join8_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_259}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all53_v0=()\n        return \"${__status}\"\n    fi\n    local files_277=\"${command_12}\"\n    split__5_v0 \"${files_277}\" \"\n\"\n    ret_file_glob_all53_v0=(\"${ret_split5_v0[@]}\")\n    return 0\n}\n\nfile_glob__54_v0() {\n    local path_257=\"${1}\"\n    local array_13=(\"${path_257}\")\n    file_glob_all__53_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob54_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob54_v0=(\"${ret_file_glob_all53_v0[@]}\")\n    return 0\n}\n\n# Output\n# FAILED\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\nfile_glob__54_v0 \"${tmpdir_17}/missing*\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nfiles_281=(\"${ret_file_glob54_v0[@]}\")\nfor file_282 in \"${files_281[@]}\"; do\n    echo \"[${file_282}]\"\ndone", "output": "import * from \"std/fs\"\n\n// Output\n// FAILED\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n\n    const files = file_glob(\"{tmpdir}/missing*\") failed {\n        echo(\"FAILED\")\n    }\n    for file in files {\n        echo(\"[{file}]\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\ncd \"${tmpdir_17}\" || exit\nexpected_18=(\"file1.txt\" \"file2.txt\")\nfile_glob__78_v0 \"file?.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__37_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__37_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n    cd(tmpdir)\n\n    const expected = [\n        \"file1.txt\",\n        \"file2.txt\",\n    ]\n    const actual = file_glob(\"file?.txt\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_17=0\n    local minor_18=0\n    local patch_19=0\n    major_17=${BASH_VERSINFO[0]}\n        minor_18=${BASH_VERSINFO[1]}\n        patch_19=${BASH_VERSINFO[2]}\n    ret_bash_version0_v0=(\"${major_17}\" \"${minor_18}\" \"${patch_19}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_13=\"${1}\"\n    local search_14=\"${2}\"\n    local replace_15=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_16=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_16=\"${source_13//\"${search_14}\"/\"${replace_15}\"}\"\n    else\n        result_16=\"${source_13//\"${search_14}\"/${replace_15}}\"\n    fi\n    ret_replace1_v0=\"${result_16}\"\n    return 0\n}\n\n# Output\n# TWO TWO TWO\n# a\\\\b\\\\c\\\\d\n# first..second..third..fourth\n# mono\n# di\n# tri\nreplace__1_v0 \"one one one\" \"one\" \"TWO\"\nret_replace1_v0__12_10=\"${ret_replace1_v0}\"\nprintf '%s\\n' \"${ret_replace1_v0__12_10}\"\nreplace__1_v0 \"a\\\\b\\\\c\\\\d\" \"\\\\\" \"\\\\\\\\\"\nret_replace1_v0__13_10=\"${ret_replace1_v0}\"\nprintf '%s\\n' \"${ret_replace1_v0__13_10}\"\nreplace__1_v0 \"first\nsecond\nthird\nfourth\" \"\n\" \"..\"\nret_replace1_v0__14_10=\"${ret_replace1_v0}\"\nprintf '%s\\n' \"${ret_replace1_v0__14_10}\"\n# other newlines should not be touched\nreplace__1_v0 \"mono\ndo\ntri\" \"do\n\" \"di\n\"\nret_replace1_v0__16_10=\"${ret_replace1_v0}\"\nprintf '%s\\n' \"${ret_replace1_v0__16_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// TWO TWO TWO\n// a\\\\b\\\\c\\\\d\n// first..second..third..fourth\n// mono\n// di\n// tri\n\nmain {\n    echo(replace(\"one one one\", \"one\", \"TWO\"))\n    echo(replace(\"a\\\\b\\\\c\\\\d\", \"\\\\\", \"\\\\\\\\\"))\n    echo(replace(\"first\\nsecond\\nthird\\nfourth\", \"\\n\", \"..\"))\n    // other newlines should not be touched\n    echo(replace(\"mono\\ndo\\ntri\", \"do\\n\", \"di\\n\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_28=0\n    local minor_29=0\n    local patch_30=0\n    major_28=${BASH_VERSINFO[0]}\n        minor_29=${BASH_VERSINFO[1]}\n        patch_30=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_28}\" \"${minor_29}\" \"${patch_30}\")\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nuppercase__13_v0() {\n    local text_34=\"${1}\"\n    local command_1\n    command_1=\"$(tr '[:lower:]' '[:upper:]' <<< \"${text_34}\")\"\n    __status=$?\n    ret_uppercase13_v0=\"${command_1}\"\n    return 0\n}\n\nslice__25_v0() {\n    local text_36=\"${1}\"\n    local index_37=\"${2}\"\n    local length_38=\"${3}\"\n    local result_39=\"\"\n    if [ \"$(( length_38 == 0 ))\" != 0 ]; then\n        local __length_2=\"${text_36}\"\n        length_38=\"$(( ${#__length_2} - index_37 ))\"\n    fi\n    if [ \"$(( length_38 <= 0 ))\" != 0 ]; then\n        ret_slice25_v0=\"${result_39}\"\n        return 0\n    fi\n    result_39=\"${text_36: ${index_37}: ${length_38}}\"\n    __status=$?\n    ret_slice25_v0=\"${result_39}\"\n    return 0\n}\n\nchar_at__26_v0() {\n    local text_31=\"${1}\"\n    local index_32=\"${2}\"\n    local result_33=\"\"\n    result_33=\"${text_31:${index_32}:1}\"\n    __status=$?\n    ret_char_at26_v0=\"${result_33}\"\n    return 0\n}\n\ncapitalized__27_v0() {\n    local text_27=\"${1}\"\n    local __length_3=\"${text_27}\"\n    if [ \"$(( ${#__length_3} == 0 ))\" != 0 ]; then\n        ret_capitalized27_v0=\"${text_27}\"\n        return 0\n    fi\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        local command_5\n        command_5=\"$(printf '%s\n' \"${text_27^}\")\"\n        __status=$?\n        ret_capitalized27_v0=\"${command_5}\"\n        return 0\n    fi\n    sed_version__3_v0 \n    local ret_sed_version3_v0__456_12=\"${ret_sed_version3_v0}\"\n    if [ \"$(( ret_sed_version3_v0__456_12 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n        # GNU sed supports \\U\n        local command_6\n        command_6=\"$(printf '%s\n' \"${text_27}\" | sed \"s/^\\(.\\)/\\U\\1/\")\"\n        __status=$?\n        ret_capitalized27_v0=\"${command_6}\"\n        return 0\n    fi\n    char_at__26_v0 \"${text_27}\" 0\n    local ret_char_at26_v0__460_40=\"${ret_char_at26_v0}\"\n    uppercase__13_v0 \"${ret_char_at26_v0__460_40}\"\n    local first_letter_35=\"${ret_uppercase13_v0}\"\n    slice__25_v0 \"${text_27}\" 1 0\n    local ret_slice25_v0__461_31=\"${ret_slice25_v0}\"\n    ret_capitalized27_v0=\"${first_letter_35}\"\"${ret_slice25_v0__461_31}\"\n    return 0\n}\n\n# Output\n# Hello world\ncapitalized__27_v0 \"hello world\"\nret_capitalized27_v0__7_10=\"${ret_capitalized27_v0}\"\nprintf '%s\\n' \"${ret_capitalized27_v0__7_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// Hello world\n\nmain {\n    echo(capitalized(\"hello world\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v0 0 ''\narray_7=(\"${ret_array_filled9_v0[@]}\")\narray_3=()\nif [ \"$(\n    (( ${#array_7[@]} != ${#array_3[@]} )) && echo 0 && exit\n    for (( i=0; i<${#array_7[@]}; i++ )); do [[ \"${array_7[i]}\" != \"${array_3[i]}\" ]] && echo 0 && exit; done\n    echo 1\n)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Failed\"\nfi", "output": "import { array_filled } from \"std/array\"\n\nmain {\n    const array = array_filled(0, null)\n    if array == [Null]:\n        echo(\"Succeeded\")\n    else:\n        echo(\"Failed\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nescaped__132_v0() {\n    local text_7=\"${1}\"\n    ret_escaped132_v0=\"$(printf \"%s\n\" \"$text_7\" | sed -e 's/\\\\/\\\\\\\\/g' -e \"s/%/%%/g\")\"\n    return 0\n}\n\nbold__134_v0() {\n    local message_6=\"${1}\"\n    escaped__132_v0 \"${message_6}\"\n    local ret_escaped132_v0__258_21=\"${ret_escaped132_v0}\"\n    ret_bold134_v0=\"\\\\x1b[1m${ret_escaped132_v0__258_21}\\\\x1b[0m\"\n    return 0\n}\n\n# Output\n# \\x1b[1mHello Amber!\\x1b[0m\nbold__134_v0 \"Hello Amber\"'!'\"\"\nret_bold134_v0__7_10=\"${ret_bold134_v0}\"\nprintf '%s\\n' \"${ret_bold134_v0__7_10}\"", "output": "import * from \"std/env\"\n\n// Output\n// \\x1b[1mHello Amber!\\x1b[0m\n\nmain {\n    echo(bold(\"Hello Amber!\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nmath_floor__2_v0() {\n    local number_4=\"${1}\"\n    ret_math_floor2_v0=\"$(awk '{printf \"%d\", ($1 < 0 ? int($1) - 1 : int($1))}' <<< \"${number_4}\")\"\n    return 0\n}\n\nmath_ceil__3_v0() {\n    local number_3=\"${1}\"\n    math_floor__2_v0 \"${number_3}\"\n    local ret_math_floor2_v0__52_12=\"${ret_math_floor2_v0}\"\n    ret_math_ceil3_v0=\"$(( ret_math_floor2_v0__52_12 + 1 ))\"\n    return 0\n}\n\n# Output\n# 2\n# -1\nmath_ceil__3_v0 1.1\nret_math_ceil3_v0__8_10=\"${ret_math_ceil3_v0}\"\necho \"${ret_math_ceil3_v0__8_10}\"\nmath_ceil__3_v0 -1.9\nret_math_ceil3_v0__9_10=\"${ret_math_ceil3_v0}\"\necho \"${ret_math_ceil3_v0__9_10}\"", "output": "import * from \"std/math\"\n\n// Output\n// 2\n// -1\n\nmain {\n    echo(math_ceil(1.1))\n    echo(math_ceil(-1.9))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\nexpected_18=(\"${tmpdir_17}/1st file with spaces.txt\" \"${tmpdir_17}/2nd file with spaces.txt\")\nfile_glob__78_v0 \"${tmpdir_17}/*with spaces*\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__36_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__36_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n\n    const expected = [\n        \"{tmpdir}/1st file with spaces.txt\",\n        \"{tmpdir}/2nd file with spaces.txt\",\n    ]\n    const actual = file_glob(\"{tmpdir}/*with spaces*\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsort_lines__34_v0() {\n    local text_7=\"${1}\"\n    local desc_8=\"${2}\"\n    local numeric_9=\"${3}\"\n    local args_10=\"\"\n    if [ \"${desc_8}\" != 0 ]; then\n        args_10+=\"r\"\n    fi\n    if [ \"${numeric_9}\" != 0 ]; then\n        args_10+=\"n\"\n    fi\n    ret_sort_lines34_v0=\"$(sort -${args_10} <<< \"${text_7}\")\"\n    return 0\n}\n\n# Output\n# apple\n# banana\n# cherry\n# cherry\n# banana\n# apple\n# 1\n# 2\n# 10\nsort_lines__34_v0 \"banana\napple\ncherry\" 0 0\nret_sort_lines34_v0__14_9=\"${ret_sort_lines34_v0}\"\nprintf '%s\\n' \"${ret_sort_lines34_v0__14_9}\"\nsort_lines__34_v0 \"banana\napple\ncherry\" 1 0\nret_sort_lines34_v0__15_9=\"${ret_sort_lines34_v0}\"\nprintf '%s\\n' \"${ret_sort_lines34_v0__15_9}\"\nsort_lines__34_v0 \"10\n2\n1\" 0 1\nret_sort_lines34_v0__16_9=\"${ret_sort_lines34_v0}\"\nprintf '%s\\n' \"${ret_sort_lines34_v0__16_9}\"", "output": "import { sort_lines } from \"std/text\"\n\n// Output\n// apple\n// banana\n// cherry\n// cherry\n// banana\n// apple\n// 1\n// 2\n// 10\nmain {\n   echo(sort_lines(\"banana\\napple\\ncherry\"))\n   echo(sort_lines(\"banana\\napple\\ncherry\", true))\n   echo(sort_lines(\"10\\n2\\n1\", false, true))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# All dates are internally stored as milliseconds since the Epoch (1970-01-01 00:00 UTC).\ndate_now__2_v0() {\n    ret_date_now2_v0=\"$(date +%s)\"\n    return 0\n}\n\nmath_abs__14_v0() {\n    local number_2=\"${1}\"\n    if [ \"$(( number_2 < 0 ))\" != 0 ]; then\n        ret_math_abs14_v0=\"$(( - number_2 ))\"\n        return 0\n    fi\n    ret_math_abs14_v0=\"${number_2}\"\n    return 0\n}\n\nget_current_date__20_v0() {\n    ret_get_current_date20_v0=\"$(date +%s)\"\n    return 0\n}\n\nget_current_date__20_v0 \nposix_now_0=\"${ret_get_current_date20_v0}\"\ndate_now__2_v0 \nret_date_now2_v0__11_17=\"${ret_date_now2_v0}\"\nmath_abs__14_v0 \"$(( ret_date_now2_v0__11_17 - posix_now_0 ))\"\nret_math_abs14_v0__11_8=\"${ret_math_abs14_v0}\"\nif [ \"$(( ret_math_abs14_v0__11_8 < 3 ))\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import * from \"std/date\"\nimport * from \"std/math\"\n\n#[allow_absurd_cast]\nfun get_current_date(): Int {\n    return trust $ date +%s $ as Int\n}\n\nmain {\n    const posix_now = get_current_date()\n    if math_abs(date_now() - posix_now) < 3: echo(\"Succeeded\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ncount_lines__31_v0() {\n    local text_4=\"${1}\"\n    if [ \"$([ \"_${text_4}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        ret_count_lines31_v0=0\n        return 0\n    fi\n    ret_count_lines31_v0=\"$(wc -l <<< \"${text_4}\" | tr -d ' ')\"\n    return 0\n}\n\n# Output\n# 3\n# 1\n# 0\n# 5\ncount_lines__31_v0 \"one\ntwo\nthree\"\nret_count_lines31_v0__10_10=\"${ret_count_lines31_v0}\"\necho \"${ret_count_lines31_v0__10_10}\"\ncount_lines__31_v0 \"single line\"\nret_count_lines31_v0__11_10=\"${ret_count_lines31_v0}\"\necho \"${ret_count_lines31_v0__11_10}\"\ncount_lines__31_v0 \"\"\nret_count_lines31_v0__12_10=\"${ret_count_lines31_v0}\"\necho \"${ret_count_lines31_v0__12_10}\"\ncount_lines__31_v0 \"a\nb\nc\nd\ne\"\nret_count_lines31_v0__13_10=\"${ret_count_lines31_v0}\"\necho \"${ret_count_lines31_v0__13_10}\"", "output": "import { count_lines } from \"std/text\"\n\n// Output\n// 3\n// 1\n// 0\n// 5\n\nmain {\n    echo(count_lines(\"one\\ntwo\\nthree\"))\n    echo(count_lines(\"single line\"))\n    echo(count_lines(\"\"))\n    echo(count_lines(\"a\\nb\\nc\\nd\\ne\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_var_get__123_v0() {\n    local name_4=\"${1}\"\n    local command_0\n    command_0=\"$(printf \"%s\n\" \"${!name_4}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_var_get123_v0=''\n        return \"${__status}\"\n    fi\n    ret_env_var_get123_v0=\"${command_0}\"\n    return 0\n}\n\nexport test_shell_var_get=\"Succeeded\"\n__status=$?\nenv_var_get__123_v0 \"test_shell_var_get\"\n__status=$?\nret_env_var_get123_v0__5_16=\"${ret_env_var_get123_v0}\"\nprintf '%s\\n' \"${ret_env_var_get123_v0__5_16}\"", "output": "import * from \"std/env\"\n\nmain {\n    trust $ export test_shell_var_get=\"Succeeded\" $\n    echo(trust env_var_get(\"test_shell_var_get\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_shift__8_v0() {\n    local array_13=(\"${1}\")\n    eval \"local array_13_deref_8=(\\\"\\${${array_13[0]}[@]}\\\")\"\n    local __length_0=(\"${array_13_deref_8[@]}\")\n    local length_14=\"${#__length_0[@]}\"\n    if [ \"$(( length_14 == 0 ))\" != 0 ]; then\n        ret_array_shift8_v0=''\n        return 1\n    fi\n    eval \"local array_13_deref_9=\\\"\\${${array_13[0]}[0]}\\\"\"\n    local element_15=\"${array_13_deref_9}\"\n    local slice_upper_1=\"${length_14}\"\n    local slice_offset_2=1\n    local slice_offset_2=$((${slice_offset_2} > 0 ? ${slice_offset_2} : 0))\n    local slice_length_3\n    slice_length_3=\"$(echo \"${slice_upper_1}\" '-' \"${slice_offset_2}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_3=$((${slice_length_3} > 0 ? ${slice_length_3} : 0))\n    eval \"local array_13_deref_10=(\\\"\\${${array_13[0]}[@]:\\${slice_offset_2}:\\${slice_length_3}}\\\")\"\n    eval \"${array_13}=(\\\"\\${array_13_deref_10[@]}\\\")\"\n    ret_array_shift8_v0=\"${element_15}\"\n    return 0\n}\n\n# Output\n# Shifted from numbers: \"zero\" (3) [one two three]\n# First of empty array does not exist\ntest_shift__13_v0() {\n    local label_11=\"${1}\"\n    local data_12=(\"${!2}\")\n    array_shift__8_v0 \"data_12\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        echo \"First of empty array does not exist\"\n        ret_test_shift13_v0=''\n        return 0\n    fi\n    local value_16=\"${ret_array_shift8_v0}\"\n    local __length_4=(\"${data_12[@]}\")\n    echo \"Shifted from ${label_11}: \\\"${value_16}\\\" (${#__length_4[*]}) [${data_12[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nempty_1=()\ntest_shift__13_v0 \"numbers\" numbers_0[@]\ntest_shift__13_v0 \"empty\" empty_1[@]", "output": "import { array_shift } from \"std/array\"\n\n// Output\n// Shifted from numbers: \"zero\" (3) [one two three]\n// First of empty array does not exist\n\nfun test_shift(label: Text, data: [Text]): Null {\n    const value = array_shift(data) failed {\n        echo(\"First of empty array does not exist\")\n        return null\n    }\n    echo(\"Shifted from {label}: \\\"{value}\\\" ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    const empty = [Text]\n    test_shift(\"numbers\", numbers)\n    test_shift(\"empty\", empty)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_54=0\n    local minor_55=0\n    local patch_56=0\n    major_54=${BASH_VERSINFO[0]}\n        minor_55=${BASH_VERSINFO[1]}\n        patch_56=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_54}\" \"${minor_55}\" \"${patch_56}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_50=\"${1}\"\n    local search_51=\"${2}\"\n    local replace_52=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_53=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_53=\"${source_50//\"${search_51}\"/\"${replace_52}\"}\"\n        __status=$?\n    else\n        result_53=\"${source_50//\"${search_51}\"/${replace_52}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_53}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nmatch_regex__20_v0() {\n    local source_46=\"${1}\"\n    local search_47=\"${2}\"\n    local extended_48=\"${3}\"\n    sed_version__3_v0 \n    local sed_version_49=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_47}\" \"/\" \"\\\\/\"\n    search_47=\"${ret_replace1_v0}\"\n    local output_57=\"\"\n    if [ \"$(( $(( sed_version_49 == __SED_VERSION_GNU_1 )) || $(( sed_version_49 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_47}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_47=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_48}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_49 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            # '\\b' is not in POSIX standards. Disable it\n            replace__1_v0 \"${search_47}\" \"\\\\b\" \"\\\\b\"\n            search_47=\"${ret_replace1_v0}\"\n            local command_2\n            command_2=\"$(sed -r -ne \"/${search_47}/p\" <<<\"${source_46}\")\"\n            __status=$?\n            output_57=\"${command_2}\"\n        else\n            local command_3\n            command_3=\"$(sed -E -ne \"/${search_47}/p\" <<<\"${source_46}\")\"\n            __status=$?\n            output_57=\"${command_3}\"\n        fi\n    else\n        if [ \"$(( $(( sed_version_49 == __SED_VERSION_GNU_1 )) || $(( sed_version_49 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_47}\" \"\\\\|\" \"|\"\n            search_47=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -ne \"/${search_47}/p\" <<<\"${source_46}\")\"\n        __status=$?\n        output_57=\"${command_4}\"\n    fi\n    if [ \"$([ \"_${output_57}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_match_regex20_v0=1\n        return 0\n    fi\n    ret_match_regex20_v0=0\n    return 0\n}\n\n# Output\n# Succeeded\n# Succeeded\n# $ end of string\nmatch_regex__20_v0 \"Hello World\" \" World\\$\" 0\nret_match_regex20_v0__9_10=\"${ret_match_regex20_v0}\"\nprintf '%s\\n' \"$(if [ \"${ret_match_regex20_v0__9_10}\" != 0 ]; then echo \"Succeeded\"; else echo \"\"; fi)\"\n# A pipe (|) should be treated as a literal character in POSIX Standards BRE.\nmatch_regex__20_v0 \"to be\" \"to be|not to be\" 0\nret_match_regex20_v0__11_10=\"${ret_match_regex20_v0}\"\nprintf '%s\\n' \"$(if [ \"${ret_match_regex20_v0__11_10}\" != 0 ]; then echo \"\"; else echo \"Succeeded\"; fi)\"", "output": "import { match_regex } from \"std/text\"\n\n// Output\n// Succeeded\n// Succeeded\n\nmain {\n    // $ end of string\n    echo(match_regex(\"Hello World\", \" World$\") then \"Succeeded\" else \"\")\n    // A pipe (|) should be treated as a literal character in POSIX Standards BRE.\n    echo(match_regex(\"to be\", \"to be|not to be\") then \"\" else \"Succeeded\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_var_set__122_v0() {\n    local name_5=\"${1}\"\n    local val_6=\"${2}\"\n    export $name_5=\"$val_6\" 2> /dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_var_set122_v0=''\n        return \"${__status}\"\n    fi\n}\n\nenv_var_unset__124_v0() {\n    local name_8=\"${1}\"\n    unset ${name_8}\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_var_unset124_v0=''\n        return \"${__status}\"\n    fi\n}\n\nenv_var_set__122_v0 \"test_shell_unset\" \"Succeeded\"\n__status=$?\necho $test_shell_unset\n__status=$?\nenv_var_unset__124_v0 \"test_shell_unset\"\n__status=$?\necho $test_shell_unset\n__status=$?", "output": "import * from \"std/env\"\n\nmain {\n    trust env_var_set(\"test_shell_unset\", \"Succeeded\")\n    trust $ echo \\$test_shell_unset $\n    trust env_var_unset(\"test_shell_unset\")\n    trust $ echo \\$test_shell_unset $\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nis_command__125_v0() {\n    local command_4=\"${1}\"\n    [ -x \"$(command -v \"${command_4}\")\" ]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_command125_v0=0\n        return 0\n    fi\n    ret_is_command125_v0=1\n    return 0\n}\n\nis_command__125_v0 \"cat\"\nret_is_command125_v0__4_8=\"${ret_is_command125_v0}\"\nif [ \"${ret_is_command125_v0__4_8}\" != 0 ]; then\n    echo \"Succeeded\"\nfi\nis_command__125_v0 \"this_is_not_command_amber\"\nret_is_command125_v0__8_8=\"${ret_is_command125_v0}\"\nif [ \"${ret_is_command125_v0__8_8}\" != 0 ]; then\n    echo \"exist-error\"\nfi", "output": "import { is_command } from \"std/env\"\n\nmain {\n    if is_command(\"cat\") {\n        echo(\"Succeeded\")\n    }\n\n    if is_command(\"this_is_not_command_amber\") {\n        echo(\"exist-error\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nescaped__132_v0() {\n    local text_49=\"${1}\"\n    ret_escaped132_v0=\"$(printf \"%s\n\" \"$text_49\" | sed -e 's/\\\\/\\\\\\\\/g' -e \"s/%/%%/g\")\"\n    return 0\n}\n\nstyled__133_v0() {\n    local message_42=\"${1}\"\n    local style_43=\"${2}\"\n    local fg_44=\"${3}\"\n    local bg_45=\"${4}\"\n    # https://en.wikipedia.org/wiki/ANSI_escape_code#3-bit_and_4-bit\n    local fg_code_47=0\n    local bg_code_48=0\n        bg_code_48=\"${bg_45}\"\n        fg_code_47=\"${fg_44}\"\n    escaped__132_v0 \"${message_42}\"\n    local ret_escaped132_v0__248_47=\"${ret_escaped132_v0}\"\n    ret_styled133_v0=\"\\\\x1b[${style_43};${fg_code_47};${bg_code_48}m${ret_escaped132_v0__248_47}\\\\x1b[0m\"\n    return 0\n}\n\n# Output\n# \\x1b[31;1;42mHello Amber!\\x1b[0m\nstyled__133_v0 \"Hello Amber\"'!'\"\" 31 1 42\nret_styled133_v0__7_10=\"${ret_styled133_v0}\"\nprintf '%s\\n' \"${ret_styled133_v0__7_10}\"", "output": "import * from \"std/env\"\n\n// Output\n// \\x1b[31;1;42mHello Amber!\\x1b[0m\n\nmain {\n    echo(styled(\"Hello Amber!\", 31, 1, 42))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_17=0\n    local minor_18=0\n    local patch_19=0\n    major_17=${BASH_VERSINFO[0]}\n        minor_18=${BASH_VERSINFO[1]}\n        patch_19=${BASH_VERSINFO[2]}\n    ret_bash_version0_v0=(\"${major_17}\" \"${minor_18}\" \"${patch_19}\")\n    return 0\n}\n\nreplace_one__2_v0() {\n    local source_13=\"${1}\"\n    local search_14=\"${2}\"\n    local replace_15=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_16=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_16=\"${source_13/\"${search_14}\"/\"${replace_15}\"}\"\n    else\n        result_16=\"${source_13/\"${search_14}\"/${replace_15}}\"\n    fi\n    ret_replace_one2_v0=\"${result_16}\"\n    return 0\n}\n\n# Output\n# TWO one one\n# a\\\\b\\c\\d\n# first..second\n# third\n# fourth\n# mono\n# di\n# tri\nreplace_one__2_v0 \"one one one\" \"one\" \"TWO\"\nret_replace_one2_v0__14_10=\"${ret_replace_one2_v0}\"\nprintf '%s\\n' \"${ret_replace_one2_v0__14_10}\"\nreplace_one__2_v0 \"a\\\\b\\\\c\\\\d\" \"\\\\\" \"\\\\\\\\\"\nret_replace_one2_v0__15_10=\"${ret_replace_one2_v0}\"\nprintf '%s\\n' \"${ret_replace_one2_v0__15_10}\"\nreplace_one__2_v0 \"first\nsecond\nthird\nfourth\" \"\n\" \"..\"\nret_replace_one2_v0__16_10=\"${ret_replace_one2_v0}\"\nprintf '%s\\n' \"${ret_replace_one2_v0__16_10}\"\n# other newlines should not be touched\nreplace_one__2_v0 \"mono\ndo\ntri\" \"do\n\" \"di\n\"\nret_replace_one2_v0__18_10=\"${ret_replace_one2_v0}\"\nprintf '%s\\n' \"${ret_replace_one2_v0__18_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// TWO one one\n// a\\\\b\\c\\d\n// first..second\n// third\n// fourth\n// mono\n// di\n// tri\n\nmain {\n    echo(replace_one(\"one one one\", \"one\", \"TWO\"))\n    echo(replace_one(\"a\\\\b\\\\c\\\\d\", \"\\\\\", \"\\\\\\\\\"))\n    echo(replace_one(\"first\\nsecond\\nthird\\nfourth\", \"\\n\", \"..\"))\n    // other newlines should not be touched\n    echo(replace_one(\"mono\\ndo\\ntri\", \"do\\n\", \"di\\n\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ncount_words__32_v0() {\n    local text_4=\"${1}\"\n    ret_count_words32_v0=\"$(wc -w <<< \"${text_4}\" | tr -d ' ')\"\n    return 0\n}\n\n# Output\n# 3\n# 1\n# 0\n# 6\ncount_words__32_v0 \"hello world foo\"\nret_count_words32_v0__10_10=\"${ret_count_words32_v0}\"\necho \"${ret_count_words32_v0__10_10}\"\ncount_words__32_v0 \"single\"\nret_count_words32_v0__11_10=\"${ret_count_words32_v0}\"\necho \"${ret_count_words32_v0__11_10}\"\ncount_words__32_v0 \"\"\nret_count_words32_v0__12_10=\"${ret_count_words32_v0}\"\necho \"${ret_count_words32_v0__12_10}\"\ncount_words__32_v0 \"one two\nthree four\nfive six\"\nret_count_words32_v0__13_10=\"${ret_count_words32_v0}\"\necho \"${ret_count_words32_v0__13_10}\"", "output": "import { count_words } from \"std/text\"\n\n// Output\n// 3\n// 1\n// 0\n// 6\n\nmain {\n    echo(count_words(\"hello world foo\"))\n    echo(count_words(\"single\"))\n    echo(count_words(\"\"))\n    echo(count_words(\"one two\\nthree four\\nfive six\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_24=\"${1}\"\n    [ -f \"${path_24}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nfile_chmod__50_v0() {\n    local path_22=\"${1}\"\n    local mode_23=\"${2}\"\n    file_exists__42_v0 \"${path_22}\"\n    local ret_file_exists42_v0__153_8=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__153_8}\" != 0 ]; then\n        chmod \"${mode_23}\" \"${path_22}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_chmod50_v0=''\n            return \"${__status}\"\n        fi\n        ret_file_chmod50_v0=''\n        return 0\n    fi\n    echo \"The file ${path_22} doesn't exist\"'!'\"\"\n    ret_file_chmod50_v0=''\n    return 1\n}\n\n# Output\n# created\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/amber-symbolic\"\nfile_chmod__50_v0 \"${tmpdir_17}/amber-symbolic\" \"+x\"\n__status=$?\nif [ \"$(( __status == 0 ))\" != 0 ]; then\n    echo \"created\"\nfi", "output": "import { file_chmod, temp_dir_create } from \"std/fs\"\n\n// Output\n// created\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    touch(\"{tmpdir}/amber-symbolic\")\n    trust file_chmod(\"{tmpdir}/amber-symbolic\", \"+x\")\n    if status == 0 {\n        echo(\"created\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_55=0\n    local minor_56=0\n    local patch_57=0\n    major_55=${BASH_VERSINFO[0]}\n        minor_56=${BASH_VERSINFO[1]}\n        patch_57=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_55}\" \"${minor_56}\" \"${patch_57}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_51=\"${1}\"\n    local search_52=\"${2}\"\n    local replace_53=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_54=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_54=\"${source_51//\"${search_52}\"/\"${replace_53}\"}\"\n        __status=$?\n    else\n        result_54=\"${source_51//\"${search_52}\"/${replace_53}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_54}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__4_v0() {\n    local source_46=\"${1}\"\n    local search_47=\"${2}\"\n    local replace_text_48=\"${3}\"\n    local extended_49=\"${4}\"\n    sed_version__3_v0 \n    local sed_version_50=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_47}\" \"/\" \"\\\\/\"\n    search_47=\"${ret_replace1_v0}\"\n    replace__1_v0 \"${replace_text_48}\" \"/\" \"\\\\/\"\n    replace_text_48=\"${ret_replace1_v0}\"\n    if [ \"$(( $(( sed_version_50 == __SED_VERSION_GNU_1 )) || $(( sed_version_50 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_47}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_47=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_49}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_50 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_50 == __SED_VERSION_GNU_1 )) || $(( sed_version_50 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_47}\" \"\\\\|\" \"|\"\n            search_47=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n        __status=$?\n        ret_replace_regex4_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\n# Output\n# aeon aeons ### eons\n# abc[123]def\n# ###\n# .tar.gz\n# #path#to#file.txt\nreplace_regex__4_v0 \"aeon aeons eon eons\" \" eon \" \" ### \" 0\nret_replace_regex4_v0__11_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__11_10}\"\n# Combination of bracket exp and one or more\nreplace_regex__4_v0 \"abc123def\" \"\\\\([0-9][0-9]*\\\\)\" \"[\\\\1]\" 0\nret_replace_regex4_v0__13_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__13_10}\"\n# Ending position of the string\nreplace_regex__4_v0 \"foo\" \"foo\\$\" \"###\" 0\nret_replace_regex4_v0__15_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__15_10}\"\n# A pipe (|) should be treated as a literal character in POSIX Standards BRE.\nreplace_regex__4_v0 \".tar.gz\" \"\\\\.\\\\(tar\\\\.gz\\\\|tgz\\\\)\\$\" \"Failed\" 0\nret_replace_regex4_v0__17_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__17_10}\"\n# Replacing forward slash failed\nreplace_regex__4_v0 \"/path/to/file.txt\" \"/\" \"#\" 0\nret_replace_regex4_v0__19_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__19_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// aeon aeons ### eons\n// abc[123]def\n// ###\n// .tar.gz\n// #path#to#file.txt\n\nmain {\n    echo(replace_regex(\"aeon aeons eon eons\", \" eon \", \" ### \"))\n    // Combination of bracket exp and one or more\n    echo(replace_regex(\"abc123def\", \"\\([0-9][0-9]*\\)\", \"[\\1]\"))\n    // Ending position of the string\n    echo(replace_regex(\"foo\", \"foo$\", \"###\"))\n    // A pipe (|) should be treated as a literal character in POSIX Standards BRE.\n    echo(replace_regex(\".tar.gz\", \"\\.\\(tar\\.gz\\|tgz\\)$\", \"Failed\"))\n    // Replacing forward slash failed\n    echo(replace_regex(\"/path/to/file.txt\", \"/\", \"#\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nmath_floor__2_v0() {\n    local number_1=\"${1}\"\n    ret_math_floor2_v0=\"$(awk '{printf \"%d\", ($1 < 0 ? int($1) - 1 : int($1))}' <<< \"${number_1}\")\"\n    return 0\n}\n\n# Output\n# 1\n# -2\nmath_floor__2_v0 1.9\nret_math_floor2_v0__8_10=\"${ret_math_floor2_v0}\"\necho \"${ret_math_floor2_v0__8_10}\"\nmath_floor__2_v0 -1.1\nret_math_floor2_v0__9_10=\"${ret_math_floor2_v0}\"\necho \"${ret_math_floor2_v0__9_10}\"", "output": "import * from \"std/math\"\n\n// Output\n// 1\n// -2\n\nmain {\n    echo(math_floor(1.9))\n    echo(math_floor(-1.1))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_var_test__120_v0() {\n    local name_4=\"${1}\"\n    [[ ! -z ${!name_4+z} ]]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_var_test120_v0=0\n        return 0\n    fi\n    ret_env_var_test120_v0=1\n    return 0\n}\n\ntest_var_isset=\"test\"\n__status=$?\nenv_var_test__120_v0 \"test_var_isset\"\nret_env_var_test120_v0__5_8=\"${ret_env_var_test120_v0}\"\nif [ \"${ret_env_var_test120_v0__5_8}\" != 0 ]; then\n    echo \"Succeeded\"\nfi\nenv_var_test__120_v0 \"test_var_isset2\"\nret_env_var_test120_v0__9_8=\"${ret_env_var_test120_v0}\"\nif [ \"${ret_env_var_test120_v0__9_8}\" != 0 ]; then\n    echo \"test_var_isset2\"\nfi", "output": "import * from \"std/env\"\n\nmain {\n    trust $ test_var_isset=\"test\" $\n    if env_var_test(\"test_var_isset\") {\n        echo(\"Succeeded\")\n    }\n\n    if env_var_test(\"test_var_isset2\") {\n        echo(\"test_var_isset2\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\n# Output\n# Not Found\narray_0=(\"foo\" \"bar\" \"baz\")\narray_contains__2_v0 array_0[@] \"oo ba\"\nret_array_contains2_v0__8_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__8_8}\" != 0 ]; then\n    echo \"Found\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\n// Output\n// Not Found\n\nmain {\n    const array = [\"foo\", \"bar\", \"baz\"]\n    if array_contains(array, \"oo ba\") {\n        echo(\"Found\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_229=(\"${!1}\")\n    local value_230=\"${2}\"\n    index_232=0;\n    for element_231 in \"${array_229[@]}\"; do\n        if [ \"$([ \"_${value_230}\" != \"_${element_231}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_232}\"\n            return 0\n        fi\n        (( index_232++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_227=(\"${!1}\")\n    local value_228=\"${2}\"\n    array_find__0_v0 array_227[@] \"${value_228}\"\n    local result_233=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_233 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_191=0\n    local minor_192=0\n    local patch_193=0\n    major_191=${BASH_VERSINFO[0]}\n        minor_192=${BASH_VERSINFO[1]}\n        patch_193=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_191}\" \"${minor_192}\" \"${patch_193}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_187=\"${1}\"\n    local search_188=\"${2}\"\n    local replace_189=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_190=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_190=\"${source_187//\"${search_188}\"/\"${replace_189}\"}\"\n        __status=$?\n    else\n        result_190=\"${source_187//\"${search_188}\"/${replace_189}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_190}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_182=\"${1}\"\n    local search_183=\"${2}\"\n    local replace_text_184=\"${3}\"\n    local extended_185=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_186=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_183}\" \"/\" \"\\\\/\"\n    search_183=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_184}\" \"/\" \"\\\\/\"\n    replace_text_184=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_186 == __SED_VERSION_GNU_1 )) || $(( sed_version_186 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_183}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_183=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_185}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_186 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_186 == __SED_VERSION_GNU_1 )) || $(( sed_version_186 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_183}\" \"\\\\|\" \"|\"\n            search_183=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_199=\"${1}\"\n    local delimiter_200=\"${2}\"\n    local result_201=()\n    IFS=\"${delimiter_200}\" read -rd '' -a result_201 < <(printf %s \"$text_199\")\n    __status=$?\n    ret_split29_v0=(\"${result_201[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_196=(\"${!1}\")\n    local delimiter_197=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_197}\" ; printf \"%s\n\" \"${list_196[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_181=\"${1}\"\n    replace_regex__28_v0 \"${path_181}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_179=(\"${!1}\")\n    local combined_180=\"\"\n    local __length_9=(\"${paths_179[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_179[0]}\"\n        combined_180=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_194=()\n        for item_195 in \"${paths_179[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_195}\"\n            item_195=\"${ret_escape_non_glob_chars76_v0}\"\n            items_194+=(\"${item_195}\")\n        done\n        join__32_v0 items_194[@] \" \"\n        combined_180=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_180}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_198=\"${command_12}\"\n    split__29_v0 \"${files_198}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_224=(\"${!1}\")\n    local expected_225=(\"${!2}\")\n    local __length_13=(\"${actual_224[@]}\")\n    local __length_14=(\"${expected_225[@]}\")\n    if [ \"$(( ${#__length_13[@]} != ${#__length_14[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_226 in \"${expected_225[@]}\"; do\n        array_contains__2_v0 actual_224[@] \"${file_226}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\ncd \"${tmpdir_17}\" || exit\nexpected_18=(\"file.txt\" \"file1.txt\" \"file2.txt\" \"file99.txt\" \"other.csv\")\narray_17=(\"missing*\" \"file*.txt\" \"other*.csv\")\nfile_glob_all__77_v0 array_17[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_202=(\"${ret_file_glob_all77_v0[@]}\")\ncompare__129_v0 actual_202[@] expected_18[@]\nret_compare129_v0__40_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__40_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_202[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n    cd(tmpdir)\n\n    const expected = [\n        \"file.txt\",\n        \"file1.txt\",\n        \"file2.txt\",\n        \"file99.txt\",\n        \"other.csv\",\n    ]\n    const actual = file_glob_all([\"missing*\", \"file*.txt\", \"other*.csv\"]) failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_24=\"${1}\"\n    [ -f \"${path_24}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nsymlink_create__46_v0() {\n    local origin_22=\"${1}\"\n    local destination_23=\"${2}\"\n    file_exists__42_v0 \"${origin_22}\"\n    local ret_file_exists42_v0__71_8=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__71_8}\" != 0 ]; then\n        ln -fs \"${origin_22}\" \"${destination_23}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_symlink_create46_v0=''\n            return \"${__status}\"\n        fi\n        ret_symlink_create46_v0=''\n        return 0\n    fi\n    echo \"The file ${origin_22} doesn't exist\"'!'\"\"\n    ret_symlink_create46_v0=''\n    return 1\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\n# Output\n# Succeeded\n# Succeeded\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/amber-symbolic\"\nsymlink_create__46_v0 \"${tmpdir_17}/amber-symbolic\" \"${tmpdir_17}/amber-symbolic-link\"\n__status=$?\nif [ \"$(( __status == 0 ))\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"failed\"\nfi\ntouch \"${tmpdir_17}/amber-symbolic\"\ntouch \"${tmpdir_17}/amber-symbolic-link\"\nsymlink_create__46_v0 \"${tmpdir_17}/amber-symbolic\" \"${tmpdir_17}/amber-symbolic-link\"\n__status=$?\nif [ \"$(( __status == 0 ))\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"failed\"\nfi", "output": "import { symlink_create, temp_dir_create } from \"std/fs\"\n\n// Output\n// Succeeded\n// Succeeded\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    touch(\"{tmpdir}/amber-symbolic\")\n    trust symlink_create(\"{tmpdir}/amber-symbolic\", \"{tmpdir}/amber-symbolic-link\")\n    if status == 0 {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"failed\")\n    }\n    touch(\"{tmpdir}/amber-symbolic\")\n    touch(\"{tmpdir}/amber-symbolic-link\")\n    trust symlink_create(\"{tmpdir}/amber-symbolic\", \"{tmpdir}/amber-symbolic-link\")\n    if status == 0 {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"failed\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\narray_find__71_v0() {\n    local array_34=(\"${!1}\")\n    local value_35=\"${2}\"\n    index_37=0;\n    for element_36 in \"${array_34[@]}\"; do\n        if [ \"$([ \"_${value_35}\" != \"_${element_36}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find71_v0=\"${index_37}\"\n            return 0\n        fi\n        (( index_37++ )) || true\n    done\n    ret_array_find71_v0=-1\n    return 0\n}\n\nprintf__131_v0() {\n    local format_41=\"${1}\"\n    local args_42=(\"${!2}\")\n    args_42=(\"${format_41}\" \"${args_42[@]}\")\n    printf \"${args_42[@]}\"\n}\n\necho_colored__137_v0() {\n    local message_29=\"${1}\"\n    local color_30=\"${2}\"\n    local color_code_31=0\n        # https://en.wikipedia.org/wiki/ANSI_escape_code#3-bit_and_4-bit\n        local colors_name_32=(\"black\" \"red\" \"green\" \"yellow\" \"orange\" \"blue\" \"purple\" \"cyan\" \"gray\" \"white\")\n        local colors_code_33=(30 31 32 93 33 34 35 36 37 97)\n        array_find__71_v0 colors_name_32[@] \"${color_30}\"\n        local color_index_38=\"${ret_array_find71_v0}\"\n        if [ \"$(( color_index_38 == -1 ))\" != 0 ]; then\n            echo_error__141_v0 \"Invalid color name provided\" 1\n        fi\n        color_code_31=\"${colors_code_33[${color_index_38}]}\"\n    local array_2=(\"${message_29}\")\n    printf__131_v0 \"\\\\x1b[${color_code_31}m%s\\\\x1b[0m\n\" array_2[@]\n}\n\necho_colored__137_v1() {\n    local message_43=\"${1}\"\n    local color_44=\"${2}\"\n    local color_code_45=0\n        color_code_45=\"${color_44}\"\n    local array_3=(\"${message_43}\")\n    printf__131_v0 \"\\\\x1b[${color_code_45}m%s\\\\x1b[0m\n\" array_3[@]\n}\n\necho_error__141_v0() {\n    local message_39=\"${1}\"\n    local exit_code_40=\"${2}\"\n    local array_4=(\"${message_39}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;41m%s\\\\x1b[0m\n\" array_4[@]\n    if [ \"$(( exit_code_40 > 0 ))\" != 0 ]; then\n        exit \"${exit_code_40}\"\n    fi\n}\n\n# Output\n# \u001b[33mHello Amber!\u001b[0m\n# \u001b[33mHello Amber!\u001b[0m\necho_colored__137_v0 \"Hello Amber\"'!'\"\" \"orange\"\necho_colored__137_v1 \"Hello Amber\"'!'\"\" 33", "output": "import * from \"std/env\"\n\n// Output\n// \u001b[33mHello Amber!\u001b[0m\n// \u001b[33mHello Amber!\u001b[0m\nmain {\n    echo_colored(\"Hello Amber!\", \"orange\")\n    echo_colored(\"Hello Amber!\", 33)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\ndir_exists__41_v0() {\n    local path_19=\"${1}\"\n    [ -d \"${path_19}\" ]\n    __status=$?\n    ret_dir_exists41_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ndir_exists__41_v0 \"${tmpdir_17}\"\nret_dir_exists41_v0__5_8=\"${ret_dir_exists41_v0}\"\nif [ \"${ret_dir_exists41_v0__5_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true)?\n    if dir_exists(tmpdir) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nlpad__28_v0() {\n    local text_8=\"${1}\"\n    local pad_9=\"${2}\"\n    local length_10=\"${3}\"\n    local __length_0=\"${text_8}\"\n    if [ \"$(( length_10 <= ${#__length_0} ))\" != 0 ]; then\n        ret_lpad28_v0=\"${text_8}\"\n        return 0\n    fi\n    local __length_1=\"${text_8}\"\n    local pad_len_11=\"$(( length_10 - ${#__length_1} ))\"\n    local padding_12=\"\"\n    printf -v padding_12 \"%${pad_len_11}s\" \"\"\n    padding_12=\"${padding_12// /${pad_9}}\"\n    ret_lpad28_v0=\"${padding_12}\"\"${text_8}\"\n    return 0\n}\n\n# Output\n# bba\n# aaa\nlpad__28_v0 \"a\" \"b\" 3\nret_lpad28_v0__8_10=\"${ret_lpad28_v0}\"\nprintf '%s\\n' \"${ret_lpad28_v0__8_10}\"\nlpad__28_v0 \"aaa\" \"b\" 3\nret_lpad28_v0__9_10=\"${ret_lpad28_v0}\"\nprintf '%s\\n' \"${ret_lpad28_v0__9_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// bba \n// aaa\n\nmain {\n    echo(lpad(\"a\", \"b\", 3))\n    echo(lpad(\"aaa\", \"b\", 3))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v0 0 1\narray_7=(\"${ret_array_filled9_v0[@]}\")\narray_3=()\nif [ \"$(\n    (( ${#array_7[@]} != ${#array_3[@]} )) && echo 0 && exit\n    for (( i=0; i<${#array_7[@]}; i++ )); do [[ \"${array_7[i]}\" != \"${array_3[i]}\" ]] && echo 0 && exit; done\n    echo 1\n)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Failed\"\nfi", "output": "import { array_filled } from \"std/array\"\n\nmain {\n    const array = array_filled(0, true)\n    if array == [Bool]:\n        echo(\"Succeeded\")\n    else:\n        echo(\"Failed\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_remove_at__5_v0() {\n    local array_5=(\"${1}\")\n    local index_6=\"${2}\"\n    local offset_7=\"$(( index_6 + 1 ))\"\n    eval \"local array_5_deref_15=(\\\"\\${${array_5[0]}[@]}\\\")\"\n    local __length_0=(\"${array_5_deref_15[@]}\")\n    local length_8=\"${#__length_0[@]}\"\n    local slice_upper_1=\"${index_6}\"\n    local slice_offset_2=0\n    local slice_offset_2=$((${slice_offset_2} > 0 ? ${slice_offset_2} : 0))\n    local slice_length_3\n    slice_length_3=\"$(echo \"${slice_upper_1}\" '-' \"${slice_offset_2}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_3=$((${slice_length_3} > 0 ? ${slice_length_3} : 0))\n    local slice_upper_4=\"${length_8}\"\n    local slice_offset_5=\"${offset_7}\"\n    local slice_offset_5=$((${slice_offset_5} > 0 ? ${slice_offset_5} : 0))\n    local slice_length_6\n    slice_length_6=\"$(echo \"${slice_upper_4}\" '-' \"${slice_offset_5}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_6=$((${slice_length_6} > 0 ? ${slice_length_6} : 0))\n    eval \"local array_5_deref_16=(\\\"\\${${array_5[0]}[@]:\\${slice_offset_2}:\\${slice_length_3}}\\\")\"\n    eval \"local array_5_deref_17=(\\\"\\${${array_5[0]}[@]:\\${slice_offset_5}:\\${slice_length_6}}\\\")\"\n    eval \"${array_5}=(\\\"\\${array_5_deref_16[@]}\\\" \\\"\\${array_5_deref_17[@]}\\\")\"\n}\n\n# Output\n# Array before 1: (4) [zero one two three]\n# Array after 1: (3) [zero two three]\n# Array after 2: (2) [zero three]\n# Array after 3: (1) [zero]\n# Array after 4: (1) [zero]\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\n__length_10=(\"${numbers_0[@]}\")\necho \"Array before 1: (${#__length_10[*]}) [${numbers_0[*]}]\"\narray_remove_at__5_v0 \"numbers_0\" 1\n__length_11=(\"${numbers_0[@]}\")\necho \"Array after 1: (${#__length_11[*]}) [${numbers_0[*]}]\"\narray_remove_at__5_v0 \"numbers_0\" 1\n__length_12=(\"${numbers_0[@]}\")\necho \"Array after 2: (${#__length_12[*]}) [${numbers_0[*]}]\"\narray_remove_at__5_v0 \"numbers_0\" 1\n__length_13=(\"${numbers_0[@]}\")\necho \"Array after 3: (${#__length_13[*]}) [${numbers_0[*]}]\"\narray_remove_at__5_v0 \"numbers_0\" 1\n__length_14=(\"${numbers_0[@]}\")\necho \"Array after 4: (${#__length_14[*]}) [${numbers_0[*]}]\"", "output": "import { array_remove_at } from \"std/array\"\n\n// Output\n// Array before 1: (4) [zero one two three]\n// Array after 1: (3) [zero two three]\n// Array after 2: (2) [zero three]\n// Array after 3: (1) [zero]\n// Array after 4: (1) [zero]\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    echo(\"Array before 1: ({len(numbers)}) [{numbers}]\")\n    array_remove_at(numbers, 1)\n    echo(\"Array after 1: ({len(numbers)}) [{numbers}]\")\n    array_remove_at(numbers, 1)\n    echo(\"Array after 2: ({len(numbers)}) [{numbers}]\")\n    array_remove_at(numbers, 1)\n    echo(\"Array after 3: ({len(numbers)}) [{numbers}]\")\n    array_remove_at(numbers, 1)\n    echo(\"Array after 4: ({len(numbers)}) [{numbers}]\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsplit__5_v0() {\n    local text_6=\"${1}\"\n    local delimiter_7=\"${2}\"\n    local result_8=()\n    IFS=\"${delimiter_7}\" read -rd '' -a result_8 < <(printf %s \"$text_6\")\n    ret_split5_v0=(\"${result_8[@]}\")\n    return 0\n}\n\n# Output\n# apple ban\n# ana cherry\nsplit__5_v0 \"apple,ban\nana,cherry\" \",\"\narray_9=(\"${ret_split5_v0[@]}\")\nprintf '%s\\n' \"${array_9[*]}\"", "output": "import * from \"std/text\"\n\n// Output\n// apple ban\n// ana cherry\n\nmain {\n    const array = split(\"apple,ban\\nana,cherry\", \",\")\n    echo(array)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_last__4_v0() {\n    local array_11=(\"${!1}\")\n    local __length_0=(\"${array_11[@]}\")\n    local index_12=\"$(( ${#__length_0[@]} - 1 ))\"\n    if [ \"$(( index_12 < 0 ))\" != 0 ]; then\n        ret_array_last4_v0=''\n        return 1\n    fi\n    ret_array_last4_v0=\"${array_11[${index_12}]}\"\n    return 0\n}\n\n# Output\n# Last of numbers: \"three\" (4) [zero one two three]\n# Last of empty array does not exist\ntest_last__13_v0() {\n    local label_9=\"${1}\"\n    local data_10=(\"${!2}\")\n    array_last__4_v0 data_10[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        echo \"Last of empty array does not exist\"\n        ret_test_last13_v0=''\n        return 0\n    fi\n    local value_13=\"${ret_array_last4_v0}\"\n    local __length_1=(\"${data_10[@]}\")\n    echo \"Last of ${label_9}: \\\"${value_13}\\\" (${#__length_1[*]}) [${data_10[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nempty_1=()\ntest_last__13_v0 \"numbers\" numbers_0[@]\ntest_last__13_v0 \"empty\" empty_1[@]", "output": "import { array_last } from \"std/array\"\n\n// Output\n// Last of numbers: \"three\" (4) [zero one two three]\n// Last of empty array does not exist\n\nfun test_last(label: Text, data: [Text]): Null {\n    const value = array_last(data) failed {\n        echo(\"Last of empty array does not exist\")\n        return null\n    }\n    echo(\"Last of {label}: \\\"{value}\\\" ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    const empty = [Text]\n    test_last(\"numbers\", numbers)\n    test_last(\"empty\", empty)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nrpad__29_v0() {\n    local text_8=\"${1}\"\n    local pad_9=\"${2}\"\n    local length_10=\"${3}\"\n    local __length_0=\"${text_8}\"\n    if [ \"$(( length_10 <= ${#__length_0} ))\" != 0 ]; then\n        ret_rpad29_v0=\"${text_8}\"\n        return 0\n    fi\n    local __length_1=\"${text_8}\"\n    local pad_len_11=\"$(( length_10 - ${#__length_1} ))\"\n    local padding_12=\"\"\n    printf -v padding_12 \"%${pad_len_11}s\" \"\"\n    padding_12=\"${padding_12// /${pad_9}}\"\n    ret_rpad29_v0=\"${text_8}\"\"${padding_12}\"\n    return 0\n}\n\n# Output\n# abb\n# aaa\nrpad__29_v0 \"a\" \"b\" 3\nret_rpad29_v0__8_10=\"${ret_rpad29_v0}\"\nprintf '%s\\n' \"${ret_rpad29_v0__8_10}\"\nrpad__29_v0 \"aaa\" \"b\" 3\nret_rpad29_v0__9_10=\"${ret_rpad29_v0}\"\nprintf '%s\\n' \"${ret_rpad29_v0__9_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// abb \n// aaa\n\nmain {\n    echo(rpad(\"a\", \"b\", 3))\n    echo(rpad(\"aaa\", \"b\", 3))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nmath_abs__4_v0() {\n    local number_1=\"${1}\"\n    if [ \"$(( number_1 < 0 ))\" != 0 ]; then\n        ret_math_abs4_v0=\"$(( - number_1 ))\"\n        return 0\n    fi\n    ret_math_abs4_v0=\"${number_1}\"\n    return 0\n}\n\nmath_abs__4_v1() {\n    local number_2=\"${1}\"\n    if [ \"$(echo \"${number_2}\" '<' 0 | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\" != 0 ]; then\n        ret_math_abs4_v1=\"$(echo  '-' \"${number_2}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n        return 0\n    fi\n    ret_math_abs4_v1=\"${number_2}\"\n    return 0\n}\n\n# Output\n# 1\n# 1\n# 1.2\nmath_abs__4_v0 1\nret_math_abs4_v0__9_10=\"${ret_math_abs4_v0}\"\necho \"${ret_math_abs4_v0__9_10}\"\nmath_abs__4_v0 -1\nret_math_abs4_v0__10_10=\"${ret_math_abs4_v0}\"\necho \"${ret_math_abs4_v0__10_10}\"\nmath_abs__4_v1 1.2\nret_math_abs4_v1__11_10=\"${ret_math_abs4_v1}\"\necho \"${ret_math_abs4_v1__11_10}\"", "output": "import * from \"std/math\"\n\n// Output \n// 1\n// 1\n// 1.2\n\nmain {\n    echo(math_abs(1))\n    echo(math_abs(-1))\n    echo(math_abs(1.2))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_pop__7_v0() {\n    local array_15=(\"${1}\")\n    eval \"local array_15_deref_8=(\\\"\\${${array_15[0]}[@]}\\\")\"\n    local __length_0=(\"${array_15_deref_8[@]}\")\n    local length_16=\"${#__length_0[@]}\"\n    local index_17=\"$(( length_16 - 1 ))\"\n    if [ \"$(( index_17 < 0 ))\" != 0 ]; then\n        ret_array_pop7_v0=''\n        return 1\n    fi\n    eval \"local array_15_deref_9=\\\"\\${${array_15[0]}[${index_17}]}\\\"\"\n    local element_18=\"${array_15_deref_9}\"\n    local slice_upper_1=\"${index_17}\"\n    local slice_offset_2=0\n    local slice_offset_2=$((${slice_offset_2} > 0 ? ${slice_offset_2} : 0))\n    local slice_length_3\n    slice_length_3=\"$(echo \"${slice_upper_1}\" '-' \"${slice_offset_2}\" | bc -l | sed '/\\./ s/\\.\\{0,1\\}0\\{1,\\}$//')\"\n    local slice_length_3=$((${slice_length_3} > 0 ? ${slice_length_3} : 0))\n    eval \"local array_15_deref_10=(\\\"\\${${array_15[0]}[@]:\\${slice_offset_2}:\\${slice_length_3}}\\\")\"\n    eval \"${array_15}=(\\\"\\${array_15_deref_10[@]}\\\")\"\n    ret_array_pop7_v0=\"${element_18}\"\n    return 0\n}\n\n# Output\n# Popped from numbers: \"three\" (3) [zero one two]\n# Cannot pop from empty array\ntest_pop__13_v0() {\n    local label_13=\"${1}\"\n    local data_14=(\"${!2}\")\n    array_pop__7_v0 \"data_14\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        echo \"Cannot pop from empty array\"\n        ret_test_pop13_v0=''\n        return 0\n    fi\n    local value_19=\"${ret_array_pop7_v0}\"\n    local __length_4=(\"${data_14[@]}\")\n    echo \"Popped from ${label_13}: \\\"${value_19}\\\" (${#__length_4[*]}) [${data_14[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nempty_1=()\ntest_pop__13_v0 \"numbers\" numbers_0[@]\ntest_pop__13_v0 \"empty\" empty_1[@]", "output": "import { array_pop } from \"std/array\"\n\n// Output\n// Popped from numbers: \"three\" (3) [zero one two]\n// Cannot pop from empty array\n\nfun test_pop(label: Text, data: [Text]): Null {\n    const value = array_pop(data) failed {\n        echo(\"Cannot pop from empty array\")\n        return null\n    }\n    echo(\"Popped from {label}: \\\"{value}\\\" ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    const empty = [Text]\n    test_pop(\"numbers\", numbers)\n    test_pop(\"empty\", empty)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\n# Output\n# Index of \"zero\": 0\n# Index of \"one\": 1\n# Index of \"two\": 2\n# Index of \"three\": 3\n# Index of \"four\": -1\ntest_index__13_v0() {\n    local data_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 data_12[@] \"${value_13}\"\n    local index_18=\"${ret_array_find0_v0}\"\n    echo \"Index of \\\"${value_13}\\\": ${index_18}\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\" \"two\" \"one\" \"zero\")\ntest_index__13_v0 numbers_0[@] \"zero\"\ntest_index__13_v0 numbers_0[@] \"one\"\ntest_index__13_v0 numbers_0[@] \"two\"\ntest_index__13_v0 numbers_0[@] \"three\"\ntest_index__13_v0 numbers_0[@] \"four\"", "output": "import { array_find } from \"std/array\"\n\n// Output\n// Index of \"zero\": 0\n// Index of \"one\": 1\n// Index of \"two\": 2\n// Index of \"three\": 3\n// Index of \"four\": -1\n\nfun test_index(data: [Text], value: Text): Null {\n    const index = array_find(data, value)\n    echo(\"Index of \\\"{value}\\\": {index}\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\", \"two\", \"one\", \"zero\"]\n    test_index(numbers, \"zero\")\n    test_index(numbers, \"one\")\n    test_index(numbers, \"two\")\n    test_index(numbers, \"three\")\n    test_index(numbers, \"four\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nslice__25_v0() {\n    local text_7=\"${1}\"\n    local index_8=\"${2}\"\n    local length_9=\"${3}\"\n    local result_10=\"\"\n    if [ \"$(( length_9 == 0 ))\" != 0 ]; then\n        local __length_0=\"${text_7}\"\n        length_9=\"$(( ${#__length_0} - index_8 ))\"\n    fi\n    if [ \"$(( length_9 <= 0 ))\" != 0 ]; then\n        ret_slice25_v0=\"${result_10}\"\n        return 0\n    fi\n    result_10=\"${text_7: ${index_8}: ${length_9}}\"\n    ret_slice25_v0=\"${result_10}\"\n    return 0\n}\n\n# Output\n# world\n# world\n# world\nslice__25_v0 \"hello world\" 6 5\nret_slice25_v0__9_10=\"${ret_slice25_v0}\"\nprintf '%s\\n' \"${ret_slice25_v0__9_10}\"\nslice__25_v0 \"hello world\" 6 0\nret_slice25_v0__10_10=\"${ret_slice25_v0}\"\nprintf '%s\\n' \"${ret_slice25_v0__10_10}\"\nslice__25_v0 \"hello world\" -5 5\nret_slice25_v0__11_10=\"${ret_slice25_v0}\"\nprintf '%s\\n' \"${ret_slice25_v0__11_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// world\n// world\n// world\n\nmain {\n    echo(slice(\"hello world\", 6, 5))\n    echo(slice(\"hello world\", 6))\n    echo(slice(\"hello world\", -5, 5))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_read__43_v0() {\n    local path_23=\"${1}\"\n    local command_0\n    command_0=\"$(< \"${path_23}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_read43_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_read43_v0=\"${command_0}\"\n    return 0\n}\n\nfile_append__45_v0() {\n    local path_20=\"${1}\"\n    local content_21=\"${2}\"\n    local command_1\n    command_1=\"$(printf '%s\n' \"${content_21}\" >> \"${path_20}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_append45_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_append45_v0=\"${command_1}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    else\n        local command_3\n        command_3=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_3}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\n# Output\n# Succeeded\n# 2\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\ntouch \"test.txt\"\nfile_append__45_v0 \"test.txt\" \"Succeeded\"\n__status=$?\nfile_read__43_v0 \"test.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"Failed\"\nfi\nf_24=\"${ret_file_read43_v0}\"\nprintf '%s\\n' \"${f_24}\"\ntouch \"dash.txt\"\nfile_append__45_v0 \"dash.txt\" \"-n\"\n__status=$?\nfile_read__43_v0 \"dash.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"Failed\"\nfi\nd_25=\"${ret_file_read43_v0}\"\n__length_5=\"${d_25}\"\nprintf '%s\\n' \"${#__length_5}\"", "output": "// Output\n// Succeeded\n// 2\n\nimport * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    touch(\"test.txt\")\n    trust file_append(\"test.txt\", \"Succeeded\")\n    const f = file_read(\"test.txt\") failed {\n        echo(\"Failed\")\n    }\n    echo(f)\n\n    touch(\"dash.txt\")\n    trust file_append(\"dash.txt\", \"-n\")\n    const d = file_read(\"dash.txt\") failed {\n        echo(\"Failed\")\n    }\n    echo(len(d))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ncount_chars__33_v0() {\n    local text_4=\"${1}\"\n    ret_count_chars33_v0=\"$(printf \"%s\" \"${text_4}\" | wc -m | tr -d ' ')\"\n    return 0\n}\n\n# Output\n# 5\n# 0\n# 11\ncount_chars__33_v0 \"hello\"\nret_count_chars33_v0__9_10=\"${ret_count_chars33_v0}\"\necho \"${ret_count_chars33_v0__9_10}\"\ncount_chars__33_v0 \"\"\nret_count_chars33_v0__10_10=\"${ret_count_chars33_v0}\"\necho \"${ret_count_chars33_v0__10_10}\"\ncount_chars__33_v0 \"hello world\"\nret_count_chars33_v0__11_10=\"${ret_count_chars33_v0}\"\necho \"${ret_count_chars33_v0__11_10}\"", "output": "import { count_chars } from \"std/text\"\n\n// Output\n// 5\n// 0\n// 11\n\nmain {\n    echo(count_chars(\"hello\"))\n    echo(count_chars(\"\"))\n    echo(count_chars(\"hello world\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# All dates are internally stored as milliseconds since the Epoch (1970-01-01 00:00 UTC).\ndate_from_posix__1_v0() {\n    local date_4=\"${1}\"\n    local format_5=\"${2}\"\n    local utc_6=\"${3}\"\n    local utc_flag_7\n    utc_flag_7=\"$(if [ \"${utc_6}\" != 0 ]; then echo \"-u\"; else echo \"\"; fi)\"\n    # Case if this is a GNU date command\n    local command_1\n    command_1=\"$(date ${utc_flag_7} -d \"$(date -d \"${date_4}\" +\"${format_5}\" 2>/dev/null)\" +%s 2>/dev/null)\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        # Case if this is a BSD date command\n        local command_0\n        command_0=\"$(date ${utc_flag_7} -j -f \"${format_5}\" \"${date_4}\" +%s)\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_date_from_posix1_v0=''\n            return \"${__status}\"\n        fi\n        ret_date_from_posix1_v0=\"${command_0}\"\n        return 0\n    fi\n    ret_date_from_posix1_v0=\"${command_1}\"\n    return 0\n}\n\ndate_from_posix__1_v0 \"2000-01-01 00:00:00\" \"%F %T\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_from_posix1_v0__4_8=\"${ret_date_from_posix1_v0}\"\ndate_from_posix__1_v0 \"2100-01-01 00:00:00\" \"%F %T\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_from_posix1_v0__4_50=\"${ret_date_from_posix1_v0}\"\nif [ \"$(( ret_date_from_posix1_v0__4_8 < ret_date_from_posix1_v0__4_50 ))\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import * from \"std/date\"\n\nmain {\n    if date_from_posix(\"2000-01-01 00:00:00\")? < date_from_posix(\"2100-01-01 00:00:00\")? {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\ndir_exists__41_v0() {\n    local path_28=\"${1}\"\n    [ -d \"${path_28}\" ]\n    __status=$?\n    ret_dir_exists41_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_27=\"${1}\"\n    [ -f \"${path_27}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nfile_chown__51_v0() {\n    local path_25=\"${1}\"\n    local user_26=\"${2}\"\n    file_exists__42_v0 \"${path_25}\"\n    local ret_file_exists42_v0__171_8=\"${ret_file_exists42_v0}\"\n    dir_exists__41_v0 \"${path_25}\"\n    local ret_dir_exists41_v0__171_29=\"${ret_dir_exists41_v0}\"\n    if [ \"$(( ret_file_exists42_v0__171_8 || ret_dir_exists41_v0__171_29 ))\" != 0 ]; then\n        chown -R \"${user_26}\" \"${path_25}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_file_chown51_v0=''\n            return \"${__status}\"\n        fi\n        ret_file_chown51_v0=''\n        return 0\n    fi\n    echo \"The file ${path_25} doesn't exist\"'!'\"\"\n    ret_file_chown51_v0=''\n    return 1\n}\n\n# We use `whoami` to get the running user to assign again the same user as permission\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"It wasn't possible to create the folder\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/amber-symbolic\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"It wasn't possible to create ${tmpdir_17}/amber-symbolic\"\nfi\ncommand_3=\"$(whoami)\"\n__status=$?\nowner_18=\"${command_3}\"\nfile_chown__51_v0 \"${tmpdir_17}/amber-symbolic\" \"${owner_18}\"\n__status=$?\nif [ \"$(( __status == 0 ))\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"File ${tmpdir_17}/amber-symbolic not exists\"\nfi", "output": "import { file_chown, temp_dir_create } from \"std/fs\"\n\n// We use `whoami` to get the running user to assign again the same user as permission\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true) failed {\n        echo(\"It wasn't possible to create the folder\")\n    }\n    $ touch \"{tmpdir}/amber-symbolic\" $ failed {\n        echo(\"It wasn't possible to create {tmpdir}/amber-symbolic\")\n    }\n    const owner = trust $ whoami $\n    trust file_chown(\"{tmpdir}/amber-symbolic\", owner)\n    if status == 0 {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"File {tmpdir}/amber-symbolic not exists\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntext_contains__17_v0() {\n    local source_5=\"${1}\"\n    local search_6=\"${2}\"\n    [[ \"${source_5}\" == *\"${search_6}\"* ]]\n    __status=$?\n    ret_text_contains17_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\ntext_contains__17_v0 \"Hello World\" \"World\"\nret_text_contains17_v0__3_4=\"${ret_text_contains17_v0}\"\nif [ \"${ret_text_contains17_v0__3_4}\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { text_contains } from \"std/text\"\n\nif text_contains(\"Hello World\", \"World\") {\n    echo(\"Succeeded\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\njoin__8_v0() {\n    local list_17=(\"${!1}\")\n    local delimiter_18=\"${2}\"\n    ret_join8_v0=\"$(IFS=\"${delimiter_18}\" ; printf \"%s\n\" \"${list_17[*]}\")\"\n    return 0\n}\n\nbash_version__142_v0() {\n    local major_6\n    major_6=\"$(printf \"%s\n\" \"${BASH_VERSINFO[0]}\")\"\n    local minor_7\n    minor_7=\"$(printf \"%s\n\" \"${BASH_VERSINFO[1]}\")\"\n    local patch_8\n    patch_8=\"$(printf \"%s\n\" \"${BASH_VERSINFO[2]}\")\"\n    ret_bash_version142_v0=(\"${major_6}\" \"${minor_7}\" \"${patch_8}\")\n    return 0\n}\n\nbash_version_to_text__163_v0() {\n    local arr_16=(\"${!1}\")\n    join__8_v0 arr_16[@] \" \"\n    ret_bash_version_to_text163_v0=\"${ret_join8_v0}\"\n    return 0\n}\n\nbash_version__142_v0 \nversion_9=(\"${ret_bash_version142_v0[@]}\")\nbash_verinfo_10=\"$(echo ${BASH_VERSINFO[@]:0:3})\"\nbash_version_to_text__163_v0 version_9[@]\nret_bash_version_to_text163_v0__13_24=\"${ret_bash_version_to_text163_v0}\"\nif [ \"$([ \"_${bash_verinfo_10}\" != \"_${ret_bash_version_to_text163_v0__13_24}\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Bash versions are not matching ${version_9[*]} vs ${bash_verinfo_10}\"\nfi", "output": "import { bash_version } from \"std/env\"\nimport { join } from \"std/text\"\n\n#[allow_absurd_cast]\nfun bash_version_to_text(arr: [Int]): Text {\n    return join(arr as [Text], \" \")\n}\n\nmain {\n    const version = bash_version()\n    const bash_verinfo = trust $ echo \\$\\{BASH_VERSINFO[@]:0:3} $\n\n    if bash_verinfo == bash_version_to_text(version) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Bash versions are not matching {version} vs {bash_verinfo}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nprintf__131_v0() {\n    local format_9=\"${1}\"\n    local args_10=(\"${!2}\")\n    args_10=(\"${format_9}\" \"${args_10[@]}\")\n    printf \"${args_10[@]}\"\n}\n\necho_info__138_v0() {\n    local message_8=\"${1}\"\n    local array_0=(\"${message_8}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;44m%s\\\\x1b[0m\n\" array_0[@]\n}\n\n# Output\n# \u001b[1;3;97;44mHello Amber!\u001b[0m\necho_info__138_v0 \"Hello Amber\"'!'\"\"", "output": "import * from \"std/env\"\n\n// Output\n// \u001b[1;3;97;44mHello Amber!\u001b[0m\n\nmain {\n    echo_info(\"Hello Amber!\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\n# Output\n# Not Found\narray_0=()\narray_contains__2_v0 array_0[@] \" \"\nret_array_contains2_v0__8_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__8_8}\" != 0 ]; then\n    echo \"Found\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\n// Output\n// Not Found\n\nmain {\n    const array = [Text]\n    if array_contains(array, \" \") {\n        echo(\"Found\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v0 0 \"\"\narray_7=(\"${ret_array_filled9_v0[@]}\")\narray_3=()\nif [ \"$(\n    (( ${#array_7[@]} != ${#array_3[@]} )) && echo 0 && exit\n    for (( i=0; i<${#array_7[@]}; i++ )); do [[ \"${array_7[i]}\" != \"${array_3[i]}\" ]] && echo 0 && exit; done\n    echo 1\n)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Failed\"\nfi", "output": "import { array_filled } from \"std/array\"\n\nmain {\n    const array = array_filled(0, \"\")\n    if array == [Text]:\n        echo(\"Succeeded\")\n    else:\n        echo(\"Failed\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_first__3_v0() {\n    local array_9=(\"${!1}\")\n    local __length_0=(\"${array_9[@]}\")\n    if [ \"$(( ${#__length_0[@]} == 0 ))\" != 0 ]; then\n        ret_array_first3_v0=''\n        return 1\n    fi\n    ret_array_first3_v0=\"${array_9[0]}\"\n    return 0\n}\n\n# Output\n# First of numbers: \"zero\" (4) [zero one two three]\n# First of empty array does not exist\ntest_first__13_v0() {\n    local label_7=\"${1}\"\n    local data_8=(\"${!2}\")\n    array_first__3_v0 data_8[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        echo \"First of empty array does not exist\"\n        ret_test_first13_v0=''\n        return 0\n    fi\n    local value_10=\"${ret_array_first3_v0}\"\n    local __length_1=(\"${data_8[@]}\")\n    echo \"First of ${label_7}: \\\"${value_10}\\\" (${#__length_1[*]}) [${data_8[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\")\nempty_1=()\ntest_first__13_v0 \"numbers\" numbers_0[@]\ntest_first__13_v0 \"empty\" empty_1[@]", "output": "import { array_first } from \"std/array\"\n\n// Output\n// First of numbers: \"zero\" (4) [zero one two three]\n// First of empty array does not exist\n\nfun test_first(label: Text, data: [Text]): Null {\n    const value = array_first(data) failed {\n        echo(\"First of empty array does not exist\")\n        return null\n    }\n    echo(\"First of {label}: \\\"{value}\\\" ({len(data)}) [{data}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\"]\n    const empty = [Text]\n    test_first(\"numbers\", numbers)\n    test_first(\"empty\", empty)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ninput_hidden__127_v0() {\n    local prompt_20=\"${1}\"\n    read -s -p \"$prompt_20\" || read -s -p \"$prompt_20\" < /dev/tty\n    __status=$?\n    echo \"\" >&2\n    __status=$?\n    local command_2\n    command_2=\"$(printf '%s\n' $REPLY)\"\n    __status=$?\n    ret_input_hidden127_v0=\"${command_2}\"\n    return 0\n}\n\n# Output\n# Hello, Amber\ntemp_dir_create__49_v0 \"amber-input-test-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntest_file_18=\"${tmpdir_17}/test_input\"\necho \"Amber\" >> ${test_file_18}\n__status=$?\nexec 0< ${test_file_18}\n__status=$?\ninput_hidden__127_v0 \"Please enter your name:\"\nname_21=\"${ret_input_hidden127_v0}\"\necho \"Hello, \"\"${name_21}\"", "output": "import * from \"std/env\"\nimport { temp_dir_create } from \"std/fs\"\n\n// Output\n// Hello, Amber\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-input-test-XXXX\", true, true)?\n    const test_file = \"{tmpdir}/test_input\"\n    trust $ echo \"Amber\" >> {test_file} $\n    trust $ exec 0< {test_file} $\n    const name = input_hidden(\"Please enter your name:\")\n    echo(\"Hello, \" + name)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nreversed__22_v0() {\n    local text_4=\"${1}\"\n    ret_reversed22_v0=\"$(rev <<< \"${text_4}\")\"\n    return 0\n}\n\n# Output\n# dlrow olleh\n# E-\nreversed__22_v0 \"hello world\"\nret_reversed22_v0__8_10=\"${ret_reversed22_v0}\"\nprintf '%s\\n' \"${ret_reversed22_v0__8_10}\"\nreversed__22_v0 \"-E\"\nret_reversed22_v0__9_10=\"${ret_reversed22_v0}\"\nprintf '%s\\n' \"${ret_reversed22_v0__9_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// dlrow olleh\n// E-\n\nmain {\n    echo(reversed(\"hello world\"))\n    echo(reversed(\"-E\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v0 0 1\narray_7=(\"${ret_array_filled9_v0[@]}\")\narray_3=()\nif [ \"$(\n    (( ${#array_7[@]} != ${#array_3[@]} )) && echo 0 && exit\n    for (( i=0; i<${#array_7[@]}; i++ )); do [[ \"${array_7[i]}\" != \"${array_3[i]}\" ]] && echo 0 && exit; done\n    echo 1\n)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Failed\"\nfi", "output": "import { array_filled } from \"std/array\"\n\nmain {\n    const array = array_filled(0, 1)\n    if array == [Int]:\n        echo(\"Succeeded\")\n    else:\n        echo(\"Failed\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nshopt_disable__160_v0() {\n    local optname_5=\"${1}\"\n    local set_opt_6=\"${2}\"\n    if [ \"${set_opt_6}\" != 0 ]; then\n        shopt -qou \"${optname_5}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_shopt_disable160_v0=''\n            return \"${__status}\"\n        fi\n    else\n        shopt -qu \"${optname_5}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_shopt_disable160_v0=''\n            return \"${__status}\"\n        fi\n    fi\n}\n\n# Output\n# .\nshopt_disable__160_v0 \"dotglob\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\necho .\n__status=$?\nshopt_disable__160_v0 \"noglob\" 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi", "output": "import { shopt_disable } from \"std/env\"\n\n// Output\n// .\n\nmain {\n   shopt_disable(\"dotglob\")?\n   trust $ echo . $\n   shopt_disable(\"noglob\", true)?\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nlpad__28_v0() {\n    local text_17=\"${1}\"\n    local pad_18=\"${2}\"\n    local length_19=\"${3}\"\n    local __length_0=\"${text_17}\"\n    if [ \"$(( length_19 <= ${#__length_0} ))\" != 0 ]; then\n        ret_lpad28_v0=\"${text_17}\"\n        return 0\n    fi\n    local __length_1=\"${text_17}\"\n    local pad_len_20=\"$(( length_19 - ${#__length_1} ))\"\n    local padding_21=\"\"\n    printf -v padding_21 \"%${pad_len_20}s\" \"\"\n    padding_21=\"${padding_21// /${pad_18}}\"\n    ret_lpad28_v0=\"${padding_21}\"\"${text_17}\"\n    return 0\n}\n\nzfill__30_v0() {\n    local text_15=\"${1}\"\n    local length_16=\"${2}\"\n    lpad__28_v0 \"${text_15}\" \"0\" \"${length_16}\"\n    ret_zfill30_v0=\"${ret_lpad28_v0}\"\n    return 0\n}\n\n# Output\n# 001\n# 123\nzfill__30_v0 \"1\" 3\nret_zfill30_v0__8_10=\"${ret_zfill30_v0}\"\nprintf '%s\\n' \"${ret_zfill30_v0__8_10}\"\nzfill__30_v0 \"123\" 3\nret_zfill30_v0__9_10=\"${ret_zfill30_v0}\"\nprintf '%s\\n' \"${ret_zfill30_v0__9_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// 001 \n// 123\n\nmain {\n    echo(zfill(\"1\", 3))\n    echo(zfill(\"123\", 3))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nlowercase__12_v0() {\n    local text_4=\"${1}\"\n    ret_lowercase12_v0=\"$(tr '[:upper:]' '[:lower:]' <<< \"${text_4}\")\"\n    return 0\n}\n\n# Output\n# hello world\nlowercase__12_v0 \"HELLO WORLD\"\nret_lowercase12_v0__7_10=\"${ret_lowercase12_v0}\"\nprintf '%s\\n' \"${ret_lowercase12_v0__7_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// hello world\n\nmain {\n    echo(lowercase(\"HELLO WORLD\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsplit_chars__16_v0() {\n    local text_5=\"${1}\"\n    local chars_6=()\n    for ((i=0; i<${#text_5}; i++)); do\n        chars_6+=( \"${text_5:$i:1}\" );\n    done\n    ret_split_chars16_v0=(\"${chars_6[@]}\")\n    return 0\n}\n\n# Output\n# h e l l o\nsplit_chars__16_v0 \"hello\"\nret_split_chars16_v0__7_10=(\"${ret_split_chars16_v0[@]}\")\nprintf '%s\\n' \"${ret_split_chars16_v0__7_10[*]}\"", "output": "import * from \"std/text\"\n\n// Output\n// h e l l o\n\nmain {\n    echo(split_chars(\"hello\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsplit__5_v0() {\n    local text_6=\"${1}\"\n    local delimiter_7=\"${2}\"\n    local result_8=()\n    IFS=\"${delimiter_7}\" read -rd '' -a result_8 < <(printf %s \"$text_6\")\n    ret_split5_v0=(\"${result_8[@]}\")\n    return 0\n}\n\n# Output\n# banana\nsplit__5_v0 \"apple,banana,cherry\" \",\"\narray_9=(\"${ret_split5_v0[@]}\")\nprintf '%s\\n' \"${array_9[1]}\"", "output": "import * from \"std/text\"\n\n// Output\n// banana\n\nmain {\n    const array = split(\"apple,banana,cherry\", \",\")\n    echo(array[1])\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nprintf__131_v0() {\n    local format_9=\"${1}\"\n    local args_10=(\"${!2}\")\n    args_10=(\"${format_9}\" \"${args_10[@]}\")\n    printf \"${args_10[@]}\"\n}\n\necho_warning__140_v0() {\n    local message_8=\"${1}\"\n    local array_0=(\"${message_8}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;43m%s\\\\x1b[0m\n\" array_0[@]\n}\n\n# Output\n# \u001b[1;3;97;43mHello Amber!\u001b[0m\necho_warning__140_v0 \"Hello Amber\"'!'\"\"", "output": "import * from \"std/env\"\n\n// Output\n// \u001b[1;3;97;43mHello Amber!\u001b[0m\n\nmain {\n    echo_warning(\"Hello Amber!\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_19=\"${1}\"\n    [ -f \"${path_19}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/test.txt\"\nfile_exists__42_v0 \"${tmpdir_17}/test.txt\"\nret_file_exists42_v0__6_8=\"${ret_file_exists42_v0}\"\nif [ \"${ret_file_exists42_v0__6_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    touch(\"{tmpdir}/test.txt\")\n    if file_exists(\"{tmpdir}/test.txt\") {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\nexpected_18=(\"${tmpdir_17}/file1.txt\" \"${tmpdir_17}/file2.txt\")\nfile_glob__78_v0 \"${tmpdir_17}/file?.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__36_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__36_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n\n    const expected = [\n        \"{tmpdir}/file1.txt\",\n        \"{tmpdir}/file2.txt\",\n    ]\n    const actual = file_glob(\"{tmpdir}/file?.txt\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nprintf__131_v0() {\n    local format_9=\"${1}\"\n    local args_10=(\"${!2}\")\n    args_10=(\"${format_9}\" \"${args_10[@]}\")\n    printf \"${args_10[@]}\"\n}\n\necho_success__139_v0() {\n    local message_8=\"${1}\"\n    local array_0=(\"${message_8}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;42m%s\\\\x1b[0m\n\" array_0[@]\n}\n\n# Output\n# \u001b[1;3;97;42mHello Amber!\u001b[0m\necho_success__139_v0 \"Hello Amber\"'!'\"\"", "output": "import * from \"std/env\"\n\n// Output\n// \u001b[1;3;97;42mHello Amber!\u001b[0m\n\nmain {\n    echo_success(\"Hello Amber!\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsplit__5_v0() {\n    local text_11=\"${1}\"\n    local delimiter_12=\"${2}\"\n    local result_13=()\n    IFS=\"${delimiter_12}\" read -rd '' -a result_13 < <(printf %s \"$text_11\")\n    ret_split5_v0=(\"${result_13[@]}\")\n    return 0\n}\n\nsplit_lines__6_v0() {\n    local text_10=\"${1}\"\n    split__5_v0 \"${text_10}\" \"\n\"\n    ret_split_lines6_v0=(\"${ret_split5_v0[@]}\")\n    return 0\n}\n\n# Output\n# line: hello\n# line: world\nsplit_lines__6_v0 \"hello\nworld\"\nret_split_lines6_v0__8_17=(\"${ret_split_lines6_v0[@]}\")\nfor line_14 in \"${ret_split_lines6_v0__8_17[@]}\"; do\n    echo \"line: \"\"${line_14}\"\ndone", "output": "import { split_lines } from \"std/text\"\n\n// Output\n// line: hello\n// line: world\n\nmain {\n    for line in split_lines(\"hello\\nworld\") {\n        echo(\"line: \" + line)\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\ncd \"${tmpdir_17}\" || exit\nexpected_18=(\"file.txt\" \"file1.txt\" \"file2.txt\" \"file99.txt\")\nfile_glob__78_v0 \"file*.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__39_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__39_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n    cd(tmpdir)\n\n    const expected = [\n        \"file.txt\",\n        \"file1.txt\",\n        \"file2.txt\",\n        \"file99.txt\",\n    ]\n    const actual = file_glob(\"file*.txt\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_3=\"${1}\"\n    local value_4=\"${2}\"\n    local array_5=(\"${value_4}\")\n    # Used for type casting array\n    array_5=(\"${array_5[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_3 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_5[@]}\")\n        return 0\n    fi\n    local __range_start_6=0\n    local __range_end_6=\"${size_3}\"\n    local __dir_6=$(( ${__range_start_6} <= ${__range_end_6} ? 1 : -1 ))\n    for (( ____6=${__range_start_6}; ____6 * ${__dir_6} < ${__range_end_6} * ${__dir_6}; ____6+=${__dir_6} )); do\n        local array_1=(\"${value_4}\")\n        array_5+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_5[@]}\")\n    return 0\n}\n\narray_filled__9_v0 0 1.0\narray_7=(\"${ret_array_filled9_v0[@]}\")\narray_3=()\nif [ \"$(\n    (( ${#array_7[@]} != ${#array_3[@]} )) && echo 0 && exit\n    for (( i=0; i<${#array_7[@]}; i++ )); do [[ \"${array_7[i]}\" != \"${array_3[i]}\" ]] && echo 0 && exit; done\n    echo 1\n)\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Failed\"\nfi", "output": "import { array_filled } from \"std/array\"\n\nmain {\n    const array = array_filled(0, 1.0)\n    if array == [Num]:\n        echo(\"Succeeded\")\n    else:\n        echo(\"Failed\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ndir_exists__41_v0() {\n    local path_7=\"${1}\"\n    [ -d \"${path_7}\" ]\n    __status=$?\n    ret_dir_exists41_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\ndir_create__47_v0() {\n    local path_6=\"${1}\"\n    dir_exists__41_v0 \"${path_6}\"\n    local ret_dir_exists41_v0__87_12=\"${ret_dir_exists41_v0}\"\n    if [ \"$(( ! ret_dir_exists41_v0__87_12 ))\" != 0 ]; then\n        mkdir -p \"${path_6}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_dir_create47_v0=''\n            return \"${__status}\"\n        fi\n    fi\n}\n\ndir_create__47_v0 \"/tmp/amber-test\"\n__status=$?\nif [ \"${__status}\" = 0 ]; then\n    dir_exists__41_v0 \"/tmp/amber-test\"\n    ret_dir_exists41_v0__5_12=\"${ret_dir_exists41_v0}\"\n    if [ \"${ret_dir_exists41_v0__5_12}\" != 0 ]; then\n        rm -rf /tmp/amber-test\n        __status=$?\n        echo \"Succeeded\"\n    fi\nfi", "output": "import { dir_create, dir_exists } from \"std/fs\"\n\nmain {\n    dir_create(\"/tmp/amber-test\") succeeded {\n        if dir_exists(\"/tmp/amber-test\") {\n            trust $ rm -rf /tmp/amber-test $\n            echo(\"Succeeded\")\n        }\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_30=\"${1}\"\n    [ -f \"${path_30}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nfile_write__44_v0() {\n    local path_20=\"${1}\"\n    local content_21=\"${2}\"\n    local command_0\n    command_0=\"$(printf '%s\n' \"${content_21}\" > \"${path_20}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_write44_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_write44_v0=\"${command_0}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    else\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nenv_var_load__118_v0() {\n    local var_27=\"${1}\"\n    local file_28=\"${2}\"\n    local command_3\n    command_3=\"$(printf \"%s\n\" \"${!var_27}\")\"\n    __status=$?\n    local _var_29=\"${command_3}\"\n    if [ \"$([ \"_${_var_29}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_env_var_load118_v0=\"${_var_29}\"\n        return 0\n    fi\n    file_exists__42_v0 \"${file_28}\"\n    local ret_file_exists42_v0__17_8=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__17_8}\" != 0 ]; then\n        source \"${file_28}\"\n        __status=$?\n        local command_4\n        command_4=\"$(printf \"%s\n\" \"${!var_27}\")\"\n        __status=$?\n        ret_env_var_load118_v0=\"${command_4}\"\n        return 0\n    fi\n    ret_env_var_load118_v0=\"\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\nfile_write__44_v0 \".env\" \"TEST=1\"\n__status=$?\nenv_var_load__118_v0 \"TEST\" \".env\"\nret_env_var_load118_v0__8_8=\"${ret_env_var_load118_v0}\"\nif [ \"$([ \"_${ret_env_var_load118_v0__8_8}\" != \"_1\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { env_var_load } from \"std/env\"\nimport { file_write, temp_dir_create } from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    trust file_write(\".env\", \"TEST=1\")\n    if env_var_load(\"TEST\") == \"1\" {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_229=(\"${!1}\")\n    local value_230=\"${2}\"\n    index_232=0;\n    for element_231 in \"${array_229[@]}\"; do\n        if [ \"$([ \"_${value_230}\" != \"_${element_231}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_232}\"\n            return 0\n        fi\n        (( index_232++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_227=(\"${!1}\")\n    local value_228=\"${2}\"\n    array_find__0_v0 array_227[@] \"${value_228}\"\n    local result_233=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_233 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_191=0\n    local minor_192=0\n    local patch_193=0\n    major_191=${BASH_VERSINFO[0]}\n        minor_192=${BASH_VERSINFO[1]}\n        patch_193=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_191}\" \"${minor_192}\" \"${patch_193}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_187=\"${1}\"\n    local search_188=\"${2}\"\n    local replace_189=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_190=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_190=\"${source_187//\"${search_188}\"/\"${replace_189}\"}\"\n        __status=$?\n    else\n        result_190=\"${source_187//\"${search_188}\"/${replace_189}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_190}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_182=\"${1}\"\n    local search_183=\"${2}\"\n    local replace_text_184=\"${3}\"\n    local extended_185=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_186=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_183}\" \"/\" \"\\\\/\"\n    search_183=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_184}\" \"/\" \"\\\\/\"\n    replace_text_184=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_186 == __SED_VERSION_GNU_1 )) || $(( sed_version_186 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_183}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_183=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_185}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_186 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_186 == __SED_VERSION_GNU_1 )) || $(( sed_version_186 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_183}\" \"\\\\|\" \"|\"\n            search_183=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_183}/${replace_text_184}/g\" <<<\"${source_182}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_199=\"${1}\"\n    local delimiter_200=\"${2}\"\n    local result_201=()\n    IFS=\"${delimiter_200}\" read -rd '' -a result_201 < <(printf %s \"$text_199\")\n    __status=$?\n    ret_split29_v0=(\"${result_201[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_196=(\"${!1}\")\n    local delimiter_197=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_197}\" ; printf \"%s\n\" \"${list_196[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_181=\"${1}\"\n    replace_regex__28_v0 \"${path_181}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_179=(\"${!1}\")\n    local combined_180=\"\"\n    local __length_9=(\"${paths_179[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_179[0]}\"\n        combined_180=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_194=()\n        for item_195 in \"${paths_179[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_195}\"\n            item_195=\"${ret_escape_non_glob_chars76_v0}\"\n            items_194+=(\"${item_195}\")\n        done\n        join__32_v0 items_194[@] \" \"\n        combined_180=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_180}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_198=\"${command_12}\"\n    split__29_v0 \"${files_198}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_224=(\"${!1}\")\n    local expected_225=(\"${!2}\")\n    local __length_13=(\"${actual_224[@]}\")\n    local __length_14=(\"${expected_225[@]}\")\n    if [ \"$(( ${#__length_13[@]} != ${#__length_14[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_226 in \"${expected_225[@]}\"; do\n        array_contains__2_v0 actual_224[@] \"${file_226}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\nexpected_18=(\"${tmpdir_17}/file.txt\" \"${tmpdir_17}/file1.txt\" \"${tmpdir_17}/file2.txt\" \"${tmpdir_17}/file99.txt\" \"${tmpdir_17}/other.csv\")\narray_17=(\"${tmpdir_17}/missing*\" \"${tmpdir_17}/file*.txt\" \"${tmpdir_17}/other*.csv\")\nfile_glob_all__77_v0 array_17[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_202=(\"${ret_file_glob_all77_v0[@]}\")\ncompare__129_v0 actual_202[@] expected_18[@]\nret_compare129_v0__39_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__39_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_202[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n\n    const expected = [\n        \"{tmpdir}/file.txt\",\n        \"{tmpdir}/file1.txt\",\n        \"{tmpdir}/file2.txt\",\n        \"{tmpdir}/file99.txt\",\n        \"{tmpdir}/other.csv\",\n    ]\n    const actual = file_glob_all([\"{tmpdir}/missing*\", \"{tmpdir}/file*.txt\", \"{tmpdir}/other*.csv\"]) failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_filled__9_v0() {\n    local size_11=\"${1}\"\n    local value_12=\"${2}\"\n    local array_13=(\"${value_12}\")\n    # Used for type casting array\n    array_13=(\"${array_13[@]:0:0}\")\n    # Resetting the array size to 0\n    if [ \"$(( $(( size_11 <= 0 )) || $(( ! 1 )) ))\" != 0 ]; then\n        ret_array_filled9_v0=(\"${array_13[@]}\")\n        return 0\n    fi\n    local __range_start_14=0\n    local __range_end_14=\"${size_11}\"\n    local __dir_14=$(( ${__range_start_14} <= ${__range_end_14} ? 1 : -1 ))\n    for (( ____14=${__range_start_14}; ____14 * ${__dir_14} < ${__range_end_14} * ${__dir_14}; ____14+=${__dir_14} )); do\n        local array_1=(\"${value_12}\")\n        array_13+=(\"${array_1[@]}\")\ndone\n    ret_array_filled9_v0=(\"${array_13[@]}\")\n    return 0\n}\n\n# Output\n# Array length for size=-1: 0\n# Array length for size=0: 0\n# Array length for size=1: 1\n# Array length for size=2: 2\n# Array length for size=3: 3\ntest_size__13_v0() {\n    local size_10=\"${1}\"\n    array_filled__9_v0 \"${size_10}\" 0\n    local array_15=(\"${ret_array_filled9_v0[@]}\")\n    local __length_2=(\"${array_15[@]}\")\n    echo \"Array length for size=${size_10}: ${#__length_2[*]}\"\n}\n\nfor (( i_0=-1; i_0 <= 3; i_0++ )); do\n    test_size__13_v0 \"${i_0}\"\ndone", "output": "import { array_filled } from \"std/array\"\n\n// Output\n// Array length for size=-1: 0\n// Array length for size=0: 0\n// Array length for size=1: 1 \n// Array length for size=2: 2 \n// Array length for size=3: 3\n\nfun test_size(size: Int): Null {\n    const array = array_filled(size, 0)\n    echo(\"Array length for size={size}: {len(array)}\")\n}\n\nmain {\n    for i in -1..=3 {\n        test_size(i)\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_const_set__121_v0() {\n    local name_5=\"${1}\"\n    local val_6=\"${2}\"\n    readonly $name_5=\"$val_6\" 2> /dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_const_set121_v0=''\n        return \"${__status}\"\n    fi\n}\n\nenv_const_set__121_v0 \"test_shell_constant_set\" \"Succe\"\n__status=$?\nstr_7=\"\"\ncommand_1=\"$(echo \"$test_shell_constant_set\")\"\n__status=$?\nstr_7+=\"${command_1}\"\nenv_const_set__121_v0 \"test_shell_constant_set\" \"Succe\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    str_7+=\"eded\"\nfi\nprintf '%s\\n' \"${str_7}\"", "output": "import * from \"std/env\"\n\nmain {\n    trust env_const_set(\"test_shell_constant_set\", \"Succe\")\n    let str = \"\"\n    str += trust $ echo \"\\$test_shell_constant_set\" $\n    env_const_set(\"test_shell_constant_set\", \"Succe\") failed {\n        str += \"eded\"\n    }\n    echo(str)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntext_contains__17_v0() {\n    local source_25=\"${1}\"\n    local search_26=\"${2}\"\n    [[ \"${source_25}\" == *\"${search_26}\"* ]]\n    __status=$?\n    ret_text_contains17_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\ntext_contains_any__18_v0() {\n    local source_22=\"${1}\"\n    local searches_23=(\"${!2}\")\n    for search_24 in \"${searches_23[@]}\"; do\n        text_contains__17_v0 \"${source_22}\" \"${search_24}\"\n        local ret_text_contains17_v0__283_12=\"${ret_text_contains17_v0}\"\n        if [ \"${ret_text_contains17_v0__283_12}\" != 0 ]; then\n            ret_text_contains_any18_v0=1\n            return 0\n        fi\n    done\n    ret_text_contains_any18_v0=0\n    return 0\n}\n\n# Output\n# Empty: 0\n# None: 0\n# Left: 1\n# Right: 1\n# Both: 1\ntest_multiple__37_v0() {\n    local label_19=\"${1}\"\n    local text_20=\"${2}\"\n    local terms_21=(\"${!3}\")\n    text_contains_any__18_v0 \"${text_20}\" terms_21[@]\n    local result_27=\"${ret_text_contains_any18_v0}\"\n    printf '%s\\n' \"${label_19}: ${result_27}\"\n}\n\narray_1=()\ntest_multiple__37_v0 \"Empty\" \"Hello World\" array_1[@]\narray_2=(\"Other\" \"Other\")\ntest_multiple__37_v0 \"None\" \"Hello World\" array_2[@]\narray_3=(\"Hello\" \"Other\")\ntest_multiple__37_v0 \"Left\" \"Hello World\" array_3[@]\narray_4=(\"Other\" \"World\")\ntest_multiple__37_v0 \"Right\" \"Hello World\" array_4[@]\narray_5=(\"Hello\" \"World\")\ntest_multiple__37_v0 \"Both\" \"Hello World\" array_5[@]", "output": "import { text_contains_any } from \"std/text\"\n\n// Output\n// Empty: 0\n// None: 0\n// Left: 1\n// Right: 1\n// Both: 1\n\nfun test_multiple(label, text, terms) {\n    const result = text_contains_any(text, terms)\n    echo(\"{label}: {result}\")\n}\n\nmain {\n    test_multiple(\"Empty\", \"Hello World\", [Text])\n    test_multiple(\"None\", \"Hello World\", [\"Other\", \"Other\"])\n    test_multiple(\"Left\", \"Hello World\", [\"Hello\", \"Other\"])\n    test_multiple(\"Right\", \"Hello World\", [\"Other\", \"World\"])\n    test_multiple(\"Both\", \"Hello World\", [\"Hello\", \"World\"])\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_270=0\n    local minor_271=0\n    local patch_272=0\n    major_270=${BASH_VERSINFO[0]}\n        minor_271=${BASH_VERSINFO[1]}\n        patch_272=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_270}\" \"${minor_271}\" \"${patch_272}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_266=\"${1}\"\n    local search_267=\"${2}\"\n    local replace_268=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_269=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_269=\"${source_266//\"${search_267}\"/\"${replace_268}\"}\"\n        __status=$?\n    else\n        result_269=\"${source_266//\"${search_267}\"/${replace_268}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_269}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__4_v0() {\n    local source_261=\"${1}\"\n    local search_262=\"${2}\"\n    local replace_text_263=\"${3}\"\n    local extended_264=\"${4}\"\n    sed_version__3_v0 \n    local sed_version_265=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_262}\" \"/\" \"\\\\/\"\n    search_262=\"${ret_replace1_v0}\"\n    replace__1_v0 \"${replace_text_263}\" \"/\" \"\\\\/\"\n    replace_text_263=\"${ret_replace1_v0}\"\n    if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_262}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_262=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_264}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_265 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_265 == __SED_VERSION_GNU_1 )) || $(( sed_version_265 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_262}\" \"\\\\|\" \"|\"\n            search_262=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_262}/${replace_text_263}/g\" <<<\"${source_261}\")\"\n        __status=$?\n        ret_replace_regex4_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__5_v0() {\n    local text_278=\"${1}\"\n    local delimiter_279=\"${2}\"\n    local result_280=()\n    IFS=\"${delimiter_279}\" read -rd '' -a result_280 < <(printf %s \"$text_278\")\n    __status=$?\n    ret_split5_v0=(\"${result_280[@]}\")\n    return 0\n}\n\njoin__8_v0() {\n    local list_275=(\"${!1}\")\n    local delimiter_276=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_276}\" ; printf \"%s\n\" \"${list_275[*]}\")\"\n    __status=$?\n    ret_join8_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__52_v0() {\n    local path_260=\"${1}\"\n    replace_regex__4_v0 \"${path_260}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars52_v0=\"${ret_replace_regex4_v0}\"\n    return 0\n}\n\nfile_glob_all__53_v0() {\n    local paths_258=(\"${!1}\")\n    local combined_259=\"\"\n    local __length_9=(\"${paths_258[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__52_v0 \"${paths_258[0]}\"\n        combined_259=\"${ret_escape_non_glob_chars52_v0}\"\n    else\n        local items_273=()\n        for item_274 in \"${paths_258[@]}\"; do\n            escape_non_glob_chars__52_v0 \"${item_274}\"\n            item_274=\"${ret_escape_non_glob_chars52_v0}\"\n            items_273+=(\"${item_274}\")\n        done\n        join__8_v0 items_273[@] \" \"\n        combined_259=\"${ret_join8_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_259}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all53_v0=()\n        return \"${__status}\"\n    fi\n    local files_277=\"${command_12}\"\n    split__5_v0 \"${files_277}\" \"\n\"\n    ret_file_glob_all53_v0=(\"${ret_split5_v0[@]}\")\n    return 0\n}\n\nfile_glob__54_v0() {\n    local path_257=\"${1}\"\n    local array_13=(\"${path_257}\")\n    file_glob_all__53_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob54_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob54_v0=(\"${ret_file_glob_all53_v0[@]}\")\n    return 0\n}\n\n# Output\n# FAILED\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\ncd \"${tmpdir_17}\" || exit\nfile_glob__54_v0 \"missing*\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nfiles_281=(\"${ret_file_glob54_v0[@]}\")\nfor file_282 in \"${files_281[@]}\"; do\n    echo \"[${file_282}]\"\ndone", "output": "import * from \"std/fs\"\n\n// Output\n// FAILED\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n    cd(tmpdir)\n\n    const files = file_glob(\"missing*\") failed {\n        echo(\"FAILED\")\n    }\n    for file in files {\n        echo(\"[{file}]\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nparse_int__14_v0() {\n    local text_4=\"${1}\"\n    [ -n \"${text_4}\" ] && [ \"${text_4}\" -eq \"${text_4}\" ] 2>/dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_parse_int14_v0=''\n        return \"${__status}\"\n    fi\n    ret_parse_int14_v0=\"${text_4}\"\n    return 0\n}\n\n# Output\n# 123\n# -12\n# 0\nparse_int__14_v0 \"123\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_int14_v0__9_10=\"${ret_parse_int14_v0}\"\necho \"${ret_parse_int14_v0__9_10}\"\nparse_int__14_v0 \"-12\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_int14_v0__10_10=\"${ret_parse_int14_v0}\"\necho \"${ret_parse_int14_v0__10_10}\"\nparse_int__14_v0 \"0\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_parse_int14_v0__11_10=\"${ret_parse_int14_v0}\"\necho \"${ret_parse_int14_v0__11_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// 123\n// -12\n// 0\n\nmain {\n    echo(parse_int(\"123\")?)\n    echo(parse_int(\"-12\")?)\n    echo(parse_int(\"0\")?)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuniq_lines__35_v0() {\n    local text_5=\"${1}\"\n    local remove_all_6=\"${2}\"\n    if [ \"$(( ! remove_all_6 ))\" != 0 ]; then\n        ret_uniq_lines35_v0=\"$(uniq <<< \"${text_5}\")\"\n        return 0\n    else\n        ret_uniq_lines35_v0=\"$(awk '!seen[$0]++' <<< \"${text_5}\")\"\n        return 0\n    fi\n}\n\n# Output\n# foo\n# bar\n# baz\n# foo\n# bar\n# baz\nuniq_lines__35_v0 \"foo\nfoo\nbar\nbar\nbaz\" 0\nret_uniq_lines35_v0__12_10=\"${ret_uniq_lines35_v0}\"\nprintf '%s\\n' \"${ret_uniq_lines35_v0__12_10}\"\nuniq_lines__35_v0 \"foo\nbar\nfoo\nbaz\nbar\" 1\nret_uniq_lines35_v0__13_10=\"${ret_uniq_lines35_v0}\"\nprintf '%s\\n' \"${ret_uniq_lines35_v0__13_10}\"", "output": "import { uniq_lines } from \"std/text\"\n\n// Output\n// foo\n// bar\n// baz\n// foo\n// bar\n// baz\n\nmain {\n    echo(uniq_lines(\"foo\\nfoo\\nbar\\nbar\\nbaz\"))\n    echo(uniq_lines(\"foo\\nbar\\nfoo\\nbaz\\nbar\", true))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nsplit__5_v0() {\n    local text_27=\"${1}\"\n    local delimiter_28=\"${2}\"\n    local result_29=()\n    IFS=\"${delimiter_28}\" read -rd '' -a result_29 < <(printf %s \"$text_27\")\n    __status=$?\n    ret_split5_v0=(\"${result_29[@]}\")\n    return 0\n}\n\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nstarts_with__23_v0() {\n    local text_34=\"${1}\"\n    local prefix_35=\"${2}\"\n    [[ \"${text_34}\" == \"${prefix_35}\"* ]]\n    __status=$?\n    ret_starts_with23_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\ndir_exists__41_v0() {\n    local path_37=\"${1}\"\n    [ -d \"${path_37}\" ]\n    __status=$?\n    ret_dir_exists41_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    else\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nfilename__73_v0() {\n    local path_26=\"${1}\"\n    split__5_v0 \"${path_26}\" \"/\"\n    local parts_30=(\"${ret_split5_v0[@]}\")\n    local __length_3=(\"${parts_30[@]}\")\n    ret_filename73_v0=\"${parts_30[$(( ${#__length_3[@]} - 1 ))]}\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 0 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\npath_17=\"${ret_temp_dir_create49_v0}\"\nfilename__73_v0 \"${path_17}\"\nfilename_31=\"${ret_filename73_v0}\"\nstarts_with__23_v0 \"${filename_31}\" \"amber-\"\nret_starts_with23_v0__13_13=\"${ret_starts_with23_v0}\"\n__length_5=\"${filename_31}\"\n__length_6=\"amber-XXXX\"\ndir_exists__41_v0 \"${path_17}\"\nret_dir_exists41_v0__19_9=\"${ret_dir_exists41_v0}\"\nif [ \"$(( ! ret_starts_with23_v0__13_13 ))\" != 0 ]; then\n    echo \"filename should start with \\\"amber-\\\", ${filename_31} given\"\nelif [ \"$(( ${#__length_5} != ${#__length_6} ))\" != 0 ]; then\n    __length_7=\"amber-XXXX\"\n    echo \"The length of filename should be ${#__length_7}. ${filename_31} given\"\nelif [ \"${ret_dir_exists41_v0__19_9}\" != 0 ]; then\n    echo \"Succeeded\"\nfi\nrmdir ${path_17}\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\n# It is hard to test auto delete functionality. Just creating here only.\ntemp_dir_create__49_v0 \"should-not-exist-after-test-ends-1-XXXX\" 1 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntemp_dir_create__49_v0 \"should-not-exist-after-test-ends-2-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nfile_containng_dir_38=\"${ret_temp_dir_create49_v0}\"\ntouch \"${file_containng_dir_38}/test.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi", "output": "import * from \"std/fs\"\nimport {split, starts_with} from \"std/text\"\n\nfun filename(path: Text): Text {\n    const parts = split(path, \"/\")\n    return parts[len(parts) - 1]\n}\n\nmain {\n    const path = temp_dir_create(\"amber-XXXX\")?\n    const filename = filename(path)\n    if {\n        not starts_with(filename, \"amber-\") {\n            echo(\"filename should start with \\\"amber-\\\", {filename} given\")\n        }\n        len(filename) != len(\"amber-XXXX\") {\n            echo(\"The length of filename should be {len(\"amber-XXXX\")}. {filename} given\")\n        }\n        dir_exists(path) {\n            echo(\"Succeeded\")\n        }\n    }\n    $ rmdir {path} $?\n    // It is hard to test auto delete functionality. Just creating here only.\n    temp_dir_create(\"should-not-exist-after-test-ends-1-XXXX\", true)?\n    const file_containng_dir = temp_dir_create(\"should-not-exist-after-test-ends-2-XXXX\", true, true)?\n    $ touch \"{file_containng_dir}/test.txt\" $?\n\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nlowercase__12_v0() {\n    local text_28=\"${1}\"\n    local command_0\n    command_0=\"$(tr '[:upper:]' '[:lower:]' <<< \"${text_28}\")\"\n    __status=$?\n    ret_lowercase12_v0=\"${command_0}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    else\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\ninput_confirm__128_v0() {\n    local prompt_25=\"${1}\"\n    local default_yes_26=\"${2}\"\n    local choice_default_27\n    choice_default_27=\"$(if [ \"${default_yes_26}\" != 0 ]; then echo \" [\\\\x1b[1mY/\\\\x1b[0mn]\"; else echo \" [y/\\\\x1b[1mN\\\\x1b[0m]\"; fi)\"\n    printf \"\\x1b[1m${prompt_25}\\x1b[0m${choice_default_27}\"\n    __status=$?\n    read -s -n 1 || read -s -n 1 < /dev/tty\n    __status=$?\n    printf \"\n\"\n    __status=$?\n    local command_3\n    command_3=\"$(printf '%s\n' $REPLY)\"\n    __status=$?\n    lowercase__12_v0 \"${command_3}\"\n    local result_29=\"${ret_lowercase12_v0}\"\n    ret_input_confirm128_v0=\"$(( $([ \"_${result_29}\" != \"_y\" ]; echo $?) || $(( $([ \"_${result_29}\" != \"_\" ]; echo $?) && default_yes_26 )) ))\"\n    return 0\n}\n\ntemp_dir_create__49_v0 \"amber-confirm-test-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ntest_file_18=\"${tmpdir_17}/test_confirm\"\necho \"Y\" > ${test_file_18}\n__status=$?\nexec 0< ${test_file_18}\n__status=$?\ninput_confirm__128_v0 \"Yes\" 0\nret_input_confirm128_v0__9_8=\"${ret_input_confirm128_v0}\"\nif [ \"${ret_input_confirm128_v0__9_8}\" != 0 ]; then\n    echo \"Confirm Yes\"\nfi\necho \"N\" > ${test_file_18}\n__status=$?\nexec 0< ${test_file_18}\n__status=$?\ninput_confirm__128_v0 \"No\" 0\nret_input_confirm128_v0__12_12=\"${ret_input_confirm128_v0}\"\nif [ \"$(( ! ret_input_confirm128_v0__12_12 ))\" != 0 ]; then\n    echo \"Confirm No\"\nfi\necho \"\" > ${test_file_18}\n__status=$?\nexec 0< ${test_file_18}\n__status=$?\ninput_confirm__128_v0 \"Default\" 1\nret_input_confirm128_v0__15_8=\"${ret_input_confirm128_v0}\"\nif [ \"${ret_input_confirm128_v0__15_8}\" != 0 ]; then\n    echo \"Confirm Default\"\nfi", "output": "import * from \"std/env\"\nimport { temp_dir_create } from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-confirm-test-XXXX\", true, true)?\n    const test_file = \"{tmpdir}/test_confirm\"\n    trust $ echo \"Y\" > {test_file} $\n    trust $ exec 0< {test_file} $\n    if input_confirm(\"Yes\"): echo(\"Confirm Yes\")\n    trust $ echo \"N\" > {test_file} $\n    trust $ exec 0< {test_file} $\n    if not input_confirm(\"No\"): echo(\"Confirm No\")\n    trust $ echo \"\" > {test_file} $\n    trust $ exec 0< {test_file} $\n    if input_confirm(\"Default\", true): echo(\"Confirm Default\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_55=0\n    local minor_56=0\n    local patch_57=0\n    major_55=${BASH_VERSINFO[0]}\n        minor_56=${BASH_VERSINFO[1]}\n        patch_57=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_55}\" \"${minor_56}\" \"${patch_57}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_51=\"${1}\"\n    local search_52=\"${2}\"\n    local replace_53=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_54=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_54=\"${source_51//\"${search_52}\"/\"${replace_53}\"}\"\n        __status=$?\n    else\n        result_54=\"${source_51//\"${search_52}\"/${replace_53}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_54}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__4_v0() {\n    local source_46=\"${1}\"\n    local search_47=\"${2}\"\n    local replace_text_48=\"${3}\"\n    local extended_49=\"${4}\"\n    sed_version__3_v0 \n    local sed_version_50=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_47}\" \"/\" \"\\\\/\"\n    search_47=\"${ret_replace1_v0}\"\n    replace__1_v0 \"${replace_text_48}\" \"/\" \"\\\\/\"\n    replace_text_48=\"${ret_replace1_v0}\"\n    if [ \"$(( $(( sed_version_50 == __SED_VERSION_GNU_1 )) || $(( sed_version_50 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_47}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_47=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_49}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_50 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n            __status=$?\n            ret_replace_regex4_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_50 == __SED_VERSION_GNU_1 )) || $(( sed_version_50 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_47}\" \"\\\\|\" \"|\"\n            search_47=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_47}/${replace_text_48}/g\" <<<\"${source_46}\")\"\n        __status=$?\n        ret_replace_regex4_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\n# Output\n# z\n# ccc\n# E\n# abc[123]def\n# aeon aeons eon eons\n# #path#to#file.txt\n# Succeeded\n# Put number (255) in brackets\n# One or more matching\nreplace_regex__4_v0 \"aaa\" \"a+\" \"z\" 1\nret_replace_regex4_v0__15_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__15_10}\"\n# Single character bracket expression\nreplace_regex__4_v0 \"abc\" \"[ab]\" \"c\" 1\nret_replace_regex4_v0__17_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__17_10}\"\n# Range bracket expression\nreplace_regex__4_v0 \"E\" \"[A-Z]\" \"E\" 1\nret_replace_regex4_v0__19_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__19_10}\"\n# Combination of bracket exp, caupturing group and one or more\nreplace_regex__4_v0 \"abc123def\" \"([0-9]+)\" \"[\\\\1]\" 1\nret_replace_regex4_v0__21_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__21_10}\"\n# Word boundary should not be handled, because it is not POSIX standard\nreplace_regex__4_v0 \"aeon aeons eon eons\" \"\\\\beon\\\\b\" \"###\" 1\nret_replace_regex4_v0__23_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__23_10}\"\n# Replacing forward slash\nreplace_regex__4_v0 \"/path/to/file.txt\" \"/\" \"#\" 1\nret_replace_regex4_v0__25_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__25_10}\"\n# A pipe (|) should be treated as OR in POSIX Standards ERE.\nreplace_regex__4_v0 \".tar.gz\" \"\\\\.(tar\\\\.gz|tgz)\\$\" \"Succeeded\" 1\nret_replace_regex4_v0__27_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__27_10}\"\n# Capture groups\nreplace_regex__4_v0 \"Put number 255 in brackets\" \"([0-9]+)\" \"(\\\\1)\" 1\nret_replace_regex4_v0__29_10=\"${ret_replace_regex4_v0}\"\nprintf '%s\\n' \"${ret_replace_regex4_v0__29_10}\"", "output": "import * from \"std/text\"\n\n// Output\n// z\n// ccc\n// E\n// abc[123]def\n// aeon aeons eon eons\n// #path#to#file.txt\n// Succeeded\n// Put number (255) in brackets\n\nmain {\n    // One or more matching\n    echo(replace_regex(\"aaa\", \"a+\", \"z\", true))\n    // Single character bracket expression\n    echo(replace_regex(\"abc\", \"[ab]\", \"c\", true))\n    // Range bracket expression\n    echo(replace_regex(\"E\", \"[A-Z]\", \"E\", true))\n    // Combination of bracket exp, caupturing group and one or more\n    echo(replace_regex(\"abc123def\", \"([0-9]+)\", \"[\\1]\", true))\n    // Word boundary should not be handled, because it is not POSIX standard\n    echo(replace_regex(\"aeon aeons eon eons\", \"\\beon\\b\", \"###\", true))\n    // Replacing forward slash\n    echo(replace_regex(\"/path/to/file.txt\", \"/\", \"#\", true))\n    // A pipe (|) should be treated as OR in POSIX Standards ERE.\n    echo(replace_regex(\".tar.gz\", \"\\.(tar\\.gz|tgz)$\", \"Succeeded\", true))\n    // Capture groups\n    echo(replace_regex(\"Put number 255 in brackets\", \"([0-9]+)\", \"(\\1)\", true))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_136=0\n    local minor_137=0\n    local patch_138=0\n    major_136=${BASH_VERSINFO[0]}\n        minor_137=${BASH_VERSINFO[1]}\n        patch_138=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_136}\" \"${minor_137}\" \"${patch_138}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_132=\"${1}\"\n    local search_133=\"${2}\"\n    local replace_134=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_135=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_135=\"${source_132//\"${search_133}\"/\"${replace_134}\"}\"\n        __status=$?\n    else\n        result_135=\"${source_132//\"${search_133}\"/${replace_134}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_135}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nmatch_regex__20_v0() {\n    local source_128=\"${1}\"\n    local search_129=\"${2}\"\n    local extended_130=\"${3}\"\n    sed_version__3_v0 \n    local sed_version_131=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_129}\" \"/\" \"\\\\/\"\n    search_129=\"${ret_replace1_v0}\"\n    local output_139=\"\"\n    if [ \"$(( $(( sed_version_131 == __SED_VERSION_GNU_1 )) || $(( sed_version_131 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_129}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_129=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_130}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_131 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            # '\\b' is not in POSIX standards. Disable it\n            replace__1_v0 \"${search_129}\" \"\\\\b\" \"\\\\b\"\n            search_129=\"${ret_replace1_v0}\"\n            local command_2\n            command_2=\"$(sed -r -ne \"/${search_129}/p\" <<<\"${source_128}\")\"\n            __status=$?\n            output_139=\"${command_2}\"\n        else\n            local command_3\n            command_3=\"$(sed -E -ne \"/${search_129}/p\" <<<\"${source_128}\")\"\n            __status=$?\n            output_139=\"${command_3}\"\n        fi\n    else\n        if [ \"$(( $(( sed_version_131 == __SED_VERSION_GNU_1 )) || $(( sed_version_131 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_129}\" \"\\\\|\" \"|\"\n            search_129=\"${ret_replace1_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -ne \"/${search_129}/p\" <<<\"${source_128}\")\"\n        __status=$?\n        output_139=\"${command_4}\"\n    fi\n    if [ \"$([ \"_${output_139}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_match_regex20_v0=1\n        return 0\n    fi\n    ret_match_regex20_v0=0\n    return 0\n}\n\nmatch_regex_any__21_v0() {\n    local text_125=\"${1}\"\n    local terms_126=(\"${!2}\")\n    for term_127 in \"${terms_126[@]}\"; do\n        match_regex__20_v0 \"${text_125}\" \"${term_127}\" 0\n        local ret_match_regex20_v0__361_12=\"${ret_match_regex20_v0}\"\n        if [ \"${ret_match_regex20_v0__361_12}\" != 0 ]; then\n            ret_match_regex_any21_v0=1\n            return 0\n        fi\n    done\n    ret_match_regex_any21_v0=0\n    return 0\n}\n\n# Output\n# Empty: 0\n# None: 0\n# Right: 1\n# Left: 1\n# Both: 1\ntest_multiple__37_v0() {\n    local label_122=\"${1}\"\n    local text_123=\"${2}\"\n    local terms_124=(\"${!3}\")\n    match_regex_any__21_v0 \"${text_123}\" terms_124[@]\n    local result_140=\"${ret_match_regex_any21_v0}\"\n    printf '%s\\n' \"${label_122}: ${result_140}\"\n}\n\narray_6=()\ntest_multiple__37_v0 \"Empty\" \"Hello World\" array_6[@]\narray_7=(\"Other\" \"Other\\$\")\ntest_multiple__37_v0 \"None\" \"Hello World\" array_7[@]\narray_8=(\"Other\" \"World\\$\")\ntest_multiple__37_v0 \"Right\" \"Hello World\" array_8[@]\narray_9=(\"^Hello\" \"Other\")\ntest_multiple__37_v0 \"Left\" \"Hello World\" array_9[@]\narray_10=(\"^Hello\" \"\\$World\")\ntest_multiple__37_v0 \"Both\" \"Hello World\" array_10[@]", "output": "import { match_regex_any } from \"std/text\"\n\n// Output\n// Empty: 0\n// None: 0\n// Right: 1\n// Left: 1\n// Both: 1\n\nfun test_multiple(label, text, terms) {\n    const result = match_regex_any(text, terms)\n    echo(\"{label}: {result}\")\n}\n\nmain {\n    test_multiple(\"Empty\", \"Hello World\", [Text])\n    test_multiple(\"None\", \"Hello World\", [\"Other\", \"Other$\"])\n    test_multiple(\"Right\", \"Hello World\", [\"Other\", \"World$\"])\n    test_multiple(\"Left\", \"Hello World\", [\"^Hello\", \"Other\"])\n    test_multiple(\"Both\", \"Hello World\", [\"^Hello\", \"$World\"])\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nmath_sum__0_v0() {\n    local list_3=(\"${!1}\")\n    local sum_4=0\n    for item_5 in \"${list_3[@]}\"; do\n        sum_4=\"$(( sum_4 + item_5 ))\"\n    done\n    ret_math_sum0_v0=\"${sum_4}\"\n    return 0\n}\n\n# Output\n# 10\narray_1=(1 2 3 4)\nmath_sum__0_v0 array_1[@]\nret_math_sum0_v0__7_10=\"${ret_math_sum0_v0}\"\necho \"${ret_math_sum0_v0__7_10}\"", "output": "import * from \"std/math\"\n\n// Output\n// 10\n\nmain {\n    echo(math_sum([1, 2, 3, 4]))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_5=\"${1}\"\n    local result_6=\"\"\n    result_6=\"${text_5#${text_5%%[![:space:]]*}}\"\n    result_6=\"${result_6%${result_6##*[![:space:]]}}\"\n    ret_trim11_v0=\"${result_6}\"\n    return 0\n}\n\ntrim__11_v0 \"  hello   world  \"\nret_trim11_v0__4_10=\"${ret_trim11_v0}\"\nprintf '%s\\n' \"${ret_trim11_v0__4_10}\"", "output": "import * from \"std/text\"\n\nmain {\n    echo(trim(\"  hello   world  \"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nescaped__132_v0() {\n    local text_4=\"${1}\"\n    ret_escaped132_v0=\"$(printf \"%s\n\" \"$text_4\" | sed -e 's/\\\\/\\\\\\\\/g' -e \"s/%/%%/g\")\"\n    return 0\n}\n\n# Output\n# Hello \\\\v Amber %%T\nescaped__132_v0 \"Hello \\\\v Amber %T\"\nret_escaped132_v0__7_10=\"${ret_escaped132_v0}\"\nprintf '%s\\n' \"${ret_escaped132_v0__7_10}\"", "output": "import * from \"std/env\"\n\n// Output\n// Hello \\\\v Amber %%T\n\nmain {\n    echo(escaped(\"Hello \\\\v Amber %T\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# All dates are internally stored as milliseconds since the Epoch (1970-01-01 00:00 UTC).\ndate_format_posix__0_v0() {\n    local date_4=\"${1}\"\n    local format_5=\"${2}\"\n    local utc_6=\"${3}\"\n    local utc_flag_7\n    utc_flag_7=\"$(if [ \"${utc_6}\" != 0 ]; then echo \"-u\"; else echo \"\"; fi)\"\n    # Case if this is a GNU date command\n    local command_1\n    command_1=\"$(date ${utc_flag_7} -d \"@${date_4}\" +\"${format_5}\" 2>/dev/null)\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        # Case if this is a BSD date command\n        local command_0\n        command_0=\"$(date ${utc_flag_7} -j -r \"${date_4}\" +\"${format_5}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_date_format_posix0_v0=''\n            return \"${__status}\"\n        fi\n        ret_date_format_posix0_v0=\"${command_0}\"\n        return 0\n    fi\n    ret_date_format_posix0_v0=\"${command_1}\"\n    return 0\n}\n\ndate_from_posix__1_v0() {\n    local date_12=\"${1}\"\n    local format_13=\"${2}\"\n    local utc_14=\"${3}\"\n    local utc_flag_15\n    utc_flag_15=\"$(if [ \"${utc_14}\" != 0 ]; then echo \"-u\"; else echo \"\"; fi)\"\n    # Case if this is a GNU date command\n    local command_3\n    command_3=\"$(date ${utc_flag_15} -d \"$(date -d \"${date_12}\" +\"${format_13}\" 2>/dev/null)\" +%s 2>/dev/null)\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        # Case if this is a BSD date command\n        local command_2\n        command_2=\"$(date ${utc_flag_15} -j -f \"${format_13}\" \"${date_12}\" +%s)\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_date_from_posix1_v0=''\n            return \"${__status}\"\n        fi\n        ret_date_from_posix1_v0=\"${command_2}\"\n        return 0\n    fi\n    ret_date_from_posix1_v0=\"${command_3}\"\n    return 0\n}\n\n# Output\n# 2009-02-07 09:46:40\n# 1234000000\ndate_format_posix__0_v0 1234000000 \"%F %T\" 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_format_posix0_v0__8_10=\"${ret_date_format_posix0_v0}\"\nprintf '%s\\n' \"${ret_date_format_posix0_v0__8_10}\"\ndate_from_posix__1_v0 \"2009-02-07 09:46:40\" \"%F %T\" 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_from_posix1_v0__9_10=\"${ret_date_from_posix1_v0}\"\necho \"${ret_date_from_posix1_v0__9_10}\"", "output": "import * from \"std/date\"\n\n// Output\n// 2009-02-07 09:46:40\n// 1234000000\n\nmain {\n    echo(date_format_posix(1234000000, \"%F %T\", true)?)\n    echo(date_from_posix(\"2009-02-07 09:46:40\", \"%F %T\", true)?)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nescaped__132_v0() {\n    local text_7=\"${1}\"\n    ret_escaped132_v0=\"$(printf \"%s\n\" \"$text_7\" | sed -e 's/\\\\/\\\\\\\\/g' -e \"s/%/%%/g\")\"\n    return 0\n}\n\nunderlined__136_v0() {\n    local message_6=\"${1}\"\n    escaped__132_v0 \"${message_6}\"\n    local ret_escaped132_v0__278_21=\"${ret_escaped132_v0}\"\n    ret_underlined136_v0=\"\\\\x1b[4m${ret_escaped132_v0__278_21}\\\\x1b[0m\"\n    return 0\n}\n\n# Output\n# \\x1b[4mHello Amber!\\x1b[0m\nunderlined__136_v0 \"Hello Amber\"'!'\"\"\nret_underlined136_v0__7_10=\"${ret_underlined136_v0}\"\nprintf '%s\\n' \"${ret_underlined136_v0__7_10}\"", "output": "import * from \"std/env\"\n\n// Output\n// \\x1b[4mHello Amber!\\x1b[0m\n\nmain {\n    echo(underlined(\"Hello Amber!\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_32=\"${1}\"\n    [ -f \"${path_32}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nfile_write__44_v0() {\n    local path_20=\"${1}\"\n    local content_21=\"${2}\"\n    local command_0\n    command_0=\"$(printf '%s\n' \"${content_21}\" > \"${path_20}\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_write44_v0=''\n        return \"${__status}\"\n    fi\n    ret_file_write44_v0=\"${command_0}\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    else\n        local command_2\n        command_2=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_2}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nenv_var_load__118_v0() {\n    local var_29=\"${1}\"\n    local file_30=\"${2}\"\n    local command_3\n    command_3=\"$(printf \"%s\n\" \"${!var_29}\")\"\n    __status=$?\n    local _var_31=\"${command_3}\"\n    if [ \"$([ \"_${_var_31}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_env_var_load118_v0=\"${_var_31}\"\n        return 0\n    fi\n    file_exists__42_v0 \"${file_30}\"\n    local ret_file_exists42_v0__17_8=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__17_8}\" != 0 ]; then\n        source \"${file_30}\"\n        __status=$?\n        local command_4\n        command_4=\"$(printf \"%s\n\" \"${!var_29}\")\"\n        __status=$?\n        ret_env_var_load118_v0=\"${command_4}\"\n        return 0\n    fi\n    ret_env_var_load118_v0=\"\"\n    return 0\n}\n\nenv_file_load__119_v0() {\n    local file_23=\"${1}\"\n    export \"$(xargs < ${file_23})\" > /dev/null\n    __status=$?\n}\n\n# Output\n# yes\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\nfile_write__44_v0 \".env\" \"TEST=1\"\n__status=$?\nenv_file_load__119_v0 \".env\"\nenv_var_load__118_v0 \"TEST\" \".env\"\nret_env_var_load118_v0__12_8=\"${ret_env_var_load118_v0}\"\nif [ \"$([ \"_${ret_env_var_load118_v0__12_8}\" != \"_1\" ]; echo $?)\" != 0 ]; then\n    echo \"yes\"\nfi", "output": "import { env_file_load, env_var_load } from \"std/env\"\nimport { file_write, temp_dir_create } from \"std/fs\"\n\n// Output\n// yes\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    trust file_write(\".env\", \"TEST=1\")\n    env_file_load()\n    if env_var_load(\"TEST\") == \"1\" {\n        echo(\"yes\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    index_17=0;\n    for element_16 in \"${array_14[@]}\"; do\n        if [ \"$([ \"_${value_15}\" != \"_${element_16}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_17}\"\n            return 0\n        fi\n        (( index_17++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_12=(\"${!1}\")\n    local value_13=\"${2}\"\n    array_find__0_v0 array_12[@] \"${value_13}\"\n    local result_18=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_18 >= 0 ))\"\n    return 0\n}\n\n# Output\n# Not Found\narray_0=()\narray_contains__2_v0 array_0[@] 0\nret_array_contains2_v0__8_8=\"${ret_array_contains2_v0}\"\nif [ \"${ret_array_contains2_v0__8_8}\" != 0 ]; then\n    echo \"Found\"\nelse\n    echo \"Not Found\"\nfi", "output": "import * from \"std/array\"\n\n// Output\n// Not Found\n\nmain {\n    const array = [Num]\n    if array_contains(array, 0) {\n        echo(\"Found\")\n    } else {\n        echo(\"Not Found\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__0_v0() {\n    local major_227=0\n    local minor_228=0\n    local patch_229=0\n    major_227=${BASH_VERSINFO[0]}\n        minor_228=${BASH_VERSINFO[1]}\n        patch_229=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version0_v0=(\"${major_227}\" \"${minor_228}\" \"${patch_229}\")\n    return 0\n}\n\nreplace__1_v0() {\n    local source_223=\"${1}\"\n    local search_224=\"${2}\"\n    local replace_225=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_226=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_226=\"${source_223//\"${search_224}\"/\"${replace_225}\"}\"\n        __status=$?\n    else\n        result_226=\"${source_223//\"${search_224}\"/${replace_225}}\"\n        __status=$?\n    fi\n    ret_replace1_v0=\"${result_226}\"\n    return 0\n}\n\nreplace_one__2_v0() {\n    local source_233=\"${1}\"\n    local search_234=\"${2}\"\n    local replace_235=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_236=\"\"\n    bash_version__0_v0 \n    left_comp=(\"${ret_bash_version0_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_236=\"${source_233/\"${search_234}\"/\"${replace_235}\"}\"\n        __status=$?\n    else\n        result_236=\"${source_233/\"${search_234}\"/${replace_235}}\"\n        __status=$?\n    fi\n    ret_replace_one2_v0=\"${result_236}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__3_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version3_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version3_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nsplit__5_v0() {\n    local text_238=\"${1}\"\n    local delimiter_239=\"${2}\"\n    local result_240=()\n    IFS=\"${delimiter_239}\" read -rd '' -a result_240 < <(printf %s \"$text_238\")\n    __status=$?\n    ret_split5_v0=(\"${result_240[@]}\")\n    return 0\n}\n\nsplit_lines__6_v0() {\n    local text_237=\"${1}\"\n    split__5_v0 \"${text_237}\" \"\n\"\n    ret_split_lines6_v0=(\"${ret_split5_v0[@]}\")\n    return 0\n}\n\nparse_int__14_v0() {\n    local text_242=\"${1}\"\n    [ -n \"${text_242}\" ] && [ \"${text_242}\" -eq \"${text_242}\" ] 2>/dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_parse_int14_v0=''\n        return \"${__status}\"\n    fi\n    ret_parse_int14_v0=\"${text_242}\"\n    return 0\n}\n\ntext_contains__17_v0() {\n    local source_251=\"${1}\"\n    local search_252=\"${2}\"\n    [[ \"${source_251}\" == *\"${search_252}\"* ]]\n    __status=$?\n    ret_text_contains17_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nmatch_regex__20_v0() {\n    local source_219=\"${1}\"\n    local search_220=\"${2}\"\n    local extended_221=\"${3}\"\n    sed_version__3_v0 \n    local sed_version_222=\"${ret_sed_version3_v0}\"\n    replace__1_v0 \"${search_220}\" \"/\" \"\\\\/\"\n    search_220=\"${ret_replace1_v0}\"\n    local output_230=\"\"\n    if [ \"$(( $(( sed_version_222 == __SED_VERSION_GNU_1 )) || $(( sed_version_222 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__1_v0 \"${search_220}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_220=\"${ret_replace1_v0}\"\n    fi\n    if [ \"${extended_221}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_222 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            # '\\b' is not in POSIX standards. Disable it\n            replace__1_v0 \"${search_220}\" \"\\\\b\" \"\\\\b\"\n            search_220=\"${ret_replace1_v0}\"\n            local command_4\n            command_4=\"$(sed -r -ne \"/${search_220}/p\" <<<\"${source_219}\")\"\n            __status=$?\n            output_230=\"${command_4}\"\n        else\n            local command_5\n            command_5=\"$(sed -E -ne \"/${search_220}/p\" <<<\"${source_219}\")\"\n            __status=$?\n            output_230=\"${command_5}\"\n        fi\n    else\n        if [ \"$(( $(( sed_version_222 == __SED_VERSION_GNU_1 )) || $(( sed_version_222 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__1_v0 \"${search_220}\" \"\\\\|\" \"|\"\n            search_220=\"${ret_replace1_v0}\"\n        fi\n        local command_6\n        command_6=\"$(sed -ne \"/${search_220}/p\" <<<\"${source_219}\")\"\n        __status=$?\n        output_230=\"${command_6}\"\n    fi\n    if [ \"$([ \"_${output_230}\" == \"_\" ]; echo $?)\" != 0 ]; then\n        ret_match_regex20_v0=1\n        return 0\n    fi\n    ret_match_regex20_v0=0\n    return 0\n}\n\nis_command__125_v0() {\n    local command_209=\"${1}\"\n    [ -x \"$(command -v \"${command_209}\")\" ]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_command125_v0=0\n        return 0\n    fi\n    ret_is_command125_v0=1\n    return 0\n}\n\nprintf__131_v0() {\n    local format_215=\"${1}\"\n    local args_216=(\"${!2}\")\n    args_216=(\"${format_215}\" \"${args_216[@]}\")\n    __status=$?\n    printf \"${args_216[@]}\"\n    __status=$?\n}\n\necho_error__141_v0() {\n    local message_213=\"${1}\"\n    local exit_code_214=\"${2}\"\n    local array_7=(\"${message_213}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;41m%s\\\\x1b[0m\n\" array_7[@]\n    if [ \"$(( exit_code_214 > 0 ))\" != 0 ]; then\n        exit \"${exit_code_214}\"\n    fi\n}\n\nbash_version__142_v0() {\n    local command_8\n    command_8=\"$(printf \"%s\n\" \"${BASH_VERSINFO[0]}\")\"\n    __status=$?\n    local major_245=\"${command_8}\"\n    local command_9\n    command_9=\"$(printf \"%s\n\" \"${BASH_VERSINFO[1]}\")\"\n    __status=$?\n    local minor_246=\"${command_9}\"\n    local command_10\n    command_10=\"$(printf \"%s\n\" \"${BASH_VERSINFO[2]}\")\"\n    __status=$?\n    local patch_247=\"${command_10}\"\n    ret_bash_version142_v0=(\"${major_245}\" \"${minor_246}\" \"${patch_247}\")\n    return 0\n}\n\nfetch__240_v0() {\n    local url_204=\"${1}\"\n    local method_205=\"${2}\"\n    local data_206=\"${3}\"\n    local headers_207=(\"${!4}\")\n    local full_headers_208=\"\"\n    is_command__125_v0 \"curl\"\n    local ret_is_command125_v0__46_9=\"${ret_is_command125_v0}\"\n    is_command__125_v0 \"wget\"\n    local ret_is_command125_v0__58_9=\"${ret_is_command125_v0}\"\n    if [ \"${ret_is_command125_v0__46_9}\" != 0 ]; then\n        local __length_12=\"${data_206}\"\n        local post_data_210\n        post_data_210=\"$(if [ \"$(( ${#__length_12} > 0 ))\" != 0 ]; then echo \"-d ${data_206}\"; else echo \"\"; fi)\"\n        local __length_13=\"${headers_207[0]}\"\n        if [ \"$(( ${#__length_13} > 0 ))\" != 0 ]; then\n            for header_211 in \"${headers_207[@]}\"; do\n                full_headers_208=\"${full_headers_208}\"\" -H \\\"${header_211}\\\"\"\n            done\n        fi\n        local command_14\n        command_14=\"$(curl -L \"${url_204}\" --silent -S -X ${method_205} ${full_headers_208} ${post_data_210} 2>&1)\"\n        __status=$?\n        local output_212=\"${command_14}\"\n        if [ \"$(( __status > 0 ))\" != 0 ]; then\n            echo_error__141_v0 \"curl request failed with error: ${output_212}\" \"${__status}\"\n        fi\n        ret_fetch240_v0=\"${output_212}\"\n        return 0\n    elif [ \"${ret_is_command125_v0__58_9}\" != 0 ]; then\n        local __length_15=\"${data_206}\"\n        local post_data_217\n        post_data_217=\"$(if [ \"$(( ${#__length_15} > 0 ))\" != 0 ]; then echo \"--body-data ${data_206}\"; else echo \"\"; fi)\"\n        local __length_16=\"${headers_207[0]}\"\n        if [ \"$(( ${#__length_16} > 0 ))\" != 0 ]; then\n            for header_218 in \"${headers_207[@]}\"; do\n                full_headers_208=\"${full_headers_208}\"\" --header='${header_218}'\"\n            done\n        fi\n        local command_17\n        command_17=\"$(wget \"${url_204}\" -qO- --method=\"${method_205}\" ${full_headers_208} ${post_data_217})\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            echo_error__141_v0 \"wget request failed with exit code ${__status}\" \"${__status}\"\n        fi\n        ret_fetch240_v0=\"${command_17}\"\n        return 0\n    else\n        match_regex__20_v0 \"${url_204}\" \"http://\" 0\n        local ret_match_regex20_v0__68_16=\"${ret_match_regex20_v0}\"\n        if [ \"${ret_match_regex20_v0__68_16}\" != 0 ]; then\n            local port_231=80\n            local path_232=\"\"\n            replace__1_v0 \"${url_204}\" \"http://\" \"\"\n            url_204=\"${ret_replace1_v0}\"\n            replace_one__2_v0 \"${url_204}\" \"/\" \"\n\"\n            local ret_replace_one2_v0__72_41=\"${ret_replace_one2_v0}\"\n            split_lines__6_v0 \"${ret_replace_one2_v0__72_41}\"\n            local parts_241=(\"${ret_split_lines6_v0[@]}\")\n            # split host and path\n            url_204=\"${parts_241[0]}\"\n            match_regex__20_v0 \"${url_204}\" \":([0-9][0-9]+)\" 1\n            local ret_match_regex20_v0__75_20=\"${ret_match_regex20_v0}\"\n            if [ \"${ret_match_regex20_v0__75_20}\" != 0 ]; then\n                # https://github.com/amber-lang/amber/pull/906#discussion_r2616210649\n                path_232=\"${parts_241[1]}\"\n                replace_one__2_v0 \"${url_204}\" \":\" \"\n\"\n                local ret_replace_one2_v0__77_41=\"${ret_replace_one2_v0}\"\n                split_lines__6_v0 \"${ret_replace_one2_v0__77_41}\"\n                parts_241=(\"${ret_split_lines6_v0[@]}\")\n                # split IP/domain and port\n                url_204=\"${parts_241[0]}\"\n                parse_int__14_v0 \"${parts_241[1]}\"\n                __status=$?\n                if [ \"${__status}\" != 0 ]; then\n                    ret_fetch240_v0=''\n                    return \"${__status}\"\n                fi\n                port_231=\"${ret_parse_int14_v0}\"\n            else\n                local __length_18=\"${parts_241[1]}\"\n                path_232=\"$(if [ \"$(( ${#__length_18} > 0 ))\" != 0 ]; then echo \"${parts_241[1]}\"; else echo \"\"; fi)\"\n            fi\n            local __length_19=\"${headers_207[0]}\"\n            if [ \"$(( ${#__length_19} > 1 ))\" != 0 ]; then\n                for header_243 in \"${headers_207[@]}\"; do\n                    full_headers_208=\"${full_headers_208}\"\"${header_243}\n\"\n                done\n            fi\n            local __length_20=\"${data_206}\"\n            if [ \"$(( ${#__length_20} > 0 ))\" != 0 ]; then\n                local __length_21=\"${data_206}\"\n                full_headers_208=\"${full_headers_208}\"\"content-length: ${#__length_21}\n\"\n                local __length_22=\"${headers_207[0]}\"\n                if [ \"$(( ${#__length_22} == 0 ))\" != 0 ]; then\n                    full_headers_208=\"${full_headers_208}\"\"content-type: application/x-www-form-urlencoded\n\"\n                fi\n                full_headers_208=\"${full_headers_208}\"\"\n${data_206}\n\"\n            fi\n            exec 3<>/dev/tcp/${url_204}/${port_231}\n            __status=$?\n            if [ \"${__status}\" = 0 ]; then\n                local http_code_244=0\n                url_204=\"$(if [ \"$(( port_231 != 80 ))\" != 0 ]; then echo \"${url_204}:${port_231}\"; else echo \"${url_204}\"; fi)\"\n                bash_version__142_v0 \n                local vers_248=(\"${ret_bash_version142_v0[@]}\")\n                printf \"%s\n\" \"${method_205} /${path_232} HTTP/1.1\nhost: ${url_204}\nconnection: close\nuser-agent: Amber/bash-${vers_248[0]}.${vers_248[1]}.${vers_248[2]}\naccept: */*\n${full_headers_208}\" >&3\n                __status=$?\n                read _ http_code_244 _ <&3\n                  while IFS= read -r line; do \n                    [[ \"$line\" == $'\n' || -z \"$line\" ]] && break \n                  done <&3\n                __status=$?\n                if [ \"$(( http_code_244 > 226 ))\" != 0 ]; then\n                    # all official HTTP 2** codes go up to 226\n                    ret_fetch240_v0=\"${http_code_244}\"\n                    return 0\n                    # as for now, the best way is to return HTTP code since exit codes can't be >255\n                else\n                    local command_23\n                    command_23=\"$(cat <&3 && exec 3>&-)\"\n                    __status=$?\n                    ret_fetch240_v0=\"${command_23}\"\n                    return 0\n                fi\n            fi\n            echo_error__141_v0 \"Request failed with exit code ${__status}\" \"${__status}\"\n        else\n            echo_error__141_v0 \"No connection method is available, aborting\" 1\n        fi\n    fi\n}\n\narray_25=(\"\")\nfetch__240_v0 \"http://echo.free.beeceptor.com\" \"GET\" \"\" array_25[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_fetch240_v0__4_26=\"${ret_fetch240_v0}\"\ntext_contains__17_v0 \"${ret_fetch240_v0__4_26}\" \"GET\"\nret_text_contains17_v0__4_12=\"${ret_text_contains17_v0}\"\nif [ \"$(( ! ret_text_contains17_v0__4_12 ))\" != 0 ]; then\n    exit 1\nfi\narray_26=(\"\")\nfetch__240_v0 \"http://echo.free.beeceptor.com\" \"POST\" \"\" array_26[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_fetch240_v0__6_26=\"${ret_fetch240_v0}\"\ntext_contains__17_v0 \"${ret_fetch240_v0__6_26}\" \"POST\"\nret_text_contains17_v0__6_12=\"${ret_text_contains17_v0}\"\nif [ \"$(( ! ret_text_contains17_v0__6_12 ))\" != 0 ]; then\n    exit 1\nfi\narray_27=(\"\")\nfetch__240_v0 \"http://echo.free.beeceptor.com\" \"PUT\" \"\" array_27[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_fetch240_v0__8_26=\"${ret_fetch240_v0}\"\ntext_contains__17_v0 \"${ret_fetch240_v0__8_26}\" \"PUT\"\nret_text_contains17_v0__8_12=\"${ret_text_contains17_v0}\"\nif [ \"$(( ! ret_text_contains17_v0__8_12 ))\" != 0 ]; then\n    exit 1\nfi\narray_28=(\"\")\nfetch__240_v0 \"http://echo.free.beeceptor.com\" \"DELETE\" \"\" array_28[@]\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_fetch240_v0__10_26=\"${ret_fetch240_v0}\"\ntext_contains__17_v0 \"${ret_fetch240_v0__10_26}\" \"DELETE\"\nret_text_contains17_v0__10_12=\"${ret_text_contains17_v0}\"\nif [ \"$(( ! ret_text_contains17_v0__10_12 ))\" != 0 ]; then\n    exit 1\nfi\necho \"Succeeded\"", "output": "import { fetch } from \"std/http\"\nimport { text_contains } from \"std/text\"\nmain {\n    if not text_contains(fetch(\"http://echo.free.beeceptor.com\")?, \"GET\"): fail 1\n\n    if not text_contains(fetch(\"http://echo.free.beeceptor.com\", \"POST\")?, \"POST\"): fail 1\n\n    if not text_contains(fetch(\"http://echo.free.beeceptor.com\", \"PUT\")?, \"PUT\"): fail 1\n\n    if not text_contains(fetch(\"http://echo.free.beeceptor.com\", \"DELETE\")?, \"DELETE\"): fail 1\n\n    echo(\"Succeeded\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find__0_v0() {\n    local array_309=(\"${!1}\")\n    local value_310=\"${2}\"\n    index_312=0;\n    for element_311 in \"${array_309[@]}\"; do\n        if [ \"$([ \"_${value_310}\" != \"_${element_311}\" ]; echo $?)\" != 0 ]; then\n            ret_array_find0_v0=\"${index_312}\"\n            return 0\n        fi\n        (( index_312++ )) || true\n    done\n    ret_array_find0_v0=-1\n    return 0\n}\n\narray_contains__2_v0() {\n    local array_307=(\"${!1}\")\n    local value_308=\"${2}\"\n    array_find__0_v0 array_307[@] \"${value_308}\"\n    local result_313=\"${ret_array_find0_v0}\"\n    ret_array_contains2_v0=\"$(( result_313 >= 0 ))\"\n    return 0\n}\n\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nbash_version__24_v0() {\n    local major_271=0\n    local minor_272=0\n    local patch_273=0\n    major_271=${BASH_VERSINFO[0]}\n        minor_272=${BASH_VERSINFO[1]}\n        patch_273=${BASH_VERSINFO[2]}\n    __status=$?\n    ret_bash_version24_v0=(\"${major_271}\" \"${minor_272}\" \"${patch_273}\")\n    return 0\n}\n\nreplace__25_v0() {\n    local source_267=\"${1}\"\n    local search_268=\"${2}\"\n    local replace_269=\"${3}\"\n    # Here we use a command to avoid #646\n    local result_270=\"\"\n    bash_version__24_v0 \n    left_comp=(\"${ret_bash_version24_v0[@]}\")\n    right_comp=(4 3)\n    local comp\n    comp=\"$(\n        # Compare if left array >= right array\n        len_comp=\"$( (( \"${#left_comp[@]}\" < \"${#right_comp[@]}\" )) && echo \"${#left_comp[@]}\"|| echo \"${#right_comp[@]}\")\"\n        for (( i=0; i<len_comp; i++ )); do\n            left=\"${left_comp[i]:-0}\"\n            right=\"${right_comp[i]:-0}\"\n            if (( \"${left}\" > \"${right}\" )); then\n                echo 1\n                exit\n            elif (( \"${left}\" < \"${right}\" )); then\n                echo 0\n                exit\n            fi\n        done\n        (( \"${#left_comp[@]}\" == \"${#right_comp[@]}\" || \"${#left_comp[@]}\" > \"${#right_comp[@]}\" )) && echo 1 || echo 0\n)\"\n    if [ \"${comp}\" != 0 ]; then\n        result_270=\"${source_267//\"${search_268}\"/\"${replace_269}\"}\"\n        __status=$?\n    else\n        result_270=\"${source_267//\"${search_268}\"/${replace_269}}\"\n        __status=$?\n    fi\n    ret_replace25_v0=\"${result_270}\"\n    return 0\n}\n\n__SED_VERSION_UNKNOWN_0=0\n__SED_VERSION_GNU_1=1\n__SED_VERSION_BUSYBOX_2=2\nsed_version__27_v0() {\n    # We can't match against a word \"GNU\" because\n    # alpine's busybox sed returns \"This is not GNU sed version\"\n    re='Copyright.+Free Software Foundation'; [[ $(sed --version 2>/dev/null) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_GNU_1}\"\n        return 0\n    fi\n    # On BSD single `sed` waits for stdin. We must use `sed --help` to avoid this.\n    re='BusyBox'; [[ $(sed --help 2>&1) =~ $re ]]\n    __status=$?\n    if [ \"$(( __status == 0 ))\" != 0 ]; then\n        ret_sed_version27_v0=\"${__SED_VERSION_BUSYBOX_2}\"\n        return 0\n    fi\n    ret_sed_version27_v0=\"${__SED_VERSION_UNKNOWN_0}\"\n    return 0\n}\n\nreplace_regex__28_v0() {\n    local source_262=\"${1}\"\n    local search_263=\"${2}\"\n    local replace_text_264=\"${3}\"\n    local extended_265=\"${4}\"\n    sed_version__27_v0 \n    local sed_version_266=\"${ret_sed_version27_v0}\"\n    replace__25_v0 \"${search_263}\" \"/\" \"\\\\/\"\n    search_263=\"${ret_replace25_v0}\"\n    replace__25_v0 \"${replace_text_264}\" \"/\" \"\\\\/\"\n    replace_text_264=\"${ret_replace25_v0}\"\n    if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n        # '\\b' is supported but not in POSIX standards. Disable it\n        replace__25_v0 \"${search_263}\" \"\\\\b\" \"\\\\\\\\b\"\n        search_263=\"${ret_replace25_v0}\"\n    fi\n    if [ \"${extended_265}\" != 0 ]; then\n        # GNU sed versions 4.0 through 4.2 support extended regex syntax,\n        # but only via the \"-r\" option\n        if [ \"$(( sed_version_266 == __SED_VERSION_GNU_1 ))\" != 0 ]; then\n            local command_2\n            command_2=\"$(sed -r -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_2}\"\n            return 0\n        else\n            local command_3\n            command_3=\"$(sed -E -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n            __status=$?\n            ret_replace_regex28_v0=\"${command_3}\"\n            return 0\n        fi\n    else\n        if [ \"$(( $(( sed_version_266 == __SED_VERSION_GNU_1 )) || $(( sed_version_266 == __SED_VERSION_BUSYBOX_2 )) ))\" != 0 ]; then\n            # GNU Sed BRE handle \\| as a metacharacter, but it is not POSIX standands. Disable it\n            replace__25_v0 \"${search_263}\" \"\\\\|\" \"|\"\n            search_263=\"${ret_replace25_v0}\"\n        fi\n        local command_4\n        command_4=\"$(sed -e \"s/${search_263}/${replace_text_264}/g\" <<<\"${source_262}\")\"\n        __status=$?\n        ret_replace_regex28_v0=\"${command_4}\"\n        return 0\n    fi\n}\n\nsplit__29_v0() {\n    local text_279=\"${1}\"\n    local delimiter_280=\"${2}\"\n    local result_281=()\n    IFS=\"${delimiter_280}\" read -rd '' -a result_281 < <(printf %s \"$text_279\")\n    __status=$?\n    ret_split29_v0=(\"${result_281[@]}\")\n    return 0\n}\n\njoin__32_v0() {\n    local list_276=(\"${!1}\")\n    local delimiter_277=\"${2}\"\n    local command_6\n    command_6=\"$(IFS=\"${delimiter_277}\" ; printf \"%s\n\" \"${list_276[*]}\")\"\n    __status=$?\n    ret_join32_v0=\"${command_6}\"\n    return 0\n}\n\ntrim__35_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    __status=$?\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim35_v0=\"${result_15}\"\n    return 0\n}\n\nis_mac_os_mktemp__72_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp72_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp72_v0=0\n    return 0\n}\n\ntemp_dir_create__73_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__35_v0 \"${template_11}\"\n    local ret_trim35_v0__113_8=\"${ret_trim35_v0}\"\n    if [ \"$([ \"_${ret_trim35_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__72_v0 \n    local ret_is_mac_os_mktemp72_v0__119_8=\"${ret_is_mac_os_mktemp72_v0}\"\n    if [ \"${ret_is_mac_os_mktemp72_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_7\n        command_7=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_7}\"\n    else\n        local command_8\n        command_8=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create73_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_8}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create73_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create73_v0=\"${filename_16}\"\n    return 0\n}\n\nescape_non_glob_chars__76_v0() {\n    local path_261=\"${1}\"\n    replace_regex__28_v0 \"${path_261}\" \"\\\\([^*?/]\\\\)\" \"\\\\\\\\\\\\1\" 0\n    ret_escape_non_glob_chars76_v0=\"${ret_replace_regex28_v0}\"\n    return 0\n}\n\nfile_glob_all__77_v0() {\n    local paths_259=(\"${!1}\")\n    local combined_260=\"\"\n    local __length_9=(\"${paths_259[@]}\")\n    if [ \"$(( ${#__length_9[@]} == 1 ))\" != 0 ]; then\n        escape_non_glob_chars__76_v0 \"${paths_259[0]}\"\n        combined_260=\"${ret_escape_non_glob_chars76_v0}\"\n    else\n        local items_274=()\n        for item_275 in \"${paths_259[@]}\"; do\n            escape_non_glob_chars__76_v0 \"${item_275}\"\n            item_275=\"${ret_escape_non_glob_chars76_v0}\"\n            items_274+=(\"${item_275}\")\n        done\n        join__32_v0 items_274[@] \" \"\n        combined_260=\"${ret_join32_v0}\"\n    fi\n    local command_12\n    command_12=\"$(eval \"for file in ${combined_260}; do [ -e \\\"\\$file\\\" ] && printf \\\"%s\\n\\\" \\\"\\$file\\\"; done\")\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob_all77_v0=()\n        return \"${__status}\"\n    fi\n    local files_278=\"${command_12}\"\n    split__29_v0 \"${files_278}\" \"\n\"\n    ret_file_glob_all77_v0=(\"${ret_split29_v0[@]}\")\n    return 0\n}\n\nfile_glob__78_v0() {\n    local path_258=\"${1}\"\n    local array_13=(\"${path_258}\")\n    file_glob_all__77_v0 array_13[@]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_file_glob78_v0=()\n        return \"${__status}\"\n    fi\n    ret_file_glob78_v0=(\"${ret_file_glob_all77_v0[@]}\")\n    return 0\n}\n\ncompare__129_v0() {\n    local actual_304=(\"${!1}\")\n    local expected_305=(\"${!2}\")\n    local __length_14=(\"${actual_304[@]}\")\n    local __length_15=(\"${expected_305[@]}\")\n    if [ \"$(( ${#__length_14[@]} != ${#__length_15[@]} ))\" != 0 ]; then\n        ret_compare129_v0=0\n        return 0\n    fi\n    for file_306 in \"${expected_305[@]}\"; do\n        array_contains__2_v0 actual_304[@] \"${file_306}\"\n        local ret_array_contains2_v0__10_16=\"${ret_array_contains2_v0}\"\n        if [ \"$(( ! ret_array_contains2_v0__10_16 ))\" != 0 ]; then\n            ret_compare129_v0=0\n            return 0\n        fi\n    done\n    ret_compare129_v0=1\n    return 0\n}\n\ntemp_dir_create__73_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create73_v0}\"\ntouch \"${tmpdir_17}/1st file with spaces.txt\"\ntouch \"${tmpdir_17}/2nd file with spaces.txt\"\ntouch \"${tmpdir_17}/file.txt\"\ntouch \"${tmpdir_17}/file1.txt\"\ntouch \"${tmpdir_17}/file2.txt\"\ntouch \"${tmpdir_17}/file99.txt\"\ntouch \"${tmpdir_17}/other.csv\"\nexpected_18=(\"${tmpdir_17}/file.txt\" \"${tmpdir_17}/file1.txt\" \"${tmpdir_17}/file2.txt\" \"${tmpdir_17}/file99.txt\")\nfile_glob__78_v0 \"${tmpdir_17}/file*.txt\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    echo \"FAILED\"\nfi\nactual_282=(\"${ret_file_glob78_v0[@]}\")\ncompare__129_v0 actual_282[@] expected_18[@]\nret_compare129_v0__38_8=\"${ret_compare129_v0}\"\nif [ \"${ret_compare129_v0__38_8}\" != 0 ]; then\n    echo \"Succeeded\"\nelse\n    echo \"Expected: ${expected_18[*]}\"\n    echo \"Actual: ${actual_282[*]}\"\nfi", "output": "import * from \"std/array\"\nimport * from \"std/fs\"\nimport * from \"std/text\"\n\nfun compare(actual: [Text], expected: [Text]): Bool {\n    if len(actual) != len(expected) {\n        return false\n    }\n    for file in expected {\n        if not array_contains(actual, file) {\n            return false\n        }\n    }\n    return true\n}\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    trust {\n        touch(\"{tmpdir}/1st file with spaces.txt\")\n        touch(\"{tmpdir}/2nd file with spaces.txt\")\n        touch(\"{tmpdir}/file.txt\")\n        touch(\"{tmpdir}/file1.txt\")\n        touch(\"{tmpdir}/file2.txt\")\n        touch(\"{tmpdir}/file99.txt\")\n        touch(\"{tmpdir}/other.csv\")\n    }\n\n    const expected = [\n        \"{tmpdir}/file.txt\",\n        \"{tmpdir}/file1.txt\",\n        \"{tmpdir}/file2.txt\",\n        \"{tmpdir}/file99.txt\",\n    ]\n    const actual = file_glob(\"{tmpdir}/file*.txt\") failed {\n        echo(\"FAILED\")\n    }\n    if compare(actual, expected) {\n        echo(\"Succeeded\")\n    } else {\n        echo(\"Expected: {expected}\")\n        echo(\"Actual: {actual}\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# All dates are internally stored as milliseconds since the Epoch (1970-01-01 00:00 UTC).\ndate_from_posix__1_v0() {\n    local date_4=\"${1}\"\n    local format_5=\"${2}\"\n    local utc_6=\"${3}\"\n    local utc_flag_7\n    utc_flag_7=\"$(if [ \"${utc_6}\" != 0 ]; then echo \"-u\"; else echo \"\"; fi)\"\n    # Case if this is a GNU date command\n    local command_1\n    command_1=\"$(date ${utc_flag_7} -d \"$(date -d \"${date_4}\" +\"${format_5}\" 2>/dev/null)\" +%s 2>/dev/null)\"\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        # Case if this is a BSD date command\n        local command_0\n        command_0=\"$(date ${utc_flag_7} -j -f \"${format_5}\" \"${date_4}\" +%s)\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_date_from_posix1_v0=''\n            return \"${__status}\"\n        fi\n        ret_date_from_posix1_v0=\"${command_0}\"\n        return 0\n    fi\n    ret_date_from_posix1_v0=\"${command_1}\"\n    return 0\n}\n\ndate_add__3_v0() {\n    local date_12=\"${1}\"\n    local amount_13=\"${2}\"\n    local unit_14=\"${3}\"\n    if [ \"$([ \"_${unit_14}\" != \"_years\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + $(( $(( $(( $(( amount_13 * 365 )) * 24 )) * 60 )) * 60 )) ))\"\n        return 0\n    elif [ \"$([ \"_${unit_14}\" != \"_months\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + $(( $(( $(( $(( amount_13 * 30 )) * 24 )) * 60 )) * 60 )) ))\"\n        return 0\n    elif [ \"$([ \"_${unit_14}\" != \"_days\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + $(( $(( $(( amount_13 * 24 )) * 60 )) * 60 )) ))\"\n        return 0\n    elif [ \"$([ \"_${unit_14}\" != \"_hours\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + $(( $(( amount_13 * 60 )) * 60 )) ))\"\n        return 0\n    elif [ \"$([ \"_${unit_14}\" != \"_minutes\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + $(( amount_13 * 60 )) ))\"\n        return 0\n    elif [ \"$([ \"_${unit_14}\" != \"_seconds\" ]; echo $?)\" != 0 ]; then\n        ret_date_add3_v0=\"$(( date_12 + amount_13 ))\"\n        return 0\n    else\n        ret_date_add3_v0=''\n        return 1\n    fi\n}\n\ndate_from_posix__1_v0 \"2009-02-07 09:46:40\" \"%F %T\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ndate_8=\"${ret_date_from_posix1_v0}\"\ndate_add__3_v0 \"${date_8}\" 17 \"days\"\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_add3_v0__5_8=\"${ret_date_add3_v0}\"\ndate_from_posix__1_v0 \"2009-02-24 09:46:40\" \"%F %T\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\nret_date_from_posix1_v0__5_39=\"${ret_date_from_posix1_v0}\"\nif [ \"$(( ret_date_add3_v0__5_8 == ret_date_from_posix1_v0__5_39 ))\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import * from \"std/date\"\n\nmain {\n    const date = date_from_posix(\"2009-02-07 09:46:40\")?\n    if date_add(date, 17, \"days\")? == date_from_posix(\"2009-02-24 09:46:40\")? {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim_left__9_v0() {\n    local text_5=\"${1}\"\n    local result_6=\"\"\n    result_6=\"${text_5#${text_5%%[![:space:]]*}}\"\n    ret_trim_left9_v0=\"${result_6}\"\n    return 0\n}\n\ntrim_left__9_v0 \"  hello   world  \"\nret_trim_left9_v0__4_10=\"${ret_trim_left9_v0}\"\nprintf '%s\\n' \"${ret_trim_left9_v0__4_10}\"", "output": "import * from \"std/text\"\n\n main {\n    echo(trim_left(\"  hello   world  \"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nshopt_enable__159_v0() {\n    local optname_5=\"${1}\"\n    local set_opt_6=\"${2}\"\n    if [ \"${set_opt_6}\" != 0 ]; then\n        shopt -qso \"${optname_5}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_shopt_enable159_v0=''\n            return \"${__status}\"\n        fi\n    else\n        shopt -qs \"${optname_5}\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_shopt_enable159_v0=''\n            return \"${__status}\"\n        fi\n    fi\n}\n\n# Output\n# hello\n# world\n# *\nshopt_enable__159_v0 \"xpg_echo\" 0\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\necho \"hello\\nworld\"\n__status=$?\nshopt_enable__159_v0 \"noglob\" 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\necho *\n__status=$?", "output": "import { shopt_enable } from \"std/env\"\n\n// Output\n// hello\n// world\n// *\n\nmain {\n   shopt_enable(\"xpg_echo\")?\n   trust $ echo \"hello\\\\nworld\" $\n   shopt_enable(\"noglob\", true)?\n   trust $ echo * $\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nenv_const_set__121_v0() {\n    local name_5=\"${1}\"\n    local val_6=\"${2}\"\n    readonly $name_5=\"$val_6\" 2> /dev/null\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_env_const_set121_v0=''\n        return \"${__status}\"\n    fi\n}\n\nenv_const_set__121_v0 \"test_shell_constant_get\" \"Succeeded\"\n__status=$?\necho \"$test_shell_constant_get\"\n__status=$?", "output": "import * from \"std/env\"\n\nmain {\n    trust env_const_set(\"test_shell_constant_get\", \"Succeeded\")\n    trust $ echo \"\\$test_shell_constant_get\" $\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nis_root__130_v0() {\n    local command_0\n    command_0=\"$(id -u)\"\n    if [ \"$([ \"_${command_0}\" != \"_0\" ]; echo $?)\" != 0 ]; then\n        ret_is_root130_v0=1\n        return 0\n    fi\n    ret_is_root130_v0=0\n    return 0\n}\n\nis_root__130_v0 \nret_is_root130_v0__4_12=\"${ret_is_root130_v0}\"\nif [ \"$(( ! ret_is_root130_v0__4_12 ))\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { is_root } from \"std/env\"\n\nmain {\n    if not is_root() {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nprintf__131_v0() {\n    local format_11=\"${1}\"\n    local args_12=(\"${!2}\")\n    args_12=(\"${format_11}\" \"${args_12[@]}\")\n    printf \"${args_12[@]}\"\n}\n\necho_error__141_v0() {\n    local message_9=\"${1}\"\n    local exit_code_10=\"${2}\"\n    local array_0=(\"${message_9}\")\n    printf__131_v0 \"\\\\x1b[1;3;97;41m%s\\\\x1b[0m\n\" array_0[@]\n    if [ \"$(( exit_code_10 > 0 ))\" != 0 ]; then\n        exit \"${exit_code_10}\"\n    fi\n}\n\n# Output\n# \u001b[1;3;97;41mHello Amber!\u001b[0m\necho_error__141_v0 \"Hello Amber\"'!'\"\" 0", "output": "import * from \"std/env\"\n\n// Output\n// \u001b[1;3;97;41mHello Amber!\u001b[0m\n\nmain {\n    echo_error(\"Hello Amber!\", 0)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nescaped__132_v0() {\n    local text_7=\"${1}\"\n    ret_escaped132_v0=\"$(printf \"%s\n\" \"$text_7\" | sed -e 's/\\\\/\\\\\\\\/g' -e \"s/%/%%/g\")\"\n    return 0\n}\n\nitalic__135_v0() {\n    local message_6=\"${1}\"\n    escaped__132_v0 \"${message_6}\"\n    local ret_escaped132_v0__268_21=\"${ret_escaped132_v0}\"\n    ret_italic135_v0=\"\\\\x1b[3m${ret_escaped132_v0__268_21}\\\\x1b[0m\"\n    return 0\n}\n\n# Output\n# \\x1b[3mHello Amber!\\x1b[0m\nitalic__135_v0 \"Hello Amber\"'!'\"\"\nret_italic135_v0__7_10=\"${ret_italic135_v0}\"\nprintf '%s\\n' \"${ret_italic135_v0__7_10}\"", "output": "import * from \"std/env\"\n\n// Output\n// \\x1b[3mHello Amber!\\x1b[0m\n\nmain {\n    echo(italic(\"Hello Amber!\"))\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\narray_find_all__1_v0() {\n    local array_16=(\"${!1}\")\n    local value_17=\"${2}\"\n    local result_18=()\n    index_20=0;\n    for element_19 in \"${array_16[@]}\"; do\n        if [ \"$([ \"_${value_17}\" != \"_${element_19}\" ]; echo $?)\" != 0 ]; then\n            result_18+=(\"${index_20}\")\n        fi\n        (( index_20++ )) || true\n    done\n    ret_array_find_all1_v0=(\"${result_18[@]}\")\n    return 0\n}\n\n# Output\n# Indices of \"zero\": [0 6]\n# Indices of \"one\": [1 5]\n# Indices of \"two\": [2 4]\n# Indices of \"three\": [3]\n# Indices of \"four\": []\ntest_search__13_v0() {\n    local data_14=(\"${!1}\")\n    local value_15=\"${2}\"\n    array_find_all__1_v0 data_14[@] \"${value_15}\"\n    local indices_21=(\"${ret_array_find_all1_v0[@]}\")\n    echo \"Indices of \\\"${value_15}\\\": [${indices_21[*]}]\"\n}\n\nnumbers_0=(\"zero\" \"one\" \"two\" \"three\" \"two\" \"one\" \"zero\")\ntest_search__13_v0 numbers_0[@] \"zero\"\ntest_search__13_v0 numbers_0[@] \"one\"\ntest_search__13_v0 numbers_0[@] \"two\"\ntest_search__13_v0 numbers_0[@] \"three\"\ntest_search__13_v0 numbers_0[@] \"four\"", "output": "import { array_find_all } from \"std/array\"\n\n// Output\n// Indices of \"zero\": [0 6]\n// Indices of \"one\": [1 5]\n// Indices of \"two\": [2 4]\n// Indices of \"three\": [3]\n// Indices of \"four\": []\n\nfun test_search(data: [Text], value: Text): Null {\n    const indices = array_find_all(data, value)\n    echo(\"Indices of \\\"{value}\\\": [{indices}]\")\n}\n\nmain {\n    const numbers = [\"zero\", \"one\", \"two\", \"three\", \"two\", \"one\", \"zero\"]\n    test_search(numbers, \"zero\")\n    test_search(numbers, \"one\")\n    test_search(numbers, \"two\")\n    test_search(numbers, \"three\")\n    test_search(numbers, \"four\")\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\nsorted__10_v0() {\n    local array_19=(\"${!1}\")\n    local desc_20=\"${2}\"\n    local version_sort_21=\"${3}\"\n    local __length_0=(\"${array_19[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_0[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v0=(\"${array_19[@]}\")\n        return 0\n    fi\n    local desc_flag_22\n    desc_flag_22=\"$(if [ \"${desc_20}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_23=\"\"\n    if [ \"$(( 1 && version_sort_21 ))\" != 0 ]; then\n        sort_flag_23=\"-V\"\n    fi\n    local result_24=()\n    IFS=\"\n\" read -rd '' -a result_24 < <(printf \"%s\n\" \"${array_19[@]}\" | sort ${sort_flag_23} ${desc_flag_22})\n    ret_sorted10_v0=(\"${result_24[@]}\")\n    return 0\n}\n\nsorted__10_v1() {\n    local array_29=(\"${!1}\")\n    local desc_30=\"${2}\"\n    local version_sort_31=\"${3}\"\n    local __length_2=(\"${array_29[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_2[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v1=(\"${array_29[@]}\")\n        return 0\n    fi\n    local desc_flag_32\n    desc_flag_32=\"$(if [ \"${desc_30}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_33=\"\"\n        sort_flag_33=\"-n\"\n    local result_34=()\n    IFS=\"\n\" read -rd '' -a result_34 < <(printf \"%s\n\" \"${array_29[@]}\" | sort ${sort_flag_33} ${desc_flag_32})\n    ret_sorted10_v1=(\"${result_34[@]}\")\n    return 0\n}\n\nsorted__10_v2() {\n    local array_39=(\"${!1}\")\n    local desc_40=\"${2}\"\n    local version_sort_41=\"${3}\"\n    local __length_4=(\"${array_39[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_4[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v2=(\"${array_39[@]}\")\n        return 0\n    fi\n    local desc_flag_42\n    desc_flag_42=\"$(if [ \"${desc_40}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_43=\"\"\n        sort_flag_43=\"-n\"\n    local result_44=()\n    IFS=\"\n\" read -rd '' -a result_44 < <(printf \"%s\n\" \"${array_39[@]}\" | sort ${sort_flag_43} ${desc_flag_42})\n    ret_sorted10_v2=(\"${result_44[@]}\")\n    return 0\n}\n\nsorted__10_v3() {\n    local array_49=(\"${!1}\")\n    local desc_50=\"${2}\"\n    local version_sort_51=\"${3}\"\n    local __length_6=(\"${array_49[@]}\")\n    if [ \"$(( 0 || $(( ${#__length_6[@]} <= 1 )) ))\" != 0 ]; then\n        ret_sorted10_v3=(\"${array_49[@]}\")\n        return 0\n    fi\n    local desc_flag_52\n    desc_flag_52=\"$(if [ \"${desc_50}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_53=\"\"\n        sort_flag_53=\"-n\"\n    local result_54=()\n    IFS=\"\n\" read -rd '' -a result_54 < <(printf \"%s\n\" \"${array_49[@]}\" | sort ${sort_flag_53} ${desc_flag_52})\n    ret_sorted10_v3=(\"${result_54[@]}\")\n    return 0\n}\n\nsorted__10_v4() {\n    local array_59=(\"${!1}\")\n    local desc_60=\"${2}\"\n    local version_sort_61=\"${3}\"\n        ret_sorted10_v4=(\"${array_59[@]}\")\n        return 0\n    local desc_flag_62\n    desc_flag_62=\"$(if [ \"${desc_60}\" != 0 ]; then echo \"-r\"; else echo \"\"; fi)\"\n    local sort_flag_63=\"\"\n    local result_64=()\n    IFS=\"\n\" read -rd '' -a result_64 < <(printf \"%s\n\" \"${array_59[@]}\" | sort ${sort_flag_63} ${desc_flag_62})\n    ret_sorted10_v4=(\"${result_64[@]}\")\n    return 0\n}\n\n# Output\n# Array length: 7\n# [-5 1 12 2 a c d]\n# Array length: 7\n# [1 2 12 a c d -5]\n# Array length: 7\n# [d c a 2 12 1 -5]\n# Array length: 4\n# [-2 5 7 10]\n# Array length: 4\n# [10 7 5 -2]\n# Array length: 4\n# [-2 5 7 10]\n# Array length: 4\n# [-5.4 2.34 6.1 11.5]\n# Array length: 4\n# [11.5 6.1 2.34 -5.4]\n# Array length: 2\n# [0 1]\n# Array length: 2\n# [ ]\ntest_sorted__13_v0() {\n    local arr_16=(\"${!1}\")\n    local desc_17=\"${2}\"\n    local version_sort_18=\"${3}\"\n    sorted__10_v0 arr_16[@] \"${desc_17}\" \"${version_sort_18}\"\n    local result_25=(\"${ret_sorted10_v0[@]}\")\n    local __length_9=(\"${result_25[@]}\")\n    echo \"Array length: ${#__length_9[*]}\"\n    echo \"[${result_25[*]}]\"\n}\n\ntest_sorted__13_v1() {\n    local arr_26=(\"${!1}\")\n    local desc_27=\"${2}\"\n    local version_sort_28=\"${3}\"\n    sorted__10_v1 arr_26[@] \"${desc_27}\" \"${version_sort_28}\"\n    local result_35=(\"${ret_sorted10_v1[@]}\")\n    local __length_10=(\"${result_35[@]}\")\n    echo \"Array length: ${#__length_10[*]}\"\n    echo \"[${result_35[*]}]\"\n}\n\ntest_sorted__13_v2() {\n    local arr_36=(\"${!1}\")\n    local desc_37=\"${2}\"\n    local version_sort_38=\"${3}\"\n    sorted__10_v2 arr_36[@] \"${desc_37}\" \"${version_sort_38}\"\n    local result_45=(\"${ret_sorted10_v2[@]}\")\n    local __length_11=(\"${result_45[@]}\")\n    echo \"Array length: ${#__length_11[*]}\"\n    echo \"[${result_45[*]}]\"\n}\n\ntest_sorted__13_v3() {\n    local arr_46=(\"${!1}\")\n    local desc_47=\"${2}\"\n    local version_sort_48=\"${3}\"\n    sorted__10_v3 arr_46[@] \"${desc_47}\" \"${version_sort_48}\"\n    local result_55=(\"${ret_sorted10_v3[@]}\")\n    local __length_12=(\"${result_55[@]}\")\n    echo \"Array length: ${#__length_12[*]}\"\n    echo \"[${result_55[*]}]\"\n}\n\ntest_sorted__13_v4() {\n    local arr_56=(\"${!1}\")\n    local desc_57=\"${2}\"\n    local version_sort_58=\"${3}\"\n    sorted__10_v4 arr_56[@] \"${desc_57}\" \"${version_sort_58}\"\n    local result_65=(\"${ret_sorted10_v4[@]}\")\n    local __length_13=(\"${result_65[@]}\")\n    echo \"Array length: ${#__length_13[*]}\"\n    echo \"[${result_65[*]}]\"\n}\n\narray_15=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sorted__13_v0 array_15[@] 0 0\narray_16=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sorted__13_v0 array_16[@] 0 1\narray_17=(\"c\" \"d\" \"a\" \"1\" \"12\" \"2\" \"-5\")\ntest_sorted__13_v0 array_17[@] 1 0\narray_18=(7 10 5 -2)\ntest_sorted__13_v1 array_18[@] 0 0\narray_19=(7 10 5 -2)\ntest_sorted__13_v1 array_19[@] 1 0\narray_20=(7 10 5 -2)\ntest_sorted__13_v1 array_20[@] 0 1\narray_21=(11.5 6.1 -5.4 2.34)\ntest_sorted__13_v2 array_21[@] 0 0\narray_22=(11.5 6.1 -5.4 2.34)\ntest_sorted__13_v2 array_22[@] 1 0\narray_23=(1 0)\ntest_sorted__13_v3 array_23[@] 0 0\narray_24=('' '')\ntest_sorted__13_v4 array_24[@] 0 0", "output": "import { sorted } from \"std/array\"\n\n// Output\n// Array length: 7\n// [-5 1 12 2 a c d]\n// Array length: 7\n// [1 2 12 a c d -5]\n// Array length: 7\n// [d c a 2 12 1 -5]\n// Array length: 4\n// [-2 5 7 10]\n// Array length: 4\n// [10 7 5 -2]\n// Array length: 4\n// [-2 5 7 10]\n// Array length: 4\n// [-5.4 2.34 6.1 11.5]\n// Array length: 4\n// [11.5 6.1 2.34 -5.4]\n// Array length: 2\n// [0 1]\n// Array length: 2\n// [ ]\n\nfun test_sorted(arr: [], desc: Bool, version_sort: Bool) {\n    const result = sorted(arr, desc, version_sort)\n    echo(\"Array length: {len(result)}\")\n    echo(\"[{result}]\")\n}\n\nmain {\n    test_sorted([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], false, false)\n    test_sorted([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], false, true)\n    test_sorted([\"c\", \"d\", \"a\", \"1\", \"12\", \"2\", \"-5\"], true, false)\n    test_sorted([7, 10, 5, -2], false, false)\n    test_sorted([7, 10, 5, -2], true, false)\n    test_sorted([7, 10, 5, -2], false, true)\n    test_sorted([11.5, 6.1, -5.4, 2.34], false, false)\n    test_sorted([11.5, 6.1, -5.4, 2.34], true, false)\n    test_sorted([true, false], false, false)\n    test_sorted([null, null], false, false)\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\ntrim__11_v0() {\n    local text_14=\"${1}\"\n    local result_15=\"\"\n    result_15=\"${text_14#${text_14%%[![:space:]]*}}\"\n    result_15=\"${result_15%${result_15##*[![:space:]]}}\"\n    __status=$?\n    ret_trim11_v0=\"${result_15}\"\n    return 0\n}\n\nfile_exists__42_v0() {\n    local path_28=\"${1}\"\n    [ -f \"${path_28}\" ]\n    __status=$?\n    ret_file_exists42_v0=\"$(( __status == 0 ))\"\n    return 0\n}\n\nis_mac_os_mktemp__48_v0() {\n    # macOS's mktemp does not have --version\n    mktemp --version >/dev/null 2>&1\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_mac_os_mktemp48_v0=1\n        return 0\n    fi\n    ret_is_mac_os_mktemp48_v0=0\n    return 0\n}\n\ntemp_dir_create__49_v0() {\n    local template_11=\"${1}\"\n    local auto_delete_12=\"${2}\"\n    local force_delete_13=\"${3}\"\n    trim__11_v0 \"${template_11}\"\n    local ret_trim11_v0__113_8=\"${ret_trim11_v0}\"\n    if [ \"$([ \"_${ret_trim11_v0__113_8}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"The template cannot be an empty string\"'!'\"\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    local filename_16=\"\"\n    is_mac_os_mktemp__48_v0 \n    local ret_is_mac_os_mktemp48_v0__119_8=\"${ret_is_mac_os_mktemp48_v0}\"\n    if [ \"${ret_is_mac_os_mktemp48_v0__119_8}\" != 0 ]; then\n        # usage: mktemp [-d] [-p tmpdir] [-q] [-t prefix] [-u] template ...\n        # mktemp [-d] [-p tmpdir] [-q] [-u] -t prefix\n        local command_0\n        command_0=\"$(mktemp -d -p \"$TMPDIR\" \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_0}\"\n    else\n        local command_1\n        command_1=\"$(mktemp -d -p \"$TMPDIR\" -t \"${template_11}\")\"\n        __status=$?\n        if [ \"${__status}\" != 0 ]; then\n            ret_temp_dir_create49_v0=''\n            return \"${__status}\"\n        fi\n        filename_16=\"${command_1}\"\n    fi\n    if [ \"$([ \"_${filename_16}\" != \"_\" ]; echo $?)\" != 0 ]; then\n        echo \"Failed to make a temporary directory\"\n        ret_temp_dir_create49_v0=''\n        return 1\n    fi\n    if [ \"${auto_delete_12}\" != 0 ]; then\n        if [ \"${force_delete_13}\" != 0 ]; then\n            trap 'rm -rf '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        else\n            trap 'rmdir '\"${filename_16}\"'' EXIT\n            __status=$?\n            if [ \"${__status}\" != 0 ]; then\n                echo \"Setting auto deletion fails. You must delete temporary dir ${filename_16}.\"\n            fi\n        fi\n    fi\n    ret_temp_dir_create49_v0=\"${filename_16}\"\n    return 0\n}\n\nis_command__125_v0() {\n    local command_26=\"${1}\"\n    [ -x \"$(command -v \"${command_26}\")\" ]\n    __status=$?\n    if [ \"${__status}\" != 0 ]; then\n        ret_is_command125_v0=0\n        return 0\n    fi\n    ret_is_command125_v0=1\n    return 0\n}\n\nfile_download__239_v0() {\n    local url_24=\"${1}\"\n    local path_25=\"${2}\"\n    is_command__125_v0 \"curl\"\n    local ret_is_command125_v0__15_9=\"${ret_is_command125_v0}\"\n    is_command__125_v0 \"wget\"\n    local ret_is_command125_v0__18_9=\"${ret_is_command125_v0}\"\n    is_command__125_v0 \"aria2c\"\n    local ret_is_command125_v0__21_9=\"${ret_is_command125_v0}\"\n    if [ \"${ret_is_command125_v0__15_9}\" != 0 ]; then\n        curl -L -o \"${path_25}\" \"${url_24}\" >/dev/null 2>&1\n        __status=$?\n    elif [ \"${ret_is_command125_v0__18_9}\" != 0 ]; then\n        wget \"${url_24}\" -P \"${path_25}\" >/dev/null 2>&1\n        __status=$?\n    elif [ \"${ret_is_command125_v0__21_9}\" != 0 ]; then\n        aria2c \"${url_24}\" -d \"${path_25}\" >/dev/null 2>&1\n        __status=$?\n    else\n        ret_file_download239_v0=''\n        return 1\n    fi\n}\n\ntemp_dir_create__49_v0 \"amber-XXXX\" 1 1\n__status=$?\nif [ \"${__status}\" != 0 ]; then\n    exit \"${__status}\"\nfi\ntmpdir_17=\"${ret_temp_dir_create49_v0}\"\ncd \"${tmpdir_17}\" || exit\nfile_download__239_v0 \"http://127.0.0.1:8081/\" \"./test.txt\"\n__status=$?\nif [ \"$(( __status == 0 ))\" != 0 ]; then\n    file_exists__42_v0 \"./test.txt\"\n    ret_file_exists42_v0__9_12=\"${ret_file_exists42_v0}\"\n    if [ \"${ret_file_exists42_v0__9_12}\" != 0 ]; then\n        echo \"ok\"\n    fi\nfi", "output": "import * from \"std/http\"\nimport * from \"std/fs\"\n\nmain {\n    const tmpdir = temp_dir_create(\"amber-XXXX\", true, true)?\n    cd(tmpdir)\n    trust file_download(\"http://127.0.0.1:8081/\", \"./test.txt\")\n    if status == 0 {\n        if file_exists(\"./test.txt\") {\n            echo(\"ok\")\n        }\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuname_kernel_release__145_v0() {\n    ret_uname_kernel_release145_v0=\"$(uname -r)\"\n    return 0\n}\n\nuname_kernel_release__145_v0 \nrelease_3=\"${ret_uname_kernel_release145_v0}\"\n# Should return non-empty kernel release version\nif [ \"$([ \"_${release_3}\" == \"_\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { uname_kernel_release } from \"std/env\"\n\nmain {\n    let release = uname_kernel_release()\n    // Should return non-empty kernel release version\n    if release != \"\" {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuname_nodename__144_v0() {\n    ret_uname_nodename144_v0=\"$(uname -n)\"\n    return 0\n}\n\nuname_nodename__144_v0 \nhostname_3=\"${ret_uname_nodename144_v0}\"\n# Should return non-empty hostname\nif [ \"$([ \"_${hostname_3}\" == \"_\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { uname_nodename } from \"std/env\"\n\nmain {\n    let hostname = uname_nodename()\n    // Should return non-empty hostname\n    if hostname != \"\" {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuname_machine__147_v0() {\n    ret_uname_machine147_v0=\"$(uname -m)\"\n    return 0\n}\n\nuname_machine__147_v0 \narch_3=\"${ret_uname_machine147_v0}\"\n# Should return non-empty string like \"x86_64\" or \"arm64\"\nif [ \"$([ \"_${arch_3}\" == \"_\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { uname_machine } from \"std/env\"\n\nmain {\n    let arch = uname_machine()\n    // Should return non-empty string like \"x86_64\" or \"arm64\"\n    if arch != \"\" {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuname_kernel_name__143_v0() {\n    ret_uname_kernel_name143_v0=\"$(uname -s)\"\n    return 0\n}\n\nuname_kernel_name__143_v0 \nkernel_3=\"${ret_uname_kernel_name143_v0}\"\n# Should return non-empty string like \"Linux\" or \"Darwin\"\nif [ \"$([ \"_${kernel_3}\" == \"_\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { uname_kernel_name } from \"std/env\"\n\nmain {\n    let kernel = uname_kernel_name()\n    // Should return non-empty string like \"Linux\" or \"Darwin\"\n    if kernel != \"\" {\n        echo(\"Succeeded\")\n    }\n}"}
{"input": "Convert this Bash to Amber: #!/usr/bin/env bash\n# Written in [Amber](https://amber-lang.com/)\n# version: nightly-56-gef85f6f\n[ \"$EUID\" -ne 0 ] && { { command -v sudo >/dev/null 2>&1 && __sudo=sudo; } || { command -v doas >/dev/null 2>&1 && __sudo=doas; }; }\n# We cannot import `bash_version` from `env.ab` because it imports `text.ab` making a circular dependency.\n# This is a workaround to avoid that issue and the import system should be improved in the future.\nuname_all__149_v0() {\n    ret_uname_all149_v0=\"$(uname -a)\"\n    return 0\n}\n\nuname_all__149_v0 \ninfo_3=\"${ret_uname_all149_v0}\"\n# Should return non-empty string with full system info\nif [ \"$([ \"_${info_3}\" == \"_\" ]; echo $?)\" != 0 ]; then\n    echo \"Succeeded\"\nfi", "output": "import { uname_all } from \"std/env\"\n\nmain {\n    let info = uname_all()\n    // Should return non-empty string with full system info\n    if info != \"\" {\n        echo(\"Succeeded\")\n    }\n}"}
